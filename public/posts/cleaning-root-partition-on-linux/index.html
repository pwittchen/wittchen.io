<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Cleaning root partition on Linux | Piotr Wittchen</title><meta name=keywords content="linux"><meta name=description content="Size of the root partition / on my system is 25 GB. I recently had a situation where I received notification from the system that there&rsquo;s too little free space on that partition, which was around 1 GB. My first attempt was to clean pacman cache with sudo pacman -Sc. It helped for a moment, but I kept receiving this notification. I searched for the solutions regarding extending the root partition and noticed that it wouldn&rsquo;t be that easy and probably require making backup and reinstalling the system."><meta name=author content="Piotr Wittchen"><link rel=canonical href=https://wittchen.io/posts/cleaning-root-partition-on-linux/><link crossorigin=anonymous href=/assets/css/stylesheet.cdcf872f971c70fddc7fd480e8457cd308ed0cf287b498bcdc6183fc6d147858.css integrity="sha256-zc+HL5cccP3cf9SA6EV80wjtDPKHtJi83GGD/G0UeFg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wittchen.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wittchen.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wittchen.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wittchen.io/apple-touch-icon.png><link rel=mask-icon href=https://wittchen.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Cleaning root partition on Linux"><meta property="og:description" content="Size of the root partition / on my system is 25 GB. I recently had a situation where I received notification from the system that there&rsquo;s too little free space on that partition, which was around 1 GB. My first attempt was to clean pacman cache with sudo pacman -Sc. It helped for a moment, but I kept receiving this notification. I searched for the solutions regarding extending the root partition and noticed that it wouldn&rsquo;t be that easy and probably require making backup and reinstalling the system."><meta property="og:type" content="article"><meta property="og:url" content="https://wittchen.io/posts/cleaning-root-partition-on-linux/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-10-17T09:57:56+00:00"><meta property="article:modified_time" content="2019-10-17T09:57:56+00:00"><meta property="og:site_name" content="Piotr Wittchen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Cleaning root partition on Linux"><meta name=twitter:description content="Size of the root partition / on my system is 25 GB. I recently had a situation where I received notification from the system that there&rsquo;s too little free space on that partition, which was around 1 GB. My first attempt was to clean pacman cache with sudo pacman -Sc. It helped for a moment, but I kept receiving this notification. I searched for the solutions regarding extending the root partition and noticed that it wouldn&rsquo;t be that easy and probably require making backup and reinstalling the system."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wittchen.io/posts/"},{"@type":"ListItem","position":2,"name":"Cleaning root partition on Linux","item":"https://wittchen.io/posts/cleaning-root-partition-on-linux/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Cleaning root partition on Linux","name":"Cleaning root partition on Linux","description":"Size of the root partition / on my system is 25 GB. I recently had a situation where I received notification from the system that there\u0026rsquo;s too little free space on that partition, which was around 1 GB. My first attempt was to clean pacman cache with sudo pacman -Sc. It helped for a moment, but I kept receiving this notification. I searched for the solutions regarding extending the root partition and noticed that it wouldn\u0026rsquo;t be that easy and probably require making backup and reinstalling the system.","keywords":["linux"],"articleBody":"Size of the root partition / on my system is 25 GB. I recently had a situation where I received notification from the system that there’s too little free space on that partition, which was around 1 GB. My first attempt was to clean pacman cache with sudo pacman -Sc. It helped for a moment, but I kept receiving this notification. I searched for the solutions regarding extending the root partition and noticed that it wouldn’t be that easy and probably require making backup and reinstalling the system. Although installing Arch is not scary for me anymore, I didn’t want to do that again, because it takes some time and after that I will have to configure all my stuff, install apps, etc. which is a lot of work. Due to this fact I started search for the solutions about cleaning root partition. I found nice program called ncdu, which is abbreviation for NCurses Disk Usage according to the man page. You can install it with pacman: sudo pacman -S ncdu. This program shows usage of the directories and shows directories, which take the biggest amount of space on the disk. Once you have that program, you can go to the root partition and run it:\ncd / ncdu It will do the analysis and return an interactive output with directories, size and visualisation of the size:\n-- / ------------------------- . 99,8 GiB [##########] /home . 12,1 GiB [# ] /usr . 7,8 GiB [ ] /var . 689,2 MiB [ ] /opt . 191,4 MiB [ ] /tmp 55,0 MiB [ ] /boot . 11,3 MiB [ ] /etc . 1,8 MiB [ ] /run . 912,0 KiB [ ] /dev ! 16,0 KiB [ ] /lost+found 12,0 KiB [ ] /srv ! 4,0 KiB [ ] /root e 4,0 KiB [ ] /mnt . 0,0 B [ ] /proc . 0,0 B [ ] /sys @ 0,0 B [ ] snap @ 0,0 B [ ] sbin @ 0,0 B [ ] lib64 @ 0,0 B [ ] lib @ 0,0 B [ ] bin We can naviagte through this directories and locate places which takes space on disk, which can be free.\nFor example, here are the contents of the /usr/ directory:\n--- /usr ------------------------ . 5,9 GiB [##########] /share 5,2 GiB [######## ] /lib 816,9 MiB [# ] /bin 279,8 MiB [ ] /include 15,5 MiB [ ] /local 13,1 MiB [ ] /src 5,5 MiB [ ] /lib32 2,5 MiB [ ] /doc @ 0,0 B [ ] sbin @ 0,0 B [ ] lib64 I’ve noticed that there were logs in /var/log/journal/, which have significant size. I also had a lot of downloaded packages in /var/cache/pacman/. As I noticed pacman -Sc command doesn’t clean all the cache and keeps the newest packages, so if we want to remove everything or almost everything, we can configure pacman appropriately or remove packages manually. These data could be cleaned and saved me a few GB of space, so I stopped seeing system notification. During cleanup, we can also have a look at other cache data, logs and /tmp/ directory. To verify disk sizes and used space, we can use df -H command.\nI hope, you’ll find this tips useful and avoid resizing root partition or system re-installation.\n","wordCount":"550","inLanguage":"en","datePublished":"2019-10-17T09:57:56Z","dateModified":"2019-10-17T09:57:56Z","author":{"@type":"Person","name":"Piotr Wittchen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wittchen.io/posts/cleaning-root-partition-on-linux/"},"publisher":{"@type":"Organization","name":"Piotr Wittchen","logo":{"@type":"ImageObject","url":"https://wittchen.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wittchen.io/ accesskey=h title="Piotr Wittchen (Alt + H)"><img src=https://wittchen.io/apple-touch-icon.png alt aria-label=logo height=35>Piotr Wittchen</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wittchen.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://wittchen.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://wittchen.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://wittchen.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://wittchen.io/contact/ title=contact><span>contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wittchen.io/>Home</a>&nbsp;»&nbsp;<a href=https://wittchen.io/posts/>Posts</a></div><h1 class=post-title>Cleaning root partition on Linux</h1><div class=post-meta><span title="2019-10-17 09:57:56 +0000 UTC">October 17, 2019</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;550 words&nbsp;·&nbsp;Piotr Wittchen&nbsp;|&nbsp;<a href=https://github.com/pwittchen/wittchen.io/blob/master/content/posts/cleaning-root-partition-on-linux.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>Size of the root partition <code>/</code> on my system is 25 GB. I recently had a situation where I received notification from the system that there&rsquo;s too little free space on that partition, which was around 1 GB. My first attempt was to clean pacman cache with <code>sudo pacman -Sc</code>. It helped for a moment, but I kept receiving this notification. I searched for the solutions regarding extending the root partition and noticed that it wouldn&rsquo;t be that easy and probably require making backup and reinstalling the system. Although installing Arch is not scary for me anymore, I didn&rsquo;t want to do that again, because it takes some time and after that I will have to configure all my stuff, install apps, etc. which is a lot of work. Due to this fact I started search for the solutions about cleaning root partition. I found nice program called <code>ncdu</code>, which is abbreviation for NCurses Disk Usage according to the man page. You can install it with pacman: <code>sudo pacman -S ncdu</code>. This program shows usage of the directories and shows directories, which take the biggest amount of space on the disk. Once you have that program, you can go to the root partition and run it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /
</span></span><span class=line><span class=cl>ncdu
</span></span></code></pre></div><p>It will do the analysis and return an interactive output with directories, size and visualisation of the size:</p><pre tabindex=0><code>-- / -------------------------
. 99,8 GiB  [##########] /home
.  12,1 GiB [#         ] /usr
.   7,8 GiB [          ] /var
. 689,2 MiB [          ] /opt
. 191,4 MiB [          ] /tmp
   55,0 MiB [          ] /boot
.  11,3 MiB [          ] /etc
.   1,8 MiB [          ] /run
. 912,0 KiB [          ] /dev
!  16,0 KiB [          ] /lost+found
   12,0 KiB [          ] /srv
!   4,0 KiB [          ] /root
e   4,0 KiB [          ] /mnt
.   0,0   B [          ] /proc
.   0,0   B [          ] /sys
@   0,0   B [          ]  snap
@   0,0   B [          ]  sbin
@   0,0   B [          ]  lib64
@   0,0   B [          ]  lib
@   0,0   B [          ]  bin
</code></pre><p>We can naviagte through this directories and locate places which takes space on disk, which can be free.</p><p>For example, here are the contents of the <code>/usr/</code> directory:</p><pre tabindex=0><code>--- /usr ------------------------

.   5,9 GiB [##########] /share
    5,2 GiB [########  ] /lib
  816,9 MiB [#         ] /bin
  279,8 MiB [          ] /include
   15,5 MiB [          ] /local
   13,1 MiB [          ] /src
    5,5 MiB [          ] /lib32
    2,5 MiB [          ] /doc
@   0,0   B [          ]  sbin
@   0,0   B [          ]  lib64
</code></pre><p>I&rsquo;ve noticed that there were logs in <code>/var/log/journal/</code>, which have significant size. I also had a lot of downloaded packages in <code>/var/cache/pacman/</code>. As I noticed <code>pacman -Sc</code> command doesn&rsquo;t clean all the cache and keeps the newest packages, so if we want to remove everything or almost everything, we can configure pacman appropriately or remove packages manually. These data could be cleaned and saved me a few GB of space, so I stopped seeing system notification. During cleanup, we can also have a look at other cache data, logs and <code>/tmp/</code> directory. To verify disk sizes and used space, we can use <code>df -H</code> command.</p><p>I hope, you&rsquo;ll find this tips useful and avoid resizing root partition or system re-installation.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wittchen.io/tags/linux/>linux</a></li></ul><nav class=paginav><a class=prev href=https://wittchen.io/posts/fixing-gnome-boot-problem/><span class=title>« Prev</span><br><span>Fixing Gnome Boot problem</span></a>
<a class=next href=https://wittchen.io/posts/formatting-usb-disk-on-linux/><span class=title>Next »</span><br><span>Formatting USB disk on Linux</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://wittchen.io/>Piotr Wittchen</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>