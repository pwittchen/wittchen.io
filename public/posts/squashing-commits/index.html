<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="While creating a Pull Requests it&rsquo;s good to squash all of our intermediate commits into one to avoid clutter in the git log, simplify analysis and allow for simple code revert when necessary.
Solution #1 #  Some time ago I&rsquo;ve found project http://rebaseandsqua.sh/ made by Jake Wharton. It&rsquo;s really useful, handy and allows us to rebase and squash commits quite easily.
We can just call:
curl rebaseandsqua.sh | sh then edit our commit messages and push the changes.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Different ways of squashing commits" />
<meta property="og:description" content="While creating a Pull Requests it&rsquo;s good to squash all of our intermediate commits into one to avoid clutter in the git log, simplify analysis and allow for simple code revert when necessary.
Solution #1 #  Some time ago I&rsquo;ve found project http://rebaseandsqua.sh/ made by Jake Wharton. It&rsquo;s really useful, handy and allows us to rebase and squash commits quite easily.
We can just call:
curl rebaseandsqua.sh | sh then edit our commit messages and push the changes." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wittchen.io/posts/squashing-commits/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-21T11:21:54+00:00" />
<meta property="article:modified_time" content="2020-08-15T18:09:42+02:00" />

<title>Different ways of squashing commits | Piotr Wittchen</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css" integrity="sha256-gsXb0jRHzuC0wqo&#43;0Izglh&#43;qQOH6Nw7uT4yfAuDUa18=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.085fb702e65f15a4a9d3ec2a4fa5600d67d3df36eeef61231b361cb5479aff43.js" integrity="sha256-CF&#43;3AuZfFaSp0&#43;wqT6VgDWfT3zbu72EjGzYctUea/0M=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Piotr Wittchen</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  <ul>
<li><a href="/">About</a></li>
<li><a href="/posts/">Posts</a></li>
<li><a href="/gh/">Code</a></li>
<li><a href="/talks/">Talks</a></li>
<li><a href="/contact/">Contact</a></li>
</ul>










</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Different ways of squashing commits</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#solution-1">Solution #1</a></li>
    <li><a href="#solution-2">Solution #2</a></li>
    <li><a href="#solution-3">Solution #3</a></li>
    <li><a href="#solution-4">Solution #4</a></li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown">
  <h1>
    <a href="/posts/squashing-commits/">Different ways of squashing commits</a>
  </h1>
  
  <h5>Jul 21, 2018</h5>



  
  <div>
    
      <a href="/tags/git/">git</a>
  </div>
  



<p>While creating a Pull Requests it&rsquo;s good to squash all of our intermediate commits into one to avoid clutter in the git log, simplify analysis and allow for simple code revert when necessary.</p>
<h2 id="solution-1">
  Solution #1
  <a class="anchor" href="#solution-1">#</a>
</h2>
<p>Some time ago I&rsquo;ve found project <a href="http://rebaseandsqua.sh/">http://rebaseandsqua.sh/</a> made by Jake Wharton. It&rsquo;s really useful, handy and allows us to rebase and squash commits quite easily.</p>
<p>We can just call:</p>
<pre tabindex="0"><code>curl rebaseandsqua.sh | sh
</code></pre><p>then edit our commit messages and push the changes.</p>
<h2 id="solution-2">
  Solution #2
  <a class="anchor" href="#solution-2">#</a>
</h2>
<p>If we want to understand this process and do it manually instead of delegating it to the script from the web, we should perform the following steps:</p>
<p>First, we need to decide how many commits, we want to squash. Let&rsquo;s say 3:</p>
<pre tabindex="0"><code>git rebase -i HEAD~3
</code></pre><p>We should see something like this in our editor of choice:</p>
<pre tabindex="0"><code>pick 48d7c25 adding link to vim-jdb plugin in README.md
pick 97376b4 Update README.md
pick a92b5bf adding squash alias to .gitconfig
</code></pre><p>Next, we can decide, which commits we want to squash:</p>
<pre tabindex="0"><code>pick 48d7c25 adding link to vim-jdb plugin in README.md
squash 97376b4 Update README.md
squash a92b5bf adding squash alias to .gitconfig
</code></pre><p>When, we save it, all of our commits will be squashed into one containing all commit messages.
We can now edit this message with command:</p>
<pre tabindex="0"><code>git commit --amend
</code></pre><p>You can read more about it in the <a href="https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History">official Git documentation</a>.</p>
<h2 id="solution-3">
  Solution #3
  <a class="anchor" href="#solution-3">#</a>
</h2>
<p>Some time ago I created a git alias for myself for merging last commits in <code>.gitconfig</code>:</p>
<pre tabindex="0"><code>merge-local-commits = !sh -c &#39;git reset --soft HEAD~$1&#39; -
</code></pre><p>We can invoke it with e.g.:</p>
<pre tabindex="0"><code>git merge-local-commits 3
</code></pre><p>It works pretty fine, but we need to remember how many commits we want to merge, type a commit message and perform commit again.</p>
<h2 id="solution-4">
  Solution #4
  <a class="anchor" href="#solution-4">#</a>
</h2>
<p>Recently I&rsquo;ve found another solution to this problem represented with the following alias:</p>
<pre tabindex="0"><code>squash = &#34;!f(){ git reset --soft HEAD~${1} &amp;&amp; git commit --edit -m\&#34;$(git log --format=%B --reverse HEAD..HEAD@{1})\&#34;;   };f&#34;
</code></pre><p>It&rsquo;s doing the same thing as previous alias, but it preserves all the commit messages. Thanks to that, we can keep all of our commit messages or delete them and leave just one, which is the most relevant for the given change. When we want to &ldquo;squash&rdquo; 3 commits, we can just type:</p>
<pre tabindex="0"><code>git squash 3
</code></pre><p>and we are ready to override all the intermediate commits with the single commit for the Pull Request:</p>
<pre tabindex="0"><code>git push -f
</code></pre><h2 id="summary">
  Summary
  <a class="anchor" href="#summary">#</a>
</h2>
<p>As you can see, there are many ways to squash commits into one. Probably there are another solutions, which are not described in this article. You can pratice them in some kind of &ldquo;dummy&rdquo; repo and then, when you&rsquo;ll feel comfortable with it, introduce it in your daily workflow. I hope, now you won&rsquo;t be afraid of squashing your commits :-).</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/pwittchen/wittchen.io/commit/d00fe6d9b20b9e5911002fc6f5b17542dafb3520" title='Last modified by Piotr Wittchen | Aug 15, 2020' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>Aug 15, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/pwittchen/wittchen.io/edit/master/content/content/posts/squashing-commits.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#solution-1">Solution #1</a></li>
    <li><a href="#solution-2">Solution #2</a></li>
    <li><a href="#solution-3">Solution #3</a></li>
    <li><a href="#solution-4">Solution #4</a></li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












