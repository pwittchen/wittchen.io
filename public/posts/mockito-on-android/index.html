<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Mockito on Android | Piotr Wittchen</title><meta name=keywords content="android,testing"><meta name=description content="Overview When we write unit tests for an Android application, sometimes there&rsquo;s a necessity to mock some classes or interfaces. Instead of writing implementations dedicated for unit tests by hand, we can use Mockito library. We can read article about Mockito on Android on Square&rsquo;s blog. Mockito can make our tests cleaner and better. It can be used both in classic Java projects and Android projects. It&rsquo;s one of the most popular mocking framework in Java and if you&rsquo;re a Java developer who writes unit tests and tries to apply TDD approach, you should be familiar with it."><meta name=author content="Piotr Wittchen"><link rel=canonical href=https://wittchen.io/posts/mockito-on-android/><link crossorigin=anonymous href=/assets/css/stylesheet.cdcf872f971c70fddc7fd480e8457cd308ed0cf287b498bcdc6183fc6d147858.css integrity="sha256-zc+HL5cccP3cf9SA6EV80wjtDPKHtJi83GGD/G0UeFg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wittchen.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wittchen.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wittchen.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wittchen.io/apple-touch-icon.png><link rel=mask-icon href=https://wittchen.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Mockito on Android"><meta property="og:description" content="Overview When we write unit tests for an Android application, sometimes there&rsquo;s a necessity to mock some classes or interfaces. Instead of writing implementations dedicated for unit tests by hand, we can use Mockito library. We can read article about Mockito on Android on Square&rsquo;s blog. Mockito can make our tests cleaner and better. It can be used both in classic Java projects and Android projects. It&rsquo;s one of the most popular mocking framework in Java and if you&rsquo;re a Java developer who writes unit tests and tries to apply TDD approach, you should be familiar with it."><meta property="og:type" content="article"><meta property="og:url" content="https://wittchen.io/posts/mockito-on-android/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-03-15T15:44:00+00:00"><meta property="article:modified_time" content="2015-03-15T15:44:00+00:00"><meta property="og:site_name" content="Piotr Wittchen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mockito on Android"><meta name=twitter:description content="Overview When we write unit tests for an Android application, sometimes there&rsquo;s a necessity to mock some classes or interfaces. Instead of writing implementations dedicated for unit tests by hand, we can use Mockito library. We can read article about Mockito on Android on Square&rsquo;s blog. Mockito can make our tests cleaner and better. It can be used both in classic Java projects and Android projects. It&rsquo;s one of the most popular mocking framework in Java and if you&rsquo;re a Java developer who writes unit tests and tries to apply TDD approach, you should be familiar with it."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wittchen.io/posts/"},{"@type":"ListItem","position":2,"name":"Mockito on Android","item":"https://wittchen.io/posts/mockito-on-android/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Mockito on Android","name":"Mockito on Android","description":"Overview When we write unit tests for an Android application, sometimes there\u0026rsquo;s a necessity to mock some classes or interfaces. Instead of writing implementations dedicated for unit tests by hand, we can use Mockito library. We can read article about Mockito on Android on Square\u0026rsquo;s blog. Mockito can make our tests cleaner and better. It can be used both in classic Java projects and Android projects. It\u0026rsquo;s one of the most popular mocking framework in Java and if you\u0026rsquo;re a Java developer who writes unit tests and tries to apply TDD approach, you should be familiar with it.","keywords":["android","testing"],"articleBody":"Overview When we write unit tests for an Android application, sometimes there’s a necessity to mock some classes or interfaces. Instead of writing implementations dedicated for unit tests by hand, we can use Mockito library. We can read article about Mockito on Android on Square’s blog. Mockito can make our tests cleaner and better. It can be used both in classic Java projects and Android projects. It’s one of the most popular mocking framework in Java and if you’re a Java developer who writes unit tests and tries to apply TDD approach, you should be familiar with it.\nSample configuration When we want to use Mockito on Android, we have to remember to add dependency to dexmaker 1.0 and dexmaker-mockito 1.0. Sample test configuration in build.gradle file can look as follows (I’ve added more comments to clarify optional doubts):\ndependencies { // our project dependencies go here...  androidTestCompile 'com.android.support.test:testing-support-lib:0.1' // Android testing support library  androidTestCompile('com.google.truth:truth:0.25') { // Google's library for assertions (not required by Mockito)  exclude group: 'junit' // Android has JUnit built in  } androidTestCompile 'com.google.dexmaker:dexmaker:1.0' // required by Mockito  androidTestCompile 'com.google.dexmaker:dexmaker-mockito:1.0' // required by Mockito  androidTestCompile 'org.mockito:mockito-core:1.9.5' } We should also add information about tesInstrumentationRunner to build.gradle file when we are using it. When we have problems with running our tests, we should configure packagingOptions properly.\nandroid { defaultConfig { ... testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\" } packagingOptions { exclude 'LICENSE.txt' exclude 'META-INF/LICENSE.txt' } } Remember Quotation from Mockito website:\n Do not mock types you don’t own Don’t mock value objects Don’t mock everything Show love with your tests!  References  Mockito website (includes instructions, examples and documentation) Main reference documentation (with more examples) Mockito on GitHub Mockito on Google Code (please note: Google Code is closing soon!) Mockito on Android (Square’s blog)  ","wordCount":"291","inLanguage":"en","datePublished":"2015-03-15T15:44:00Z","dateModified":"2015-03-15T15:44:00Z","author":{"@type":"Person","name":"Piotr Wittchen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wittchen.io/posts/mockito-on-android/"},"publisher":{"@type":"Organization","name":"Piotr Wittchen","logo":{"@type":"ImageObject","url":"https://wittchen.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wittchen.io/ accesskey=h title="Piotr Wittchen (Alt + H)"><img src=https://wittchen.io/apple-touch-icon.png alt aria-label=logo height=35>Piotr Wittchen</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wittchen.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://wittchen.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://wittchen.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://github.com/pwittchen title=code><span>code</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://wittchen.io/setup/ title=setup><span>setup</span></a></li><li><a href=https://wittchen.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://wittchen.io/contact/ title=contact><span>contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wittchen.io/>Home</a>&nbsp;»&nbsp;<a href=https://wittchen.io/posts/>Posts</a></div><h1 class=post-title>Mockito on Android</h1><div class=post-meta><span title="2015-03-15 15:44:00 +0000 UTC">March 15, 2015</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;291 words&nbsp;·&nbsp;Piotr Wittchen&nbsp;|&nbsp;<a href=https://github.com/pwittchen/wittchen.io/blob/master/content/posts/mockito-on-android.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h2 id=overview>Overview<a hidden class=anchor aria-hidden=true href=#overview>#</a></h2><p>When we write unit tests for an Android application, sometimes there&rsquo;s a necessity to mock some classes or interfaces. Instead of writing implementations dedicated for unit tests by hand, we can use Mockito library. We can read article about <a href=https://corner.squareup.com/2012/10/mockito-android.html>Mockito on Android</a> on <a href=https://corner.squareup.com/>Square&rsquo;s blog</a>. Mockito can make our tests cleaner and better. It can be used both in <em>classic</em> Java projects and Android projects. It&rsquo;s one of the most popular mocking framework in Java and if you&rsquo;re a Java developer who writes unit tests and tries to apply TDD approach, you should be familiar with it.</p><h2 id=sample-configuration>Sample configuration<a hidden class=anchor aria-hidden=true href=#sample-configuration>#</a></h2><p>When we want to use Mockito on Android, we have to remember to add dependency to <code>dexmaker 1.0</code> and <code>dexmaker-mockito 1.0</code>. Sample test configuration in <code>build.gradle</code> file can look as follows (I&rsquo;ve added more comments to clarify optional doubts):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gradle data-lang=gradle><span class=line><span class=cl><span class=n>dependencies</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// our project dependencies go here...
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>androidTestCompile</span> <span class=s1>&#39;com.android.support.test:testing-support-lib:0.1&#39;</span> <span class=c1>// Android testing support library
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>androidTestCompile</span><span class=o>(</span><span class=s1>&#39;com.google.truth:truth:0.25&#39;</span><span class=o>)</span> <span class=o>{</span> <span class=c1>// Google&#39;s library for assertions (not required by Mockito)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>exclude</span> <span class=nl>group:</span> <span class=s1>&#39;junit&#39;</span> <span class=c1>// Android has JUnit built in
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>androidTestCompile</span> <span class=s1>&#39;com.google.dexmaker:dexmaker:1.0&#39;</span> <span class=c1>// required by Mockito
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>androidTestCompile</span> <span class=s1>&#39;com.google.dexmaker:dexmaker-mockito:1.0&#39;</span> <span class=c1>// required by Mockito
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>androidTestCompile</span> <span class=s1>&#39;org.mockito:mockito-core:1.9.5&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>We should also add information about <code>tesInstrumentationRunner</code> to <code>build.gradle</code> file when we are using it. When we have problems with running our tests, we should configure <code>packagingOptions</code> properly.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gradle data-lang=gradle><span class=line><span class=cl><span class=n>android</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>defaultConfig</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=o>...</span>
</span></span><span class=line><span class=cl>        <span class=n>testInstrumentationRunner</span> <span class=s2>&#34;android.support.test.runner.AndroidJUnitRunner&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>packagingOptions</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;LICENSE.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/LICENSE.txt&#39;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=remember>Remember<a hidden class=anchor aria-hidden=true href=#remember>#</a></h2><p>Quotation from <a href=http://mockito.org/>Mockito website</a>:</p><ul><li>Do not mock types you don’t own</li><li>Don’t mock value objects</li><li>Don’t mock everything</li><li>Show love with your tests!</li></ul><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=http://mockito.org/>Mockito website</a> (includes instructions, examples and documentation)</li><li><a href=http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html>Main reference documentation</a> (with more examples)</li><li><a href=https://github.com/mockito/mockito>Mockito on GitHub</a></li><li><a href=https://code.google.com/p/mockito/>Mockito on Google Code</a> (please note: Google Code is closing soon!)</li><li><a href=https://corner.squareup.com/2012/10/mockito-android.html>Mockito on Android</a> (Square&rsquo;s blog)</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://wittchen.io/tags/android/>android</a></li><li><a href=https://wittchen.io/tags/testing/>testing</a></li></ul><nav class=paginav><a class=prev href=https://wittchen.io/posts/the-one-hacker-way/><span class=title>« Prev</span><br><span>The One Hacker Way</span></a>
<a class=next href=https://wittchen.io/posts/introducing-prefser/><span class=title>Next »</span><br><span>Introducing prefser</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://wittchen.io/>Piotr Wittchen</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>