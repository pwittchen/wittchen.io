<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Publishing Python package to PyPi | Piotr Wittchen</title><meta name=keywords content="python"><meta name=description content="Introduction I have my own tiny Python project called spotify-cli-linux, which is (surprise!) command line interface for Spotify desktop app on Linux. Python is not my primary programming language and I work more with Java. Nevertheless, I find this language enjoyable and useful in many cases, so I try to learn something new about it from time to time. In the beginning, I&rsquo;ve provided instructions how to install my Python script in the system via curl and wget, which is fine, but it&rsquo;s not recommended and official way to do it."><meta name=author content="Piotr Wittchen"><link rel=canonical href=https://wittchen.io/posts/publishing-python-package-to-pypi/><link crossorigin=anonymous href=/assets/css/stylesheet.cdcf872f971c70fddc7fd480e8457cd308ed0cf287b498bcdc6183fc6d147858.css integrity="sha256-zc+HL5cccP3cf9SA6EV80wjtDPKHtJi83GGD/G0UeFg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wittchen.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wittchen.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wittchen.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wittchen.io/apple-touch-icon.png><link rel=mask-icon href=https://wittchen.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Publishing Python package to PyPi"><meta property="og:description" content="Introduction I have my own tiny Python project called spotify-cli-linux, which is (surprise!) command line interface for Spotify desktop app on Linux. Python is not my primary programming language and I work more with Java. Nevertheless, I find this language enjoyable and useful in many cases, so I try to learn something new about it from time to time. In the beginning, I&rsquo;ve provided instructions how to install my Python script in the system via curl and wget, which is fine, but it&rsquo;s not recommended and official way to do it."><meta property="og:type" content="article"><meta property="og:url" content="https://wittchen.io/posts/publishing-python-package-to-pypi/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-08T11:47:49+00:00"><meta property="article:modified_time" content="2018-04-08T11:47:49+00:00"><meta property="og:site_name" content="Piotr Wittchen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Publishing Python package to PyPi"><meta name=twitter:description content="Introduction I have my own tiny Python project called spotify-cli-linux, which is (surprise!) command line interface for Spotify desktop app on Linux. Python is not my primary programming language and I work more with Java. Nevertheless, I find this language enjoyable and useful in many cases, so I try to learn something new about it from time to time. In the beginning, I&rsquo;ve provided instructions how to install my Python script in the system via curl and wget, which is fine, but it&rsquo;s not recommended and official way to do it."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wittchen.io/posts/"},{"@type":"ListItem","position":2,"name":"Publishing Python package to PyPi","item":"https://wittchen.io/posts/publishing-python-package-to-pypi/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Publishing Python package to PyPi","name":"Publishing Python package to PyPi","description":"Introduction I have my own tiny Python project called spotify-cli-linux, which is (surprise!) command line interface for Spotify desktop app on Linux. Python is not my primary programming language and I work more with Java. Nevertheless, I find this language enjoyable and useful in many cases, so I try to learn something new about it from time to time. In the beginning, I\u0026rsquo;ve provided instructions how to install my Python script in the system via curl and wget, which is fine, but it\u0026rsquo;s not recommended and official way to do it.","keywords":["python"],"articleBody":"Introduction I have my own tiny Python project called spotify-cli-linux, which is (surprise!) command line interface for Spotify desktop app on Linux. Python is not my primary programming language and I work more with Java. Nevertheless, I find this language enjoyable and useful in many cases, so I try to learn something new about it from time to time. In the beginning, I’ve provided instructions how to install my Python script in the system via curl and wget, which is fine, but it’s not recommended and official way to do it. Moreover, people may be afraid of running shell scripts from remote resources on their machines. That’s why I decided to upload my project to PyPi, which is The Python Package Index.\nPublishing process First, I needed to create my own account in PyPi, which can be done via official website.\nNext, I needed to prepare setup.py file in my repository.\nfrom distutils.core import setup setup( name = 'spotify-cli-linux', version = '1.0.0', description = 'A command-line interface to Spotify on Linux', author = 'pwittchen', author_email = 'piotr.wittchen@gmail.com', url = 'https://github.com/pwittchen/spotify-cli-linux', license = 'Apache 2.0', packages = ['spotifycli'], entry_points = { \"console_scripts\": ['spotifycli = spotifycli.spotifycli:main'] }, ) In this file, I could define a name, which can be used for package installation, url of GitHub repository or project website, packages (in my case I moved my script to separate spotifycli directory, which is treated as a package) and entry_points, which will be used for invoking the script from the command line.\nIn my case, I wanted to achieve such situation:\nWhen people, type: spotifycli in the terminal, they’ll invoke main function from the spotifycli/spotifycli.py file and configuration you see above, does the job.\nI also created setup.cfg file, with the following content:\n[metadata] description-file = README.md where I defined description-file of my script.\nNext, I needed to install twine, which is a package used for publishing packages to PyPi.\npip install twine You can find other ways to do that on the web, but most of them are outdated and don’t work.\nNext, you need to create ~/.pypirc file in your home directory, with the following content:\n[distutils] index-servers = pypi [pypi] username:yourusername password:yourpassword You should put inside the same username and password, which you have used for creating account in https://pypi.org website.\nNow, we’re ready to publish our package!\nWe can go to our repository and type:\npython setup.py sdist After that our package ready to deploy will be generated in dist/ directory.\nNext, we can just type:\ntwine upload dist/* and our package will be uploaded to PyPi!\nThen, we can view PyPi page of our project at: https://pypi.org/project/spotify-cli-linux/\nand install it with the following command:\npip install spotify-cli-linux and we can invoke our script as follows:\nspotifycli -h That’s it! We deployed our script to PyPi!\nOf course, this approach may change depending on your project. E.g. when you are developing a framework or a library, then you probably won’t need any setup for running command line tools, but maybe you’ll need something additional (I haven’t researched this area).\nWhen you’d like to update your project, you just need to update version in setup.py file, generate dist/ directory and upload package again. You can remove uploaded packages from PyPi via the website, but you won’t be able to publish package with the version you have already published before (even if it is removed). You always need to provide new version. It’s good to have it in mind to avoid mess with versioning.\nReferences  https://zaiste.net/posts/how_to_submit_python_package_to_pypi/ https://gehrcke.de/2014/02/distributing-a-python-command-line-application/ https://blog.jetbrains.com/pycharm/2017/05/how-to-publish-your-package-on-pypi/ http://peterdowns.com/posts/first-time-with-pypi.html https://pypi.org/project/twine/ https://pypi.org/ https://pypi.python.org/  ","wordCount":"592","inLanguage":"en","datePublished":"2018-04-08T11:47:49Z","dateModified":"2018-04-08T11:47:49Z","author":{"@type":"Person","name":"Piotr Wittchen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wittchen.io/posts/publishing-python-package-to-pypi/"},"publisher":{"@type":"Organization","name":"Piotr Wittchen","logo":{"@type":"ImageObject","url":"https://wittchen.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wittchen.io/ accesskey=h title="Piotr Wittchen (Alt + H)"><img src=https://wittchen.io/apple-touch-icon.png alt aria-label=logo height=35>Piotr Wittchen</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wittchen.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://wittchen.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://wittchen.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://github.com/pwittchen title=code><span>code</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://wittchen.io/setup/ title=setup><span>setup</span></a></li><li><a href=https://wittchen.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://wittchen.io/contact/ title=contact><span>contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wittchen.io/>Home</a>&nbsp;»&nbsp;<a href=https://wittchen.io/posts/>Posts</a></div><h1 class=post-title>Publishing Python package to PyPi</h1><div class=post-meta><span title="2018-04-08 11:47:49 +0000 UTC">April 8, 2018</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;592 words&nbsp;·&nbsp;Piotr Wittchen&nbsp;|&nbsp;<a href=https://github.com/pwittchen/wittchen.io/blob/master/content/posts/publishing-python-package-to-pypi.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>I have my own tiny Python project called <a href=https://github.com/pwittchen/spotify-cli-linux>spotify-cli-linux</a>, which is (surprise!) command line interface for Spotify desktop app on Linux. Python is not my primary programming language and I work more with Java. Nevertheless, I find this language enjoyable and useful in many cases, so I try to learn something new about it from time to time. In the beginning, I&rsquo;ve provided instructions how to install my Python script in the system via <code>curl</code> and <code>wget</code>, which is fine, but it&rsquo;s not recommended and official way to do it. Moreover, people may be afraid of running shell scripts from remote resources on their machines. That&rsquo;s why I decided to upload my project to <a href=http://pypi.org/>PyPi</a>, which is The Python Package Index.</p><h2 id=publishing-process>Publishing process<a hidden class=anchor aria-hidden=true href=#publishing-process>#</a></h2><p>First, I needed to create <a href=https://pypi.org/user/pwittchen/>my own account</a> in PyPi, which can be done via official website.</p><p>Next, I needed to prepare <code>setup.py</code> file in my repository.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>distutils.core</span> <span class=kn>import</span> <span class=n>setup</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>setup</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;spotify-cli-linux&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>version</span> <span class=o>=</span> <span class=s1>&#39;1.0.0&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span> <span class=o>=</span> <span class=s1>&#39;A command-line interface to Spotify on Linux&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>author</span> <span class=o>=</span> <span class=s1>&#39;pwittchen&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>author_email</span> <span class=o>=</span> <span class=s1>&#39;piotr.wittchen@gmail.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>url</span> <span class=o>=</span> <span class=s1>&#39;https://github.com/pwittchen/spotify-cli-linux&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>license</span> <span class=o>=</span> <span class=s1>&#39;Apache 2.0&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>packages</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;spotifycli&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>entry_points</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=s2>&#34;console_scripts&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;spotifycli = spotifycli.spotifycli:main&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>In this file, I could define a <code>name</code>, which can be used for package installation, <code>url</code> of GitHub repository or project website, <code>packages</code> (in my case I moved my script to separate <code>spotifycli</code> directory, which is treated as a package) and <code>entry_points</code>, which will be used for invoking the script from the command line.</p><p>In my case, I wanted to achieve such situation:</p><p>When people, type: <code>spotifycli</code> in the terminal, they&rsquo;ll invoke <code>main</code> function from the <code>spotifycli/spotifycli.py</code> file and configuration you see above, does the job.</p><p>I also created <code>setup.cfg</code> file, with the following content:</p><pre tabindex=0><code>[metadata]
description-file = README.md
</code></pre><p>where I defined <code>description-file</code> of my script.</p><p>Next, I needed to install <code>twine</code>, which is a package used for publishing packages to PyPi.</p><pre tabindex=0><code>pip install twine
</code></pre><p>You can find other ways to do that on the web, but most of them are outdated and don&rsquo;t work.</p><p>Next, you need to create <code>~/.pypirc</code> file in your home directory, with the following content:</p><pre tabindex=0><code>[distutils]
index-servers =
    pypi
[pypi]
username:yourusername
password:yourpassword
</code></pre><p>You should put inside the same username and password, which you have used for creating account in <a href=https://pypi.org>https://pypi.org</a> website.</p><p>Now, we&rsquo;re ready to publish our package!</p><p>We can go to our repository and type:</p><pre tabindex=0><code>python setup.py sdist
</code></pre><p>After that our package ready to deploy will be generated in <code>dist/</code> directory.</p><p>Next, we can just type:</p><pre tabindex=0><code>twine upload dist/*
</code></pre><p>and our package will be uploaded to <a href=https://pypi.org>PyPi</a>!</p><p>Then, we can view PyPi page of our project at: <a href=https://pypi.org/project/spotify-cli-linux/>https://pypi.org/project/spotify-cli-linux/</a></p><p>and install it with the following command:</p><pre tabindex=0><code>pip install spotify-cli-linux
</code></pre><p>and we can invoke our script as follows:</p><pre tabindex=0><code>spotifycli -h
</code></pre><p>That&rsquo;s it! We deployed our script to PyPi!</p><p>Of course, this approach may change depending on your project. E.g. when you are developing a framework or a library, then you probably won&rsquo;t need any setup for running command line tools, but maybe you&rsquo;ll need something additional (I haven&rsquo;t researched this area).</p><p>When you&rsquo;d like to <strong>update</strong> your project, you just need to update version in <code>setup.py</code> file, generate <code>dist/</code> directory and upload package again. <strong>You can remove uploaded packages from PyPi via the website, but you won&rsquo;t be able to publish package with the version you have already published before (even if it is removed)</strong>. You always need to provide new version. It&rsquo;s good to have it in mind to avoid mess with versioning.</p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://zaiste.net/posts/how_to_submit_python_package_to_pypi/>https://zaiste.net/posts/how_to_submit_python_package_to_pypi/</a></li><li><a href=https://gehrcke.de/2014/02/distributing-a-python-command-line-application/>https://gehrcke.de/2014/02/distributing-a-python-command-line-application/</a></li><li><a href=https://blog.jetbrains.com/pycharm/2017/05/how-to-publish-your-package-on-pypi/>https://blog.jetbrains.com/pycharm/2017/05/how-to-publish-your-package-on-pypi/</a></li><li><a href=http://peterdowns.com/posts/first-time-with-pypi.html>http://peterdowns.com/posts/first-time-with-pypi.html</a></li><li><a href=https://pypi.org/project/twine/>https://pypi.org/project/twine/</a></li><li><a href=https://pypi.org/>https://pypi.org/</a></li><li><a href=https://pypi.python.org/>https://pypi.python.org/</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://wittchen.io/tags/python/>python</a></li></ul><nav class=paginav><a class=prev href=https://wittchen.io/posts/debugging-pixel2/><span class=title>« Prev</span><br><span>Debugging Google Pixel 2</span></a>
<a class=next href=https://wittchen.io/posts/avoiding-merging-master-to-master/><span class=title>Next »</span><br><span>Avoiding merging master to master branch in Git</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://wittchen.io/>Piotr Wittchen</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>