<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Avoiding merging master to master branch in Git | Piotr Wittchen</title><meta name=keywords content="git"><meta name=description content="Problem If you are working with Git Version Control System, probably you have seen a commit messages in your git log like:
Merge branch 'master' to 'master' or something similar. You might have even pushed such commits! Don&rsquo;t worry, so did I ;-). In this article I&rsquo;m going to explain why is it happenning and how to avoid it.
Such situation happens when you performed changes locally and at the same time someone else performed changes on the same branch as well, commited and pushed them to the remote repository."><meta name=author content="Piotr Wittchen"><link rel=canonical href=https://wittchen.io/posts/avoiding-merging-master-to-master/><link crossorigin=anonymous href=/assets/css/stylesheet.cdcf872f971c70fddc7fd480e8457cd308ed0cf287b498bcdc6183fc6d147858.css integrity="sha256-zc+HL5cccP3cf9SA6EV80wjtDPKHtJi83GGD/G0UeFg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wittchen.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wittchen.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wittchen.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wittchen.io/apple-touch-icon.png><link rel=mask-icon href=https://wittchen.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Avoiding merging master to master branch in Git"><meta property="og:description" content="Problem If you are working with Git Version Control System, probably you have seen a commit messages in your git log like:
Merge branch 'master' to 'master' or something similar. You might have even pushed such commits! Don&rsquo;t worry, so did I ;-). In this article I&rsquo;m going to explain why is it happenning and how to avoid it.
Such situation happens when you performed changes locally and at the same time someone else performed changes on the same branch as well, commited and pushed them to the remote repository."><meta property="og:type" content="article"><meta property="og:url" content="https://wittchen.io/posts/avoiding-merging-master-to-master/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-03-25T13:35:06+00:00"><meta property="article:modified_time" content="2018-03-25T13:35:06+00:00"><meta property="og:site_name" content="Piotr Wittchen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Avoiding merging master to master branch in Git"><meta name=twitter:description content="Problem If you are working with Git Version Control System, probably you have seen a commit messages in your git log like:
Merge branch 'master' to 'master' or something similar. You might have even pushed such commits! Don&rsquo;t worry, so did I ;-). In this article I&rsquo;m going to explain why is it happenning and how to avoid it.
Such situation happens when you performed changes locally and at the same time someone else performed changes on the same branch as well, commited and pushed them to the remote repository."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wittchen.io/posts/"},{"@type":"ListItem","position":2,"name":"Avoiding merging master to master branch in Git","item":"https://wittchen.io/posts/avoiding-merging-master-to-master/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Avoiding merging master to master branch in Git","name":"Avoiding merging master to master branch in Git","description":"Problem If you are working with Git Version Control System, probably you have seen a commit messages in your git log like:\nMerge branch \u0026#39;master\u0026#39; to \u0026#39;master\u0026#39; or something similar. You might have even pushed such commits! Don\u0026rsquo;t worry, so did I ;-). In this article I\u0026rsquo;m going to explain why is it happenning and how to avoid it.\nSuch situation happens when you performed changes locally and at the same time someone else performed changes on the same branch as well, commited and pushed them to the remote repository.","keywords":["git"],"articleBody":"Problem If you are working with Git Version Control System, probably you have seen a commit messages in your git log like:\nMerge branch 'master' to 'master' or something similar. You might have even pushed such commits! Don’t worry, so did I ;-). In this article I’m going to explain why is it happenning and how to avoid it.\nSuch situation happens when you performed changes locally and at the same time someone else performed changes on the same branch as well, commited and pushed them to the remote repository. When you are done with your changes, you committed everything and want to push changes. If there are no conflicts, Git wants you to synchronize local repository with the remote repository. That’s why you need to merge changes from the remote master branch into your local master branch. After that you can finally push your changes.\nIt’s shown on the diagram below.\nanother developer ------o---(commit)---o------------------------------------------ /|\\ | | | pull push | | | \\|/ remote 'master' ----o---o--------------o------x-----------------o-------------o--- | /|\\ | /|\\ | | | | pull push (rejected) pull push | | | | \\|/ | \\|/ | you ----------------o-------(commit)----------o-----------------o---(merge)---o---- Actually, there’s nothing wrong with it, but on the other hand you have “polluted” git log. Imagine everyone is following that approach and your code base changes frequently. After some period of time, you’ll get a tons of merge 'master' to 'master' messages, which doesn’t really tell you anything. It will be hard to navigate through the history of the repository and track changes. Luckily, we can avoid that.\nSolution #1 What to do, when Git wants you to merge remote master branch into local master branch? I think there may be various strategies to deal with that. I’m going to show you one approach\n1. Move your last commit into staging area git reset --soft HEAD~1 Now, you removed your last commit, but you have your changes uncommited in staging area.\n2. Move your changes from staging to unstaged area git reset HEAD -- . Now, you have your changes uncommited and unstaged.\n3. Stash your changes git stash Now, our changes are stashed. We can list them as follows:\ngit stash list To show what’s in the most recent stash, we can type:\ngit stash show -p To view an arbitrary stash, we can type something like:\ngit stash show -p stash@{1} 4. Pull changes from the remote repository git pull 5. Apply stashed changes git stash apply or\ngit stash pop if we want to delete our applied stash from the list of stashes\n6. Commit and push your changes git add -A git commit -m \"my elegant change\" git push Now, we have our local repository synchronized with the remote one. We pushed our local changes and we didn’t polluted git log with merge 'master' to 'master' commits. If you are not very comfortable with Git, try to practice this in a “test” repo before applying this approach in your production repo.\nSolution #2 I’ve got a feedback about this article from one of the readers (Thanks Cyprian! ;-) and there’s a simpler way to solve that problem.\nWe can use rebase functionality as follows:\ngit fetch origin Now we have fetched changes from the origin (remote repo) without applying (merging) them in the local repo. Next, we can rebase our changes:\ngit rebase origin/master During this operation, we have put changes from the remote repository into our local repository without merge operations. Moreover, we preserved our local (not pushed) commits. Now, we can push our changes to the remote repository:\ngit push and we’re done!\nI hope, this article will help to keep your git log clean.\nAs you see, I’m open for any kind of constructive feedback about these articles, so you can send me e-mails. Probably, I’ll add commenting functionality back to this blog, so feedback will be easier.\n","wordCount":"647","inLanguage":"en","datePublished":"2018-03-25T13:35:06Z","dateModified":"2018-03-25T13:35:06Z","author":{"@type":"Person","name":"Piotr Wittchen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wittchen.io/posts/avoiding-merging-master-to-master/"},"publisher":{"@type":"Organization","name":"Piotr Wittchen","logo":{"@type":"ImageObject","url":"https://wittchen.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wittchen.io/ accesskey=h title="Piotr Wittchen (Alt + H)">Piotr Wittchen</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wittchen.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://wittchen.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://wittchen.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://wittchen.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://wittchen.io/contact/ title=contact><span>contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wittchen.io/>Home</a>&nbsp;»&nbsp;<a href=https://wittchen.io/posts/>Posts</a></div><h1 class=post-title>Avoiding merging master to master branch in Git</h1><div class=post-meta><span title="2018-03-25 13:35:06 +0000 UTC">March 25, 2018</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;647 words&nbsp;·&nbsp;Piotr Wittchen&nbsp;|&nbsp;<a href=https://github.com/pwittchen/wittchen.io/blob/master/content/posts/avoiding-merging-master-to-master.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h2 id=problem>Problem<a hidden class=anchor aria-hidden=true href=#problem>#</a></h2><p>If you are working with Git Version Control System, probably you have seen a commit messages in your git log like:</p><pre tabindex=0><code>Merge branch &#39;master&#39; to &#39;master&#39;
</code></pre><p>or something similar. You might have even pushed such commits! Don&rsquo;t worry, so did I ;-).
In this article I&rsquo;m going to explain why is it happenning and how to avoid it.</p><p>Such situation happens when you performed changes locally and at the same time someone else performed changes on the same branch as well, commited and pushed them to the remote repository. When you are done with your changes, you committed everything and want to push changes. If there are no conflicts, Git wants you to synchronize local repository with the remote repository. That&rsquo;s why you need to merge changes from the remote master branch into your local master branch. After that you can finally push your changes.</p><p>It&rsquo;s shown on the diagram below.</p><pre tabindex=0><code>another developer ------o---(commit)---o------------------------------------------
                       /|\             |
                        |              |
                       pull          push
                        |              |
                        |             \|/
remote &#39;master&#39; ----o---o--------------o------x-----------------o-------------o---
                    |                        /|\                |            /|\
                    |                         |                 |             |
                   pull                      push (rejected)   pull          push
                    |                         |                 |             |
                   \|/                        |                \|/            |
you ----------------o-------(commit)----------o-----------------o---(merge)---o----
</code></pre><p>Actually, there&rsquo;s nothing wrong with it, but on the other hand you have &ldquo;polluted&rdquo; git log. Imagine everyone is following that approach and your code base changes frequently. After some period of time, you&rsquo;ll get a tons of <code>merge 'master' to 'master'</code> messages, which doesn&rsquo;t really tell you anything. It will be hard to navigate through the history of the repository and track changes. Luckily, we can avoid that.</p><h2 id=solution-1>Solution #1<a hidden class=anchor aria-hidden=true href=#solution-1>#</a></h2><p>What to do, when Git wants you to merge remote <code>master</code> branch into local <code>master</code> branch?
I think there may be various strategies to deal with that. I&rsquo;m going to show you one approach</p><h3 id=1-move-your-last-commit-into-staging-area>1. Move your last commit into staging area<a hidden class=anchor aria-hidden=true href=#1-move-your-last-commit-into-staging-area>#</a></h3><pre tabindex=0><code>git reset --soft HEAD~1
</code></pre><p>Now, you removed your last commit, but you have your changes uncommited in staging area.</p><h3 id=2-move-your-changes-from-staging-to-unstaged-area>2. Move your changes from staging to unstaged area<a hidden class=anchor aria-hidden=true href=#2-move-your-changes-from-staging-to-unstaged-area>#</a></h3><pre tabindex=0><code>git reset HEAD -- .
</code></pre><p>Now, you have your changes uncommited and unstaged.</p><h3 id=3-stash-your-changes>3. Stash your changes<a hidden class=anchor aria-hidden=true href=#3-stash-your-changes>#</a></h3><pre tabindex=0><code>git stash
</code></pre><p>Now, our changes are stashed. We can list them as follows:</p><pre tabindex=0><code>git stash list
</code></pre><p>To show what&rsquo;s in the most recent stash, we can type:</p><pre tabindex=0><code>git stash show -p
</code></pre><p>To view an arbitrary stash, we can type something like:</p><pre tabindex=0><code>git stash show -p stash@{1}
</code></pre><h3 id=4-pull-changes-from-the-remote-repository>4. Pull changes from the remote repository<a hidden class=anchor aria-hidden=true href=#4-pull-changes-from-the-remote-repository>#</a></h3><pre tabindex=0><code>git pull
</code></pre><h3 id=5-apply-stashed-changes>5. Apply stashed changes<a hidden class=anchor aria-hidden=true href=#5-apply-stashed-changes>#</a></h3><pre tabindex=0><code>git stash apply
</code></pre><p>or</p><pre tabindex=0><code>git stash pop
</code></pre><p>if we want to delete our applied stash from the list of stashes</p><h3 id=6-commit-and-push-your-changes>6. Commit and push your changes<a hidden class=anchor aria-hidden=true href=#6-commit-and-push-your-changes>#</a></h3><pre tabindex=0><code>git add -A
git commit -m &#34;my elegant change&#34;
git push
</code></pre><p>Now, we have our local repository synchronized with the remote one. We pushed our local changes and we didn&rsquo;t polluted git log with <code>merge 'master' to 'master'</code> commits. If you are not very comfortable with Git, try to practice this in a &ldquo;test&rdquo; repo before applying this approach in your production repo.</p><h2 id=solution-2>Solution #2<a hidden class=anchor aria-hidden=true href=#solution-2>#</a></h2><p>I&rsquo;ve got a feedback about this article from one of the readers (Thanks Cyprian! ;-) and there&rsquo;s a simpler way to solve that problem.</p><p>We can use <code>rebase</code> functionality as follows:</p><pre tabindex=0><code>git fetch origin
</code></pre><p>Now we have fetched changes from the <code>origin</code> (remote repo) without applying (merging) them in the local repo.
Next, we can rebase our changes:</p><pre tabindex=0><code>git rebase origin/master
</code></pre><p>During this operation, we have put changes from the remote repository into our local repository without merge operations. Moreover, we preserved our local (not pushed) commits.
Now, we can push our changes to the remote repository:</p><pre tabindex=0><code>git push
</code></pre><p>and we&rsquo;re done!</p><p>I hope, this article will help to keep your git log clean.</p><p>As you see, I&rsquo;m open for any kind of constructive feedback about these articles, so you can send me e-mails. Probably, I&rsquo;ll add commenting functionality back to this blog, so feedback will be easier.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wittchen.io/tags/git/>git</a></li></ul><nav class=paginav><a class=prev href=https://wittchen.io/posts/publishing-python-package-to-pypi/><span class=title>« Prev</span><br><span>Publishing Python package to PyPi</span></a>
<a class=next href=https://wittchen.io/posts/deployment-of-the-java-code-to-aws-lambda/><span class=title>Next »</span><br><span>Deployment of the Java code to AWS Lambda</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://wittchen.io/>Piotr Wittchen</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>