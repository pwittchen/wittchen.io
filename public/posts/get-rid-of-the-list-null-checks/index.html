<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Get rid of the list null-checks | Piotr Wittchen</title><meta name=keywords content="java"><meta name=description content="During development of the legacy Java applications, we still have to deal with null. It&rsquo;s possible to avoid it completly when we&rsquo;re designing application from the scratch, applying proper code constructions, static code analysis and we&rsquo;re consistent during code reviews. Nevertheless in majority of the cases we will encounter null in daily projects. We may even expect them in the method inputs and we have to be prepared for it. With the functional programming in Java we can deal with them in quite elegant way, but I often see people are not using features available nowadays."><meta name=author content="Piotr Wittchen"><link rel=canonical href=https://wittchen.io/posts/get-rid-of-the-list-null-checks/><link crossorigin=anonymous href=/assets/css/stylesheet.cdcf872f971c70fddc7fd480e8457cd308ed0cf287b498bcdc6183fc6d147858.css integrity="sha256-zc+HL5cccP3cf9SA6EV80wjtDPKHtJi83GGD/G0UeFg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wittchen.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wittchen.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wittchen.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wittchen.io/apple-touch-icon.png><link rel=mask-icon href=https://wittchen.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Get rid of the list null-checks"><meta property="og:description" content="During development of the legacy Java applications, we still have to deal with null. It&rsquo;s possible to avoid it completly when we&rsquo;re designing application from the scratch, applying proper code constructions, static code analysis and we&rsquo;re consistent during code reviews. Nevertheless in majority of the cases we will encounter null in daily projects. We may even expect them in the method inputs and we have to be prepared for it. With the functional programming in Java we can deal with them in quite elegant way, but I often see people are not using features available nowadays."><meta property="og:type" content="article"><meta property="og:url" content="https://wittchen.io/posts/get-rid-of-the-list-null-checks/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-07-28T23:18:43+00:00"><meta property="article:modified_time" content="2019-07-28T23:18:43+00:00"><meta property="og:site_name" content="Piotr Wittchen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Get rid of the list null-checks"><meta name=twitter:description content="During development of the legacy Java applications, we still have to deal with null. It&rsquo;s possible to avoid it completly when we&rsquo;re designing application from the scratch, applying proper code constructions, static code analysis and we&rsquo;re consistent during code reviews. Nevertheless in majority of the cases we will encounter null in daily projects. We may even expect them in the method inputs and we have to be prepared for it. With the functional programming in Java we can deal with them in quite elegant way, but I often see people are not using features available nowadays."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wittchen.io/posts/"},{"@type":"ListItem","position":2,"name":"Get rid of the list null-checks","item":"https://wittchen.io/posts/get-rid-of-the-list-null-checks/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Get rid of the list null-checks","name":"Get rid of the list null-checks","description":"During development of the legacy Java applications, we still have to deal with null. It\u0026rsquo;s possible to avoid it completly when we\u0026rsquo;re designing application from the scratch, applying proper code constructions, static code analysis and we\u0026rsquo;re consistent during code reviews. Nevertheless in majority of the cases we will encounter null in daily projects. We may even expect them in the method inputs and we have to be prepared for it. With the functional programming in Java we can deal with them in quite elegant way, but I often see people are not using features available nowadays.","keywords":["java"],"articleBody":"During development of the legacy Java applications, we still have to deal with null. It’s possible to avoid it completly when we’re designing application from the scratch, applying proper code constructions, static code analysis and we’re consistent during code reviews. Nevertheless in majority of the cases we will encounter null in daily projects. We may even expect them in the method inputs and we have to be prepared for it. With the functional programming in Java we can deal with them in quite elegant way, but I often see people are not using features available nowadays.\nLet’s have a look at the following code snippet:\nprivate ListMyType getList(final ListMyType list) { if (list != null || list.isEmpty()) { return Collections.emptyList(); } return list .stream() .filter(...) .collect(Collectors.toList()); } In this example list can be null, so we have to perform null-check. We can also verify if the list is not empty once we’re sure it’s not null and return empty collection in that case. If the condition is not met, we’re converting list to the stream and start processing it.\nWe can use CollectionUtils from Apache Commons library to perform exactly the same check if we have it in our project dependencies:\nprivate ListMyType getList(final ListMyType list) { if (CollectionUtils.isEmpty(list)) { return Collections.emptyList(); } return list .stream() .filter(...) .collect(Collectors.toList()); } We can try to figure out, how to achieve the same goal with functional programming concepts in Java and write the same logic within the single, fluent stream. We can call Optional.ofNullable(...) method because we know that our method argument can be null. Next, once we’ve got an Optional type, we can call .orElseGet(...) method and provide an object, which we want to return, when nullable value will be null. In this case, it will be an empty list. After that, we can fluently proceed with the stream processing.\nprivate ListMyType getList(final ListMyType list) { return Optional .ofNullable(list) .orElseGet(Collections::emptyList) .stream() .filter(...) .collect(Collectors.toList()); } Code snippet above looks much more elegant, it’s shorter, more concise and we have achieved our goal within a single stream without any additional if statements and without breaking chain of method invocations.\n","wordCount":"355","inLanguage":"en","datePublished":"2019-07-28T23:18:43Z","dateModified":"2019-07-28T23:18:43Z","author":{"@type":"Person","name":"Piotr Wittchen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wittchen.io/posts/get-rid-of-the-list-null-checks/"},"publisher":{"@type":"Organization","name":"Piotr Wittchen","logo":{"@type":"ImageObject","url":"https://wittchen.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wittchen.io/ accesskey=h title="Piotr Wittchen (Alt + H)">Piotr Wittchen</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wittchen.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://wittchen.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://wittchen.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://wittchen.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://wittchen.io/contact/ title=contact><span>contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wittchen.io/>Home</a>&nbsp;»&nbsp;<a href=https://wittchen.io/posts/>Posts</a></div><h1 class=post-title>Get rid of the list null-checks</h1><div class=post-meta><span title="2019-07-28 23:18:43 +0000 UTC">July 28, 2019</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;355 words&nbsp;·&nbsp;Piotr Wittchen&nbsp;|&nbsp;<a href=https://github.com/pwittchen/wittchen.io/blob/master/content/posts/get-rid-of-the-list-null-checks.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>During development of the legacy Java applications, we still have to deal with <code>null</code>. It&rsquo;s possible to avoid it completly when we&rsquo;re designing application from the scratch, applying proper code constructions, static code analysis and we&rsquo;re consistent during code reviews. Nevertheless in majority of the cases we will encounter <code>null</code> in daily projects. We may even expect them in the method inputs and we have to be prepared for it. With the functional programming in Java we can deal with them in quite elegant way, but I often see people are not using features available nowadays.</p><p>Let&rsquo;s have a look at the following code snippet:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>MyType</span><span class=o>&gt;</span> <span class=nf>getList</span><span class=o>(</span><span class=kd>final</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>MyType</span><span class=o>&gt;</span> <span class=n>list</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>list</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>||</span> <span class=n>list</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Collections</span><span class=o>.</span><span class=na>emptyList</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>list</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>filter</span><span class=o>(...)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>In this example <code>list</code> can be <code>null</code>, so we have to perform null-check. We can also verify if the <code>list</code> is not empty once we&rsquo;re sure it&rsquo;s not <code>null</code> and return empty collection in that case. If the condition is not met, we&rsquo;re converting list to the stream and start processing it.</p><p>We can use <code>CollectionUtils</code> from Apache Commons library to perform exactly the same check if we have it in our project dependencies:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>MyType</span><span class=o>&gt;</span> <span class=nf>getList</span><span class=o>(</span><span class=kd>final</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>MyType</span><span class=o>&gt;</span> <span class=n>list</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>CollectionUtils</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>(</span><span class=n>list</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Collections</span><span class=o>.</span><span class=na>emptyList</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>list</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>filter</span><span class=o>(...)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>We can try to figure out, how to achieve the same goal with functional programming concepts in Java and write the same logic within the single, fluent stream. We can call <code>Optional.ofNullable(...)</code> method because we know that our method argument can be <code>null</code>. Next, once we&rsquo;ve got an <code>Optional</code> type, we can call <code>.orElseGet(...)</code> method and provide an object, which we want to return, when <code>nullable</code> value will be <code>null</code>. In this case, it will be an empty list. After that, we can fluently proceed with the stream processing.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>MyType</span><span class=o>&gt;</span> <span class=nf>getList</span><span class=o>(</span><span class=kd>final</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>MyType</span><span class=o>&gt;</span> <span class=n>list</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>list</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>orElseGet</span><span class=o>(</span><span class=n>Collections</span><span class=o>::</span><span class=n>emptyList</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>filter</span><span class=o>(...)</span>
</span></span><span class=line><span class=cl>            <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toList</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Code snippet above looks much more elegant, it&rsquo;s shorter, more concise and we have achieved our goal within a single stream without any additional <code>if</code> statements and without breaking chain of method invocations.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wittchen.io/tags/java/>java</a></li></ul><nav class=paginav><a class=prev href=https://wittchen.io/posts/modifying-methods-input-parameters/><span class=title>« Prev</span><br><span>Modifying mehtod's input parameters</span></a>
<a class=next href=https://wittchen.io/posts/arch-install-notes-gui-and-utils/><span class=title>Next »</span><br><span>Arch Linux - installation notes no. 2 (GUI and utils)</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://wittchen.io/>Piotr Wittchen</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>