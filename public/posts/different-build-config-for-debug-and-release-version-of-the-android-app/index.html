<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Different build config for debug and release version of the Android app | Piotr Wittchen</title>
<meta name=keywords content="android,gradle"><meta name=description content="Sometimes we may want to set different address of the back-end web service for debuggable and release version of our Android app. E.g. predefined static host and port for release version of the application and our local IP address and predefined port for debuggable version of the application. In second case, we can deploy back-end webservice on our local machine for testing purposes. We can customize all of that in build.gradle file. We can use variant.buildType.isDebuggable() instruction to check build type of the app. I described way of Updating Android XML resources before compilation via Gradle in one of my previous posts, so you can check it if you don&rsquo;t understand replaceBackendAddressInResources(variant, host, port) method. After proper configuration, setting of the back-end url is straightforward. Please check the code between // configuration of the back-end address - begin and // configuration of the back-end address - end comments."><meta name=author content="Piotr Wittchen"><link rel=canonical href=https://wittchen.io/posts/different-build-config-for-debug-and-release-version-of-the-android-app/><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://wittchen.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wittchen.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wittchen.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wittchen.io/apple-touch-icon.png><link rel=mask-icon href=https://wittchen.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://wittchen.io/posts/different-build-config-for-debug-and-release-version-of-the-android-app/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://wittchen.io/posts/different-build-config-for-debug-and-release-version-of-the-android-app/"><meta property="og:site_name" content="Piotr Wittchen"><meta property="og:title" content="Different build config for debug and release version of the Android app"><meta property="og:description" content="Sometimes we may want to set different address of the back-end web service for debuggable and release version of our Android app. E.g. predefined static host and port for release version of the application and our local IP address and predefined port for debuggable version of the application. In second case, we can deploy back-end webservice on our local machine for testing purposes. We can customize all of that in build.gradle file. We can use variant.buildType.isDebuggable() instruction to check build type of the app. I described way of Updating Android XML resources before compilation via Gradle in one of my previous posts, so you can check it if you don’t understand replaceBackendAddressInResources(variant, host, port) method. After proper configuration, setting of the back-end url is straightforward. Please check the code between // configuration of the back-end address - begin and // configuration of the back-end address - end comments."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-10-08T17:52:00+00:00"><meta property="article:modified_time" content="2014-10-08T17:52:00+00:00"><meta property="article:tag" content="Android"><meta property="article:tag" content="Gradle"><meta name=twitter:card content="summary"><meta name=twitter:title content="Different build config for debug and release version of the Android app"><meta name=twitter:description content="Sometimes we may want to set different address of the back-end web service for debuggable and release version of our Android app. E.g. predefined static host and port for release version of the application and our local IP address and predefined port for debuggable version of the application. In second case, we can deploy back-end webservice on our local machine for testing purposes. We can customize all of that in build.gradle file. We can use variant.buildType.isDebuggable() instruction to check build type of the app. I described way of Updating Android XML resources before compilation via Gradle in one of my previous posts, so you can check it if you don&rsquo;t understand replaceBackendAddressInResources(variant, host, port) method. After proper configuration, setting of the back-end url is straightforward. Please check the code between // configuration of the back-end address - begin and // configuration of the back-end address - end comments."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wittchen.io/posts/"},{"@type":"ListItem","position":2,"name":"Different build config for debug and release version of the Android app","item":"https://wittchen.io/posts/different-build-config-for-debug-and-release-version-of-the-android-app/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Different build config for debug and release version of the Android app","name":"Different build config for debug and release version of the Android app","description":"Sometimes we may want to set different address of the back-end web service for debuggable and release version of our Android app. E.g. predefined static host and port for release version of the application and our local IP address and predefined port for debuggable version of the application. In second case, we can deploy back-end webservice on our local machine for testing purposes. We can customize all of that in build.gradle file. We can use variant.buildType.isDebuggable() instruction to check build type of the app. I described way of Updating Android XML resources before compilation via Gradle in one of my previous posts, so you can check it if you don\u0026rsquo;t understand replaceBackendAddressInResources(variant, host, port) method. After proper configuration, setting of the back-end url is straightforward. Please check the code between // configuration of the back-end address - begin and // configuration of the back-end address - end comments.\n","keywords":["android","gradle"],"articleBody":"Sometimes we may want to set different address of the back-end web service for debuggable and release version of our Android app. E.g. predefined static host and port for release version of the application and our local IP address and predefined port for debuggable version of the application. In second case, we can deploy back-end webservice on our local machine for testing purposes. We can customize all of that in build.gradle file. We can use variant.buildType.isDebuggable() instruction to check build type of the app. I described way of Updating Android XML resources before compilation via Gradle in one of my previous posts, so you can check it if you don’t understand replaceBackendAddressInResources(variant, host, port) method. After proper configuration, setting of the back-end url is straightforward. Please check the code between // configuration of the back-end address - begin and // configuration of the back-end address - end comments.\nimport java.text.SimpleDateFormat apply plugin: 'com.android.application' android { compileSdkVersion 20 buildToolsVersion '20.0.0' compileOptions { sourceCompatibility JavaVersion.VERSION_1_7 targetCompatibility JavaVersion.VERSION_1_7 } lintOptions { abortOnError false disable 'MissingTranslation' } defaultConfig { applicationId \"com.android.app\" minSdkVersion 15 targetSdkVersion 19 versionCode 1 versionName gitSha() + '-' + buildTime() testInstrumentationRunner \"com.google.android.apps.common.testing.testrunner.GoogleInstrumentationTestRunner\" } buildTypes { release { runProguard false proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' signingConfig signingConfigs.releaseConfig } } // configuration of the back-end address - begin applicationVariants.all { variant -\u003e variant.mergeResources.doLast { if(variant.buildType.isDebuggable()) { replaceBackendAddressInResources(variant, obtainLocalIpAddress(), \"8443\") } else { replaceBackendAddressInResources(variant, \"PUT YOUR PRODUCTION SERVER ADRESS HERE\", \"PRODUCTION PORT\") } } } // configuration of the back-end address - end packagingOptions { exclude 'META-INF/DEPENDENCIES.txt' exclude 'META-INF/LICENSE.txt' exclude 'LICENSE.txt' exclude 'META-INF/NOTICE.txt' exclude 'META-INF/NOTICE' exclude 'META-INF/LICENSE' exclude 'META-INF/DEPENDENCIES' exclude 'META-INF/notice.txt' exclude 'META-INF/license.txt' exclude 'META-INF/dependencies.txt' exclude 'META-INF/LGPL2.1' exclude 'ASL-2.0.txt' exclude 'LGPL-3.0.txt' exclude 'META-INF/ASL-2.0.txt' exclude 'META-INF/LGPL-3.0.txt' exclude 'META-INF/services/javax.annotation.processing.Processor' } } dependencies { compile fileTree(dir: 'libs', include: ['*.jar']) } def replaceBackendAddressInResources(variant, host, port) { // replace the #const_backend_url# with your specific ip address def protocol = \"https://\" def backendAddress = protocol + host + \":\" + port + \"/\" File valuesFile = file(\"${buildDir}/intermediates/res/${variant.dirName}/values/values.xml\") if (valuesFile.exists()) { String content = valuesFile.getText('UTF-8') content = content.replaceAll(\"#const_backend_url#\", backendAddress) valuesFile.write(content, 'UTF-8') println(\"Replacing #const_backend_url# with \" + backendAddress + \" in file: \" + valuesFile.name) } else { println(\"File: \" + valuesFile.path + \" does not exist\") } } def obtainLocalIpAddress() { InetAddress inetAddress = InetAddress.getLocalHost(); byte[] address = inetAddress.getAddress(); String ipAddress = \"\"; for (int i = 0; i \u003c address.length; i++) { if (i \u003e 0) { ipAddress += \".\"; } ipAddress += address[i] \u0026 0xFF; } ipAddress } def buildTime() { def df = new SimpleDateFormat(\"yyyyMMddHHmmss\") df.setTimeZone(TimeZone.getTimeZone(\"Europe/Warsaw\")) return df.format(new Date()) } def gitSha() { return 'git rev-parse --short HEAD'.execute().text.trim() } Now, you can create release and debug version of the app with different addresses of the web service what is very useful during the process of development and deployment of the project. We can use this trick also for setting different parameters depending on our needs.\n","wordCount":"475","inLanguage":"en","datePublished":"2014-10-08T17:52:00Z","dateModified":"2014-10-08T17:52:00Z","author":{"@type":"Person","name":"Piotr Wittchen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wittchen.io/posts/different-build-config-for-debug-and-release-version-of-the-android-app/"},"publisher":{"@type":"Organization","name":"Piotr Wittchen","logo":{"@type":"ImageObject","url":"https://wittchen.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wittchen.io/ accesskey=h title="Piotr Wittchen (Alt + H)">Piotr Wittchen</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wittchen.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://wittchen.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://wittchen.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://wittchen.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://wittchen.io/contact/ title=contact><span>contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wittchen.io/>Home</a>&nbsp;»&nbsp;<a href=https://wittchen.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Different build config for debug and release version of the Android app</h1><div class=post-meta><span title='2014-10-08 17:52:00 +0000 UTC'>October 8, 2014</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;475 words&nbsp;·&nbsp;Piotr Wittchen&nbsp;|&nbsp;<a href=https://github.com/pwittchen/wittchen.io/blob/master/content/posts/different-build-config-for-debug-and-release-version-of-the-android-app.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>Sometimes we may want to set different address of the back-end web service for debuggable and release version of our Android app. E.g. predefined static host and port for release version of the application and our local IP address and predefined port for debuggable version of the application. In second case, we can deploy back-end webservice on our local machine for testing purposes. We can customize all of that in build.gradle file. We can use <code>variant.buildType.isDebuggable()</code> instruction to check build type of the app. I described way of <a href=http://blog.wittchen.biz.pl/updating-android-xml-resources-dynamically-before-compilation-via-gradle/>Updating Android XML resources before compilation via Gradle</a> in <a href=http://blog.wittchen.biz.pl/updating-android-xml-resources-dynamically-before-compilation-via-gradle/>one of my previous posts</a>, so you can check it if you don&rsquo;t understand <code>replaceBackendAddressInResources(variant, host, port)</code> method. After proper configuration, setting of the back-end url is straightforward. Please check the code between <code>// configuration of the back-end address - begin</code> and <code>// configuration of the back-end address - end</code> comments.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gradle data-lang=gradle><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.text.SimpleDateFormat</span>
</span></span><span class=line><span class=cl><span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;com.android.application&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>android</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>compileSdkVersion</span> <span class=mi>20</span>
</span></span><span class=line><span class=cl>    <span class=n>buildToolsVersion</span> <span class=s1>&#39;20.0.0&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>compileOptions</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>sourceCompatibility</span> <span class=n>JavaVersion</span><span class=o>.</span><span class=na>VERSION_1_7</span>
</span></span><span class=line><span class=cl>        <span class=n>targetCompatibility</span> <span class=n>JavaVersion</span><span class=o>.</span><span class=na>VERSION_1_7</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>lintOptions</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>abortOnError</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>        <span class=n>disable</span> <span class=s1>&#39;MissingTranslation&#39;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>defaultConfig</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>applicationId</span> <span class=s2>&#34;com.android.app&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>minSdkVersion</span> <span class=mi>15</span>
</span></span><span class=line><span class=cl>        <span class=n>targetSdkVersion</span> <span class=mi>19</span>
</span></span><span class=line><span class=cl>        <span class=n>versionCode</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=n>versionName</span> <span class=nf>gitSha</span><span class=o>()</span> <span class=o>+</span> <span class=s1>&#39;-&#39;</span> <span class=o>+</span> <span class=n>buildTime</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=n>testInstrumentationRunner</span> <span class=s2>&#34;com.google.android.apps.common.testing.testrunner.GoogleInstrumentationTestRunner&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>buildTypes</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>release</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>runProguard</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>            <span class=n>proguardFiles</span> <span class=nf>getDefaultProguardFile</span><span class=o>(</span><span class=s1>&#39;proguard-android.txt&#39;</span><span class=o>),</span> <span class=s1>&#39;proguard-rules.pro&#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>signingConfig</span> <span class=n>signingConfigs</span><span class=o>.</span><span class=na>releaseConfig</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// configuration of the back-end address - begin
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>applicationVariants</span><span class=o>.</span><span class=na>all</span> <span class=o>{</span> <span class=n>variant</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>        <span class=n>variant</span><span class=o>.</span><span class=na>mergeResources</span><span class=o>.</span><span class=na>doLast</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=o>(</span><span class=n>variant</span><span class=o>.</span><span class=na>buildType</span><span class=o>.</span><span class=na>isDebuggable</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>replaceBackendAddressInResources</span><span class=o>(</span><span class=n>variant</span><span class=o>,</span> <span class=n>obtainLocalIpAddress</span><span class=o>(),</span> <span class=s2>&#34;8443&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>replaceBackendAddressInResources</span><span class=o>(</span><span class=n>variant</span><span class=o>,</span> <span class=s2>&#34;PUT YOUR PRODUCTION SERVER ADRESS HERE&#34;</span><span class=o>,</span> <span class=s2>&#34;PRODUCTION PORT&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// configuration of the back-end address - end
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>packagingOptions</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/DEPENDENCIES.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/LICENSE.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;LICENSE.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/NOTICE.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/NOTICE&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/LICENSE&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/DEPENDENCIES&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/notice.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/license.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/dependencies.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/LGPL2.1&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;ASL-2.0.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;LGPL-3.0.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/ASL-2.0.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/LGPL-3.0.txt&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>exclude</span> <span class=s1>&#39;META-INF/services/javax.annotation.processing.Processor&#39;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>dependencies</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>compile</span> <span class=nf>fileTree</span><span class=o>(</span><span class=nl>dir:</span> <span class=s1>&#39;libs&#39;</span><span class=o>,</span> <span class=nl>include:</span> <span class=o>[</span><span class=s1>&#39;*.jar&#39;</span><span class=o>])</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>def</span> <span class=nf>replaceBackendAddressInResources</span><span class=o>(</span><span class=n>variant</span><span class=o>,</span> <span class=n>host</span><span class=o>,</span> <span class=n>port</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// replace the #const_backend_url# with your specific ip address
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>def</span> <span class=n>protocol</span> <span class=o>=</span> <span class=s2>&#34;https://&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=n>backendAddress</span> <span class=o>=</span> <span class=n>protocol</span> <span class=o>+</span> <span class=n>host</span> <span class=o>+</span> <span class=s2>&#34;:&#34;</span> <span class=o>+</span> <span class=n>port</span> <span class=o>+</span> <span class=s2>&#34;/&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>File</span> <span class=n>valuesFile</span> <span class=o>=</span> <span class=n>file</span><span class=o>(</span><span class=s2>&#34;${buildDir}/intermediates/res/${variant.dirName}/values/values.xml&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>valuesFile</span><span class=o>.</span><span class=na>exists</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>String</span> <span class=n>content</span> <span class=o>=</span> <span class=n>valuesFile</span><span class=o>.</span><span class=na>getText</span><span class=o>(</span><span class=s1>&#39;UTF-8&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=n>content</span> <span class=o>=</span> <span class=n>content</span><span class=o>.</span><span class=na>replaceAll</span><span class=o>(</span><span class=s2>&#34;#const_backend_url#&#34;</span><span class=o>,</span> <span class=n>backendAddress</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=n>valuesFile</span><span class=o>.</span><span class=na>write</span><span class=o>(</span><span class=n>content</span><span class=o>,</span> <span class=s1>&#39;UTF-8&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=n>println</span><span class=o>(</span><span class=s2>&#34;Replacing #const_backend_url# with &#34;</span> <span class=o>+</span> <span class=n>backendAddress</span> <span class=o>+</span> <span class=s2>&#34; in file: &#34;</span> <span class=o>+</span> <span class=n>valuesFile</span><span class=o>.</span><span class=na>name</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>println</span><span class=o>(</span><span class=s2>&#34;File: &#34;</span> <span class=o>+</span> <span class=n>valuesFile</span><span class=o>.</span><span class=na>path</span> <span class=o>+</span> <span class=s2>&#34; does not exist&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>def</span> <span class=nf>obtainLocalIpAddress</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>InetAddress</span> <span class=n>inetAddress</span> <span class=o>=</span> <span class=n>InetAddress</span><span class=o>.</span><span class=na>getLocalHost</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=kt>byte</span><span class=o>[]</span> <span class=n>address</span> <span class=o>=</span> <span class=n>inetAddress</span><span class=o>.</span><span class=na>getAddress</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>ipAddress</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>address</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>ipAddress</span> <span class=o>+=</span> <span class=s2>&#34;.&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>ipAddress</span> <span class=o>+=</span> <span class=n>address</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>&amp;</span> <span class=mh>0xFF</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>ipAddress</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>def</span> <span class=nf>buildTime</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>def</span> <span class=n>df</span> <span class=o>=</span> <span class=k>new</span> <span class=n>SimpleDateFormat</span><span class=o>(</span><span class=s2>&#34;yyyyMMddHHmmss&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=n>df</span><span class=o>.</span><span class=na>setTimeZone</span><span class=o>(</span><span class=n>TimeZone</span><span class=o>.</span><span class=na>getTimeZone</span><span class=o>(</span><span class=s2>&#34;Europe/Warsaw&#34;</span><span class=o>))</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>df</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=k>new</span> <span class=n>Date</span><span class=o>())</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>def</span> <span class=nf>gitSha</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;git rev-parse --short HEAD&#39;</span><span class=o>.</span><span class=na>execute</span><span class=o>().</span><span class=na>text</span><span class=o>.</span><span class=na>trim</span><span class=o>()</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Now, you can create release and debug version of the app with different addresses of the web service what is very useful during the process of development and deployment of the project. We can use this trick also for setting different parameters depending on our needs.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wittchen.io/tags/android/>Android</a></li><li><a href=https://wittchen.io/tags/gradle/>Gradle</a></li></ul><nav class=paginav><a class=prev href=https://wittchen.io/posts/the-future-of-programming/><span class=title>« Prev</span><br><span>The future of programming</span>
</a><a class=next href=https://wittchen.io/posts/weather-icons-for-android-applications/><span class=title>Next »</span><br><span>Weather Icons for Android applications</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://wittchen.io/>Piotr Wittchen</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>