<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Basic usage of YaaS as a proxy for the microservice | Piotr Wittchen</title><meta name=keywords content><meta name=description content="Introduction The company, where I currently work - SAP Hybris is developing a project called YaaS, which is an abbreviation of Hybris as a Service. Unfortunately, this article is not sponsored yet :). What a pity :(. I just like to understand many things & how they work to see the bigger picture. Moreover, company strategy is to leverage YaaS and search for the new possibilities and use cases of this project."><meta name=author content="Piotr Wittchen"><link rel=canonical href=https://wittchen.io/posts/yaas-as-a-proxy-for-microservice/><link crossorigin=anonymous href=/assets/css/stylesheet.cdcf872f971c70fddc7fd480e8457cd308ed0cf287b498bcdc6183fc6d147858.css integrity="sha256-zc+HL5cccP3cf9SA6EV80wjtDPKHtJi83GGD/G0UeFg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wittchen.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wittchen.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wittchen.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wittchen.io/apple-touch-icon.png><link rel=mask-icon href=https://wittchen.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Basic usage of YaaS as a proxy for the microservice"><meta property="og:description" content="Introduction The company, where I currently work - SAP Hybris is developing a project called YaaS, which is an abbreviation of Hybris as a Service. Unfortunately, this article is not sponsored yet :). What a pity :(. I just like to understand many things & how they work to see the bigger picture. Moreover, company strategy is to leverage YaaS and search for the new possibilities and use cases of this project."><meta property="og:type" content="article"><meta property="og:url" content="https://wittchen.io/posts/yaas-as-a-proxy-for-microservice/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-04-30T22:45:00+00:00"><meta property="article:modified_time" content="2017-04-30T22:45:00+00:00"><meta property="og:site_name" content="Piotr Wittchen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Basic usage of YaaS as a proxy for the microservice"><meta name=twitter:description content="Introduction The company, where I currently work - SAP Hybris is developing a project called YaaS, which is an abbreviation of Hybris as a Service. Unfortunately, this article is not sponsored yet :). What a pity :(. I just like to understand many things & how they work to see the bigger picture. Moreover, company strategy is to leverage YaaS and search for the new possibilities and use cases of this project."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wittchen.io/posts/"},{"@type":"ListItem","position":2,"name":"Basic usage of YaaS as a proxy for the microservice","item":"https://wittchen.io/posts/yaas-as-a-proxy-for-microservice/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Basic usage of YaaS as a proxy for the microservice","name":"Basic usage of YaaS as a proxy for the microservice","description":"Introduction The company, where I currently work - SAP Hybris is developing a project called YaaS, which is an abbreviation of Hybris as a Service. Unfortunately, this article is not sponsored yet :). What a pity :(. I just like to understand many things \u0026amp; how they work to see the bigger picture. Moreover, company strategy is to leverage YaaS and search for the new possibilities and use cases of this project.","keywords":[],"articleBody":"Introduction The company, where I currently work - SAP Hybris is developing a project called YaaS, which is an abbreviation of Hybris as a Service. Unfortunately, this article is not sponsored yet :). What a pity :(. I just like to understand many things \u0026 how they work to see the bigger picture. Moreover, company strategy is to leverage YaaS and search for the new possibilities and use cases of this project. There are situations where delegating some work to a separate service makes sense so this knowledge may be useful even when we’re developing the monolithic enterprise applications. That’s why I wrote this article. I work in a completely different project - Enterprise Commerce Platform, where I’m the part of the Backoffice team. As you can read on the official website, YaaS is a microservices ecosystem helping businesses to rapidly augment and build new, highly flexible solutions. It’s kind of marketing statement, which business people may like. Nevertheless, for developers, it’s just a bunch of buzzwords, which does not help you to understand this project. One of the aims of this article is to explain it in a simple and clear way.  From the technical point of view, YaaS gives you the following possibilities:\n it can be a proxy for your microservice, which can be deployed anywhere it gives you separate proxy servers for EU and US, which you can use depending on the server or user location it provides you a domain like api.eu.yaas.io/yourorganization/yourservice/ it provides secured connection it gives a mechanism, which allows you to secure endpoints of your microservice via dynamically generated token it gives you the possibility to manage access to your service for advanced use cases with features like clients, roles, etc. it gives you monitoring possibilities it allows you to perform versioning of your API it allows you to integrate other services/packages from YaaS Market with your service it gives you web interface called YaaS Builder, which you can use for managing your projects and organization  YaaS is NOT:\n the hosting platform like Heroku or AWS - you need to have another place where you can deploy your service (like Heroku or whatever) the part of the Core Hybris Platform - it’s completely separate project, but it can be integrated with the Hybris Platform  The official website of the project is: www.yaas.io. In this article, I won’t explain all the features of YaaS. I will simply show you:\n how to create a simple proxy for your microservice how to secure endpoint of your microservice how to access secured endpoint of your microservice  Maybe I’ll explain more features in the separate articles in the future.\nCreating a simple proxy for the microservice We need to do the following steps:\n Go to https://builder.yaas.io Create an account \u0026 log in Create an organization Create a project Within the project create a service Provide address to your service Provide API version (e.g. v1) Deploy service Right now, your service is deployed, but not accessible yet Create a Client and assign it to your service Now you should be able to access your service at: https://api.eu.yaas.io/orgranization/service/v1  Below you can see a screenshot from service configuration inside the YaaS Builder.\nSecuring the endpoint of the microservice We have created our service. Now, we want to secure its endpoint. To do so, we can create Authorization Rule from the Service configuration inside YaaS Builder.\nWe can define methods of the HTTP request, endpoint address, and other parameters. When we’re done, we can proceed to more tricky part. Authorization procedure of the microservice endpoint is presented in the scheme below.\nFirst, we need to obtain Bearer ID. To do so, we need to perform HTTP request with Client ID and Client Secret. We can do it from terminal via curl:\ncurl -X POST -i -H \"Content-Type: application/x-www-form-urlencoded\" -d \"grant_type=client_credentials\u0026client_id=YOUR_CLIENT_ID\u0026client_secret=YOUR_CLIENT_SECRET\" https://api.eu.yaas.io/hybris/oauth2/v1/token Then, we’ll receive a response like that:\n{\"token_type\":\"Bearer\",\"access_token\":\"023-018f03da-cdb7-4710-a4cf-70f89e23003f\",\"expires_in\":3600,\"scope\":\"hybris.tenant=pwtest\"} and we can make an authorized call to our microservice:\ncurl -X POST -i -H \"Authorization: Bearer 023-018f03da-cdb7-4710-a4cf-70f89e23003f\" -H \"Content-Type: application/json\" -d \"\" https://api.eu.yaas.io/pwittchen/test/v1/endpoint after that, we should receive a response from the microservice. Note, that Bearer ID will be valid for the particular amount of time. Hint #1: To make calls more readable in the article, I split them into lines. If you’re making a real call it’s better to have whole instruction in a single line. Hint #2: You can get Client Secret and Client ID from the YaaS Builder while editing your Client.\nSummary As we could see, creating a microservice proxy and securing the endpoint is not so complicated, but it’s not straightforward as well. It requires some knowledge about YaaS and its design. Using this approach won’t be a good idea every time, but I think there are use cases when it can be useful. Especially, when we care about monitoring \u0026 security and when we want to have unified \u0026 controlled access to our services. Here are a few of my ideas of delegating work to the microservice from the monolithic enterprise commerce application:\n file or image storage backups of the data classification of the products - e.g. we can delegate images to the external service, which will use machine learning and neural networks to classify products by colors or by something else long running operations \u0026 queues - e.g. we can delegate such things to the separate microservice to relieve CPU \u0026 Memory of the server, where core system is running and simply receive push notification with final result of the operation from the microservice when the work is done sending e-mails and other types of notifications and more… (if you have your own ideas - share them in comments!)  I think the basic idea could be the distribution of computations to the different servers, what may extend capabilities of the core system, make it faster, lighter and more stable. In addition, it should make work of developers easier and more joyful because they could work on the smaller parts of the system, which have a clearly specified goal and smaller codebase, which is easier to manage.\n","wordCount":"1011","inLanguage":"en","datePublished":"2017-04-30T22:45:00Z","dateModified":"2017-04-30T22:45:00Z","author":{"@type":"Person","name":"Piotr Wittchen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wittchen.io/posts/yaas-as-a-proxy-for-microservice/"},"publisher":{"@type":"Organization","name":"Piotr Wittchen","logo":{"@type":"ImageObject","url":"https://wittchen.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wittchen.io/ accesskey=h title="Piotr Wittchen (Alt + H)"><img src=https://wittchen.io/apple-touch-icon.png alt aria-label=logo height=35>Piotr Wittchen</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wittchen.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://wittchen.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://wittchen.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://github.com/pwittchen title=code><span>code</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://wittchen.io/setup/ title=setup><span>setup</span></a></li><li><a href=https://wittchen.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://wittchen.io/contact/ title=contact><span>contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wittchen.io/>Home</a>&nbsp;»&nbsp;<a href=https://wittchen.io/posts/>Posts</a></div><h1 class=post-title>Basic usage of YaaS as a proxy for the microservice</h1><div class=post-meta><span title="2017-04-30 22:45:00 +0000 UTC">April 30, 2017</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;1011 words&nbsp;·&nbsp;Piotr Wittchen&nbsp;|&nbsp;<a href=https://github.com/pwittchen/wittchen.io/blob/master/content/posts/yaas-as-a-proxy-for-microservice.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>The company, where I currently work - <a href=http://hybris.com>SAP Hybris</a> is developing a project called <a href=https://www.yaas.io/>YaaS</a>, which is an abbreviation of Hybris as a Service. Unfortunately, this article is not sponsored yet :). What a pity :(. I just like to understand many things & how they work to see the bigger picture. Moreover, company strategy is to leverage YaaS and search for the new possibilities and use cases of this project. There are situations where delegating some work to a separate service makes sense so this knowledge may be useful even when we&rsquo;re developing the monolithic enterprise applications. That&rsquo;s why I wrote this article. I work in a completely different project - Enterprise Commerce Platform, where I&rsquo;m the part of the Backoffice team. As you can read on the official website, <em>YaaS is a microservices ecosystem helping businesses to rapidly augment and build new, highly flexible solutions</em>. It&rsquo;s kind of marketing statement, which business people may like. Nevertheless, for developers, it&rsquo;s just a bunch of buzzwords, which does not help you to understand this project. One of the aims of this article is to explain it in a simple and clear way. <a href=http://yaas.io><img loading=lazy src=/posts/2017/yaas-as-a-proxy-for-microservice/yaas_header.jpg alt="yaas - hybris as a service"></a> From <strong>the technical point of view</strong>, YaaS gives you the following possibilities:</p><ul><li>it can be a proxy for your microservice, which can be deployed anywhere</li><li>it gives you separate proxy servers for EU and US, which you can use depending on the server or user location</li><li>it provides you a domain like <code>api.eu.yaas.io/yourorganization/yourservice/</code></li><li>it provides secured connection</li><li>it gives a mechanism, which allows you to secure endpoints of your microservice via dynamically generated token</li><li>it gives you the possibility to manage access to your service for advanced use cases with features like clients, roles, etc.</li><li>it gives you monitoring possibilities</li><li>it allows you to perform versioning of your API</li><li>it allows you to integrate other services/packages from <a href=https://market.yaas.io/>YaaS Market</a> with your service</li><li>it gives you web interface called <a href=https://builder.yaas.io/>YaaS Builder</a>, which you can use for managing your projects and organization</li></ul><p>YaaS <strong>is NOT</strong>:</p><ul><li>the hosting platform like Heroku or AWS - you need to have another place where you can deploy your service (like Heroku or whatever)</li><li>the part of the Core Hybris Platform - it&rsquo;s completely separate project, but it can be integrated with the Hybris Platform</li></ul><p>The official website of the project is: <a href=https://www.yaas.io/>www.yaas.io</a>. In this article, I won&rsquo;t explain all the features of YaaS. I will simply show you:</p><ul><li>how to create a simple proxy for your microservice</li><li>how to secure endpoint of your microservice</li><li>how to access secured endpoint of your microservice</li></ul><p>Maybe I&rsquo;ll explain more features in the separate articles in the future.</p><h2 id=creating-a-simple-proxy-for-the-microservice>Creating a simple proxy for the microservice<a hidden class=anchor aria-hidden=true href=#creating-a-simple-proxy-for-the-microservice>#</a></h2><p>We need to do the following steps:</p><ol><li>Go to <a href=https://builder.yaas.io>https://builder.yaas.io</a></li><li>Create an account & log in</li><li>Create an organization</li><li>Create a project</li><li>Within the project create a service</li><li>Provide address to your service</li><li>Provide API version (e.g. <code>v1</code>)</li><li>Deploy service</li><li>Right now, your service is deployed, but not accessible yet</li><li>Create a Client and assign it to your service</li><li>Now you should be able to access your service at: <code>https://api.eu.yaas.io/orgranization/service/v1</code></li></ol><p>Below you can see a screenshot from service configuration inside the YaaS Builder.</p><p><img loading=lazy src=/posts/2017/yaas-as-a-proxy-for-microservice/yass_builder_service.png alt></p><h2 id=securing-the-endpoint-of-the-microservice>Securing the endpoint of the microservice<a hidden class=anchor aria-hidden=true href=#securing-the-endpoint-of-the-microservice>#</a></h2><p>We have created our service. Now, we want to secure its endpoint. To do so, we can create Authorization Rule from the Service configuration inside YaaS Builder.</p><p><img loading=lazy src=/posts/2017/yaas-as-a-proxy-for-microservice/yaas_builder_rule.png alt></p><p>We can define methods of the HTTP request, endpoint address, and other parameters. When we&rsquo;re done, we can proceed to more tricky part. Authorization procedure of the microservice endpoint is presented in the scheme below.</p><p><img loading=lazy src=/posts/2017/yaas-as-a-proxy-for-microservice/calling_yaas_microservice_diagram.png alt="calling microservice with authorization via YaaS proxy"></p><p>First, we need to obtain Bearer ID. To do so, we need to perform HTTP request with Client ID and Client Secret. We can do it from terminal via curl:</p><pre tabindex=0><code>curl -X POST -i
-H &#34;Content-Type: application/x-www-form-urlencoded&#34;
-d &#34;grant_type=client_credentials&amp;client_id=YOUR_CLIENT_ID&amp;client_secret=YOUR_CLIENT_SECRET&#34;
https://api.eu.yaas.io/hybris/oauth2/v1/token
</code></pre><p>Then, we&rsquo;ll receive a response like that:</p><pre tabindex=0><code>{&#34;token_type&#34;:&#34;Bearer&#34;,&#34;access_token&#34;:&#34;023-018f03da-cdb7-4710-a4cf-70f89e23003f&#34;,&#34;expires_in&#34;:3600,&#34;scope&#34;:&#34;hybris.tenant=pwtest&#34;}
</code></pre><p>and we can make an authorized call to our microservice:</p><pre tabindex=0><code>curl -X POST -i
-H &#34;Authorization: Bearer 023-018f03da-cdb7-4710-a4cf-70f89e23003f&#34;
-H &#34;Content-Type: application/json&#34;
-d &#34;&#34;
https://api.eu.yaas.io/pwittchen/test/v1/endpoint
</code></pre><p>after that, we should receive a response from the microservice. Note, that Bearer ID will be valid for the particular amount of time. <strong>Hint #1</strong>: To make calls more readable in the article, I split them into lines. If you&rsquo;re making a real call it&rsquo;s better to have whole instruction in <strong>a single line</strong>. <strong>Hint #2</strong>: You can get Client Secret and Client ID from the YaaS Builder while editing your Client.</p><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>As we could see, creating a microservice proxy and securing the endpoint is not so complicated, but it&rsquo;s not straightforward as well. It requires some knowledge about YaaS and its design. Using this approach won&rsquo;t be a good idea every time, but I think there are use cases when it can be useful. Especially, when we care about monitoring & security and when we want to have unified & controlled access to our services. Here are a few of my ideas of delegating work to the microservice from the monolithic enterprise commerce application:</p><ul><li>file or image storage</li><li>backups of the data</li><li>classification of the products - e.g. we can delegate images to the external service, which will use machine learning and neural networks to classify products by colors or by something else</li><li>long running operations & queues - e.g. we can delegate such things to the separate microservice to relieve CPU & Memory of the server, where core system is running and simply receive push notification with final result of the operation from the microservice when the work is done</li><li>sending e-mails and other types of notifications</li><li>and more&mldr; (if you have your own ideas - share them in comments!)</li></ul><p>I think the basic idea could be the distribution of computations to the different servers, what may extend capabilities of the core system, make it faster, lighter and more stable. In addition, it should make work of developers easier and more joyful because they could work on the smaller parts of the system, which have a clearly specified goal and smaller codebase, which is easier to manage.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://wittchen.io/posts/monitoring-usage-of-oss/><span class=title>« Prev</span><br><span>Monitoring usage of open-source projects</span></a>
<a class=next href=https://wittchen.io/posts/facebook-is-making-bci/><span class=title>Next »</span><br><span>Facebook is making solutions to talk from the brain – so do I</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://wittchen.io/>Piotr Wittchen</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>