<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Automate boring stuff | Piotr Wittchen</title><meta name=keywords content="git,python"><meta name=description content="Introduction In my current company all the people who perform creative work (mostly programmers) need to prepare so-called PKUP report. PKUP stands for Podwyższone Koszty Uzyskania Przychodu in the Polish language. It&rsquo;s legal regulation in Poland, which allows paying a lower income tax due to the particular type of work. For the regular employee, it means that he or she will simply get a bit higher salary per month.
How the report looks in practice?"><meta name=author content="Piotr Wittchen"><link rel=canonical href=https://wittchen.io/posts/automate-boring-stuff/><link crossorigin=anonymous href=/assets/css/stylesheet.cdcf872f971c70fddc7fd480e8457cd308ed0cf287b498bcdc6183fc6d147858.css integrity="sha256-zc+HL5cccP3cf9SA6EV80wjtDPKHtJi83GGD/G0UeFg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wittchen.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wittchen.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wittchen.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wittchen.io/apple-touch-icon.png><link rel=mask-icon href=https://wittchen.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Automate boring stuff"><meta property="og:description" content="Introduction In my current company all the people who perform creative work (mostly programmers) need to prepare so-called PKUP report. PKUP stands for Podwyższone Koszty Uzyskania Przychodu in the Polish language. It&rsquo;s legal regulation in Poland, which allows paying a lower income tax due to the particular type of work. For the regular employee, it means that he or she will simply get a bit higher salary per month.
How the report looks in practice?"><meta property="og:type" content="article"><meta property="og:url" content="https://wittchen.io/posts/automate-boring-stuff/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-01-01T11:10:00+00:00"><meta property="article:modified_time" content="2017-01-01T11:10:00+00:00"><meta property="og:site_name" content="Piotr Wittchen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Automate boring stuff"><meta name=twitter:description content="Introduction In my current company all the people who perform creative work (mostly programmers) need to prepare so-called PKUP report. PKUP stands for Podwyższone Koszty Uzyskania Przychodu in the Polish language. It&rsquo;s legal regulation in Poland, which allows paying a lower income tax due to the particular type of work. For the regular employee, it means that he or she will simply get a bit higher salary per month.
How the report looks in practice?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wittchen.io/posts/"},{"@type":"ListItem","position":2,"name":"Automate boring stuff","item":"https://wittchen.io/posts/automate-boring-stuff/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Automate boring stuff","name":"Automate boring stuff","description":"Introduction In my current company all the people who perform creative work (mostly programmers) need to prepare so-called PKUP report. PKUP stands for Podwyższone Koszty Uzyskania Przychodu in the Polish language. It\u0026rsquo;s legal regulation in Poland, which allows paying a lower income tax due to the particular type of work. For the regular employee, it means that he or she will simply get a bit higher salary per month.\nHow the report looks in practice?","keywords":["git","python"],"articleBody":"Introduction In my current company all the people who perform creative work (mostly programmers) need to prepare so-called PKUP report. PKUP stands for Podwyższone Koszty Uzyskania Przychodu in the Polish language. It’s legal regulation in Poland, which allows paying a lower income tax due to the particular type of work. For the regular employee, it means that he or she will simply get a bit higher salary per month.\nHow the report looks in practice? As a programmer, I simply create software as a source code. Added, removed and modified lines of code in the existing codebase are treated as my creative work. Luckily, we use Git so I can generate *.diff files from the Git repositories I’m contributing to. Besides that, I need to prepare document as a *.docx file with a short description of my work. My tasks look different every month, but report actually looks almost the same every month. Preparing this report is boring and repeatable stuff.\nLet’s automate it! Generating *.diff files from Git repos I simply created a shell script, which goes through predefined project directories and saves *.diff files with names the same as project directory with changes performed by me from the 20th day of the last month until now.\nGenerating *.docx document Next, I created a python script, which is parametrized and used by shell script. It uses python-docx library for generating *.docx report. I’ve chosen such option, because it’s one of the simplest solutions I’ve found and it’s lightweight. Moreover it can be easily used on Unix systems and integrated with shell scripts.\nPersonalization I wanted to make a script available and usable for everyone, so I created .pkup.conf file, which is responsible for personalization and configuration of the script. I think, it looks pretty straightforward.\nyDEV_PROJECTS_DIR=$yHYBRIS_SRC yDEV_PROJECTS_LIST=(backoffice platform-backoffice cockpitng backofficesearch pcm pcmbackoffice cockpit cockpit-core) yDEV_REPORT_DIR=~/Documents/hybris/pkup/raporty/doc/ yDEV_NAME=\"Your name\" yDEV_SURNAME=\"Your surname\" yDEV_ROLE=\"Software Developer\" yDEV_DEPARTMENT=\"P\u0026I\" yDEV_MANAGER=\"Your manager name and surname\" Installation and uninstallation I also created installation script, which allows to start using the scripts faster. Installation script install dependencies for python script, copies shell script and python script into /usr/local/bin/ directory and .pkup.conf file into home directory. Configuration file needs to be adjusted by the user manually after installtion. Of course, there’s another script, which can be used for uninstallation.\nTests There are python tests for this solution in pkup_doc_test.py file, but they’re quite poor right now due to the limited amount of time. They can be a subject of improvements in the future. Note that such scripting solutions rarely have tests because they’re small and created ad-hoc. Nevertheless, I wanted to follow the philosophy from my last blog article and create tests for any kind of software I make.\nSummary I’ve spent some time for preparing this stuff, but it was fun and I think it should save me and hopefully my co-workers some amount of time during creating reports every month. In the future, it can be improved by automatic generation of report messages and sending data to the server.\nTo sum up, preparing reports manually is boring. Generating reports automatically is exciting!\nComplete solution described in this article with documentation is available on GitHub: https://github.com/pwittchen/pkup.\n","wordCount":"527","inLanguage":"en","datePublished":"2017-01-01T11:10:00Z","dateModified":"2017-01-01T11:10:00Z","author":{"@type":"Person","name":"Piotr Wittchen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wittchen.io/posts/automate-boring-stuff/"},"publisher":{"@type":"Organization","name":"Piotr Wittchen","logo":{"@type":"ImageObject","url":"https://wittchen.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wittchen.io/ accesskey=h title="Piotr Wittchen (Alt + H)"><img src=https://wittchen.io/apple-touch-icon.png alt aria-label=logo height=35>Piotr Wittchen</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wittchen.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://wittchen.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://wittchen.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://wittchen.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://wittchen.io/contact/ title=contact><span>contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wittchen.io/>Home</a>&nbsp;»&nbsp;<a href=https://wittchen.io/posts/>Posts</a></div><h1 class=post-title>Automate boring stuff</h1><div class=post-meta><span title="2017-01-01 11:10:00 +0000 UTC">January 1, 2017</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;527 words&nbsp;·&nbsp;Piotr Wittchen&nbsp;|&nbsp;<a href=https://github.com/pwittchen/wittchen.io/blob/master/content/posts/automate-boring-stuff.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>In my current company all the people who perform creative work (mostly programmers) need to prepare so-called PKUP report. PKUP stands for <em>Podwyższone Koszty Uzyskania Przychodu</em> in the Polish language. It&rsquo;s legal regulation in Poland, which allows paying a lower income tax due to the particular type of work. For the regular employee, it means that he or she will simply get a bit higher salary per month.</p><h2 id=how-the-report-looks-in-practice>How the report looks in practice?<a hidden class=anchor aria-hidden=true href=#how-the-report-looks-in-practice>#</a></h2><p>As a programmer, I simply create software as a source code. Added, removed and modified lines of code in the existing codebase are treated as my creative work. Luckily, we use Git so I can generate <code>*.diff</code> files from the Git repositories I&rsquo;m contributing to. Besides that, I need to prepare document as a <code>*.docx</code> file with a short description of my work. My tasks look different every month, but <strong>report actually looks almost the same every month</strong>. Preparing this report is boring and repeatable stuff.</p><h2 id=lets-automate-it>Let&rsquo;s automate it!<a hidden class=anchor aria-hidden=true href=#lets-automate-it>#</a></h2><h3 id=generating-diff-files-from-git-repos>Generating <code>*.diff</code> files from Git repos<a hidden class=anchor aria-hidden=true href=#generating-diff-files-from-git-repos>#</a></h3><p>I simply created a <a href=https://github.com/pwittchen/pkup/blob/master/pkup>shell script</a>, which goes through predefined project directories and saves <code>*.diff</code> files with names the same as project directory with changes performed by me from the 20th day of the last month until now.</p><h3 id=generating-docx-document>Generating <code>*.docx</code> document<a hidden class=anchor aria-hidden=true href=#generating-docx-document>#</a></h3><p>Next, I created a <a href=https://github.com/pwittchen/pkup/blob/master/pkup_doc.py>python script</a>, which is parametrized and used by shell script. It uses <a href=https://python-docx.readthedocs.io/en/latest/>python-docx</a> library for generating <code>*.docx</code> report. I&rsquo;ve chosen such option, because it&rsquo;s one of the simplest solutions I&rsquo;ve found and it&rsquo;s lightweight. Moreover it can be easily used on Unix systems and integrated with shell scripts.</p><h2 id=personalization>Personalization<a hidden class=anchor aria-hidden=true href=#personalization>#</a></h2><p>I wanted to make a script available and usable for everyone, so I created <a href=https://github.com/pwittchen/pkup/blob/master/.pkup.conf>.pkup.conf</a> file, which is responsible for personalization and configuration of the script. I think, it looks pretty straightforward.</p><pre tabindex=0><code>yDEV_PROJECTS_DIR=$yHYBRIS_SRC
yDEV_PROJECTS_LIST=(backoffice platform-backoffice cockpitng backofficesearch pcm pcmbackoffice cockpit cockpit-core)
yDEV_REPORT_DIR=~/Documents/hybris/pkup/raporty/doc/
yDEV_NAME=&#34;Your name&#34;
yDEV_SURNAME=&#34;Your surname&#34;
yDEV_ROLE=&#34;Software Developer&#34;
yDEV_DEPARTMENT=&#34;P&amp;I&#34;
yDEV_MANAGER=&#34;Your manager name and surname&#34;
</code></pre><h2 id=installation-and-uninstallation>Installation and uninstallation<a hidden class=anchor aria-hidden=true href=#installation-and-uninstallation>#</a></h2><p>I also created <a href=https://github.com/pwittchen/pkup/blob/master/install.sh>installation script</a>, which allows to start using the scripts faster. Installation script install dependencies for python script, copies shell script and python script into <code>/usr/local/bin/</code> directory and <code>.pkup.conf</code> file into home directory. Configuration file needs to be adjusted by the user manually after installtion. Of course, there&rsquo;s another script, which can be used for <a href=https://github.com/pwittchen/pkup/blob/master/uninstall.sh>uninstallation</a>.</p><h2 id=tests>Tests<a hidden class=anchor aria-hidden=true href=#tests>#</a></h2><p>There are python tests for this solution in <a href=https://github.com/pwittchen/pkup/blob/master/pkup_doc_test.py>pkup_doc_test.py</a> file, but they&rsquo;re quite poor right now due to the limited amount of time. They can be a subject of improvements in the future. Note that such scripting solutions rarely have tests because they&rsquo;re small and created ad-hoc. Nevertheless, I wanted to follow the philosophy from <a href=/2016/11/30/lifting-quality-of-a-shell-script/>my last blog article</a> and create tests for any kind of software I make.</p><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>I&rsquo;ve spent some time for preparing this stuff, but it was fun and I think it should save me and hopefully my co-workers some amount of time during creating reports every month. In the future, it can be improved by automatic generation of report messages and sending data to the server.</p><p>To sum up, <strong>preparing reports manually is boring</strong>. <strong>Generating reports automatically is exciting</strong>!</p><p>Complete solution described in this article with documentation is available on GitHub:
<a href=https://github.com/pwittchen/pkup><strong>https://github.com/pwittchen/pkup</strong></a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wittchen.io/tags/git/>git</a></li><li><a href=https://wittchen.io/tags/python/>python</a></li></ul><nav class=paginav><a class=prev href=https://wittchen.io/posts/one-year-of-using-macbook-pro-as-a-software-developer/><span class=title>« Prev</span><br><span>One year of using Macbook Pro at work as a software developer</span></a>
<a class=next href=https://wittchen.io/posts/lifting-quality-of-a-shell-script/><span class=title>Next »</span><br><span>Lifting quality of a shell script</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://wittchen.io/>Piotr Wittchen</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>