<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Simple reactive HTTP client and server with RxJava, Vert.x and Android | Piotr Wittchen</title><meta name=keywords content="android,java,rxjava"><meta name=description content="During Hack Your Career event at the Silesian University of Technology, I&rsquo;ve prepared a presentation titled Reactive Programming - Efficient Server Applications with a colleague from work. Arek told about theory of Reactive Programming, shown basic concepts, data types and a few examples in the code. During my part of the presentation, I&rsquo;ve wrote a very simple server and client in Java (9 on the server, 7 on the client) with Vert."><meta name=author content="Piotr Wittchen"><link rel=canonical href=https://wittchen.io/posts/simple-reactive-http-client-and-server-with-rxjava-vertx-and-android/><link crossorigin=anonymous href=/assets/css/stylesheet.cdcf872f971c70fddc7fd480e8457cd308ed0cf287b498bcdc6183fc6d147858.css integrity="sha256-zc+HL5cccP3cf9SA6EV80wjtDPKHtJi83GGD/G0UeFg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wittchen.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wittchen.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wittchen.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wittchen.io/apple-touch-icon.png><link rel=mask-icon href=https://wittchen.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Simple reactive HTTP client and server with RxJava, Vert.x and Android"><meta property="og:description" content="During Hack Your Career event at the Silesian University of Technology, I&rsquo;ve prepared a presentation titled Reactive Programming - Efficient Server Applications with a colleague from work. Arek told about theory of Reactive Programming, shown basic concepts, data types and a few examples in the code. During my part of the presentation, I&rsquo;ve wrote a very simple server and client in Java (9 on the server, 7 on the client) with Vert."><meta property="og:type" content="article"><meta property="og:url" content="https://wittchen.io/posts/simple-reactive-http-client-and-server-with-rxjava-vertx-and-android/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-11-09T22:30:00+00:00"><meta property="article:modified_time" content="2017-11-09T22:30:00+00:00"><meta property="og:site_name" content="Piotr Wittchen"><meta name=twitter:card content="summary"><meta name=twitter:title content="Simple reactive HTTP client and server with RxJava, Vert.x and Android"><meta name=twitter:description content="During Hack Your Career event at the Silesian University of Technology, I&rsquo;ve prepared a presentation titled Reactive Programming - Efficient Server Applications with a colleague from work. Arek told about theory of Reactive Programming, shown basic concepts, data types and a few examples in the code. During my part of the presentation, I&rsquo;ve wrote a very simple server and client in Java (9 on the server, 7 on the client) with Vert."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wittchen.io/posts/"},{"@type":"ListItem","position":2,"name":"Simple reactive HTTP client and server with RxJava, Vert.x and Android","item":"https://wittchen.io/posts/simple-reactive-http-client-and-server-with-rxjava-vertx-and-android/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Simple reactive HTTP client and server with RxJava, Vert.x and Android","name":"Simple reactive HTTP client and server with RxJava, Vert.x and Android","description":"During Hack Your Career event at the Silesian University of Technology, I\u0026rsquo;ve prepared a presentation titled Reactive Programming - Efficient Server Applications with a colleague from work. Arek told about theory of Reactive Programming, shown basic concepts, data types and a few examples in the code. During my part of the presentation, I\u0026rsquo;ve wrote a very simple server and client in Java (9 on the server, 7 on the client) with Vert.","keywords":["android","java","rxjava"],"articleBody":"During Hack Your Career event at the Silesian University of Technology, I’ve prepared a presentation titled Reactive Programming - Efficient Server Applications with a colleague from work. Arek told about theory of Reactive Programming, shown basic concepts, data types and a few examples in the code. During my part of the presentation, I’ve wrote a very simple server and client in Java (9 on the server, 7 on the client) with Vert.x (Core and Rx), RxJava 2, OkHttp 3, Android and RxAndroid. Presentation was targeted mainly to the university students with no experience with reactive programming, but it was an open event and anyone could attend it. Below, we can see a very simple code snippet showing how to create a reactive HTTP server with Vert.x. We can create a stream of requests, make Flowable out of it, apply any kind of RxJava 2 operator including backpressure handling and subscribe the stream. Moreover, we can also reactively start the server with rxListen(int port) method. This is just a basic example, where will be sending request to the only one endpoint. In the case, when we want to handle more endpoints, we can use vertx-web library and design REST API.\nfinal HttpServer server = Vertx .vertx() .createHttpServer(); server .requestStream() .toFlowable() .onBackpressureDrop() .subscribe(request - { logger.info(\"{} {}\", request.rawMethod(), request.absoluteURI()); request.response().end(\"request received\"); }); server .rxListen(8080) .subscribe(httpServer - logger.info(\"server is running at port 8080...\")); We can build this server with Gradle as follows:\n./gradlew shadowJar and then, we can run it:\njava -jar build/libs/server-fat.jar Our client will be an Android application, which will read data from the accelerometer sensor, send it to the server and display it in the TextView on a mobile device. We will use ReactiveSensors library (which was recently migrated to RxJava 2) for getting sensor readings as a Flowable data stream. Next, we will apply backpressure DROP strategy, filter only events of changing sensors (we neglect changing of the accuracy), read only one event per one second with throttleLast(int, TimeUnit) operator and map event to a String with device coordinates. Next, we are ready to send data with Completable performRequest(String), which we created earlier. Sensors readings are acquired in the computation() scheduler, send to the server with io() scheduler and passed to the UI thread on Android with AndroidSchedulers.mainThread(). Distributing operations to the different schedulers is made with subscribeOn(Scheduler) and observeOn(Scheduler).\nreactiveSensors .observeSensor(Sensor.TYPE_ACCELEROMETER) .onBackpressureDrop() .filter(ReactiveSensorFilter.filterSensorChanged()) .throttleLast(1, TimeUnit.SECONDS) .map(this::getSensorReading) .doOnNext(event - performRequest(event) .subscribeOn(Schedulers.io()) .subscribe()) .subscribeOn(Schedulers.computation()) .observeOn(AndroidSchedulers.mainThread()) .subscribe(event - tvReadings.setText(event)); It’s worth noticing that Completable performRequest(String) is using OkHttp 3 under the hood as a HTTP client, because it’s very simple example with one endpoint. In the case, we want to handle more endpoints on the client-side, it’s better to use Retrofit library. It’s also interesting that in our case, we can simulate behavior of the accelerometer and other sensors with the latest Android device emulator available in the Android SDK. It works surprisingly smooth.\nComplete working example can be found at: https://github.com/pwittchen/reactive-client-server. Later, I’ve also shown, how to use RxJava to distribute computational operations to a different threads of the CPU cores, but I’ll probably publish a separate article about that on this blog. It was the same example I shown during my JDD presentation this year.\nSlides from my part of the presentation are available below.\n{% raw %}\n{% endraw %}\nView slides on SpeakerDeck\n","wordCount":"556","inLanguage":"en","datePublished":"2017-11-09T22:30:00Z","dateModified":"2017-11-09T22:30:00Z","author":{"@type":"Person","name":"Piotr Wittchen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wittchen.io/posts/simple-reactive-http-client-and-server-with-rxjava-vertx-and-android/"},"publisher":{"@type":"Organization","name":"Piotr Wittchen","logo":{"@type":"ImageObject","url":"https://wittchen.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wittchen.io/ accesskey=h title="Piotr Wittchen (Alt + H)">Piotr Wittchen</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wittchen.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://wittchen.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://wittchen.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://wittchen.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://wittchen.io/contact/ title=contact><span>contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wittchen.io/>Home</a>&nbsp;»&nbsp;<a href=https://wittchen.io/posts/>Posts</a></div><h1 class=post-title>Simple reactive HTTP client and server with RxJava, Vert.x and Android</h1><div class=post-meta><span title="2017-11-09 22:30:00 +0000 UTC">November 9, 2017</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;556 words&nbsp;·&nbsp;Piotr Wittchen&nbsp;|&nbsp;<a href=https://github.com/pwittchen/wittchen.io/blob/master/content/posts/simple-reactive-http-client-and-server-with-rxjava-vertx-and-android.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>During <a href=https://www.facebook.com/Hack.your.Career/>Hack Your Career</a> event at the Silesian University of Technology, I&rsquo;ve prepared a presentation titled <a href=https://speakerdeck.com/pwittchen/reactive-programming-efficient-server-applications>Reactive Programming - Efficient Server Applications</a> with a colleague from work. Arek told about theory of Reactive Programming, shown basic concepts, data types and a few examples in the code. During my part of the presentation, I&rsquo;ve wrote a very simple server and client in Java (9 on the server, 7 on the client) with <a href=http://vertx.io/>Vert.x</a> (<a href=http://vertx.io/docs/vertx-core/java/>Core</a> and <a href=http://vertx.io/docs/vertx-rx/java2/>Rx</a>), <a href=https://github.com/ReactiveX/RxJava>RxJava 2</a>, <a href=https://github.com/square/okhttp>OkHttp 3</a>, <a href=https://www.android.com/>Android</a> and <a href=https://github.com/ReactiveX/RxAndroid/>RxAndroid</a>. Presentation was targeted mainly to the university students with no experience with reactive programming, but it was an open event and anyone could attend it. Below, we can see a very simple code snippet showing how to create a reactive HTTP server with Vert.x. We can create a stream of requests, make <code>Flowable</code> out of it, apply any kind of RxJava 2 operator including backpressure handling and subscribe the stream. Moreover, we can also reactively start the server with <code>rxListen(int port)</code> method. This is just a basic example, where will be sending request to the only one endpoint. In the case, when we want to handle more endpoints, we can use <a href=http://vertx.io/docs/vertx-web/java/>vertx-web</a> library and design REST API.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>final</span> <span class=n>HttpServer</span> <span class=n>server</span> <span class=o>=</span> <span class=n>Vertx</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>vertx</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>createHttpServer</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>server</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>requestStream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>toFlowable</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>onBackpressureDrop</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>subscribe</span><span class=o>(</span><span class=n>request</span> <span class=o>-&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>logger</span><span class=o>.</span><span class=na>info</span><span class=o>(</span><span class=s>&#34;{} {}&#34;</span><span class=o>,</span> <span class=n>request</span><span class=o>.</span><span class=na>rawMethod</span><span class=o>(),</span> <span class=n>request</span><span class=o>.</span><span class=na>absoluteURI</span><span class=o>());</span>
</span></span><span class=line><span class=cl>      <span class=n>request</span><span class=o>.</span><span class=na>response</span><span class=o>().</span><span class=na>end</span><span class=o>(</span><span class=s>&#34;request received&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>server</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>rxListen</span><span class=o>(</span><span class=n>8080</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>subscribe</span><span class=o>(</span><span class=n>httpServer</span> <span class=o>-&gt;</span> <span class=n>logger</span><span class=o>.</span><span class=na>info</span><span class=o>(</span><span class=s>&#34;server is running at port 8080...&#34;</span><span class=o>));</span>
</span></span></code></pre></div><p>We can build this server with Gradle as follows:</p><pre tabindex=0><code>./gradlew shadowJar
</code></pre><p>and then, we can run it:</p><pre tabindex=0><code>java -jar build/libs/server-fat.jar
</code></pre><p>Our client will be an Android application, which will read data from the accelerometer sensor, send it to the server and display it in the <code>TextView</code> on a mobile device. We will use <a href=https://github.com/pwittchen/ReactiveSensors>ReactiveSensors</a> library (which was recently migrated to RxJava 2) for getting sensor readings as a <code>Flowable</code> data stream. Next, we will apply backpressure <code>DROP</code> strategy, filter only events of changing sensors (we neglect changing of the accuracy), read only one event per one second with <code>throttleLast(int, TimeUnit)</code> operator and map event to a String with device coordinates. Next, we are ready to send data with <code>Completable performRequest(String)</code>, which we created earlier. Sensors readings are acquired in the <code>computation()</code> scheduler, send to the server with <code>io()</code> scheduler and passed to the UI thread on Android with <code>AndroidSchedulers.mainThread()</code>. Distributing operations to the different schedulers is made with <code>subscribeOn(Scheduler)</code> and <code>observeOn(Scheduler)</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>reactiveSensors</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>observeSensor</span><span class=o>(</span><span class=n>Sensor</span><span class=o>.</span><span class=na>TYPE_ACCELEROMETER</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>onBackpressureDrop</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>ReactiveSensorFilter</span><span class=o>.</span><span class=na>filterSensorChanged</span><span class=o>())</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>throttleLast</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>TimeUnit</span><span class=o>.</span><span class=na>SECONDS</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=k>this</span><span class=o>::</span><span class=n>getSensorReading</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>doOnNext</span><span class=o>(</span><span class=n>event</span> <span class=o>-&gt;</span> <span class=n>performRequest</span><span class=o>(</span><span class=n>event</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>subscribeOn</span><span class=o>(</span><span class=n>Schedulers</span><span class=o>.</span><span class=na>io</span><span class=o>())</span>
</span></span><span class=line><span class=cl>        <span class=o>.</span><span class=na>subscribe</span><span class=o>())</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>subscribeOn</span><span class=o>(</span><span class=n>Schedulers</span><span class=o>.</span><span class=na>computation</span><span class=o>())</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>observeOn</span><span class=o>(</span><span class=n>AndroidSchedulers</span><span class=o>.</span><span class=na>mainThread</span><span class=o>())</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>subscribe</span><span class=o>(</span><span class=n>event</span> <span class=o>-&gt;</span> <span class=n>tvReadings</span><span class=o>.</span><span class=na>setText</span><span class=o>(</span><span class=n>event</span><span class=o>));</span>
</span></span></code></pre></div><p>It&rsquo;s worth noticing that <code>Completable performRequest(String)</code> is using OkHttp 3 under the hood as a HTTP client, because it&rsquo;s very simple example with one endpoint. In the case, we want to handle more endpoints on the client-side, it&rsquo;s better to use <a href=https://github.com/square/retrofit>Retrofit</a> library. It&rsquo;s also interesting that in our case, we can simulate behavior of the accelerometer and other sensors with the latest Android device emulator available in the Android SDK. It works surprisingly smooth.</p><p><img loading=lazy src=/posts/2017/simple-reactive-http-client-and-server-with-rxjava-vertx-and-android/virtual_sensors.png alt></p><p><strong>Complete working example can be found at</strong>: <a href=https://github.com/pwittchen/reactive-client-server>https://github.com/pwittchen/reactive-client-server</a>. Later, I&rsquo;ve also shown, how to use RxJava to distribute computational operations to a different threads of the CPU cores, but I&rsquo;ll probably publish a separate article about that on this blog. It was the same example I shown during my JDD presentation this year.</p><p>Slides from my part of the presentation are available below.</p><p>{% raw %}</p><p>{% endraw %}</p><p><a href=https://speakerdeck.com/pwittchen/reactive-programming-efficient-server-applications>View slides on SpeakerDeck</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wittchen.io/tags/android/>android</a></li><li><a href=https://wittchen.io/tags/java/>java</a></li><li><a href=https://wittchen.io/tags/rxjava/>rxjava</a></li></ul><nav class=paginav><a class=prev href=https://wittchen.io/posts/droidcon-poland-2017-is-your-app-really-connected/><span class=title>« Prev</span><br><span>DroidCon Poland 2017 - Is your app really connected?</span></a>
<a class=next href=https://wittchen.io/posts/5-ways-to-attend-expansive-it-conferences-for-almost-free/><span class=title>Next »</span><br><span>5 ways to attend expensive IT conferences for (almost) free</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://wittchen.io/>Piotr Wittchen</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>