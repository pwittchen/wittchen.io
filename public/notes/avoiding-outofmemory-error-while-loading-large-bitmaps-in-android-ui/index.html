<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Avoiding OutOfMemory Error while loading large Bitmaps in Android UI | Piotr Wittchen</title><meta name=keywords content="android,java"><meta name=description content="Sometimes we may encounter an error connected with loading too large Bitmaps into Android UI. In such cases, we may receive OutOfMemoryError in stack trace. In Android, we are working with limited memory and we shouldn&rsquo;t load images with full resolution into UI. These images should be scaled down in order to save memory and increase performance of the application. It&rsquo;s very well described in official Android documentation in section Loading Large Bitmaps Efficiently. It&rsquo;s worth reading. We can deal with memory problem in three easy steps:"><meta name=author content="Piotr Wittchen"><link rel=canonical href=https://wittchen.io/notes/avoiding-outofmemory-error-while-loading-large-bitmaps-in-android-ui/><link crossorigin=anonymous href=/assets/css/stylesheet.ce07c2a628121ab9051d703ded1d918162d348e5c03783b702262170087c359e.css integrity="sha256-zgfCpigSGrkFHXA97R2RgWLTSOXAN4O3AiYhcAh8NZ4=" rel="preload stylesheet" as=style><link rel=icon href=https://wittchen.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wittchen.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://wittchen.io/favicon-32x32.png><link rel=apple-touch-icon href=https://wittchen.io/apple-touch-icon.png><link rel=mask-icon href=https://wittchen.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://wittchen.io/notes/avoiding-outofmemory-error-while-loading-large-bitmaps-in-android-ui/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://wittchen.io/notes/avoiding-outofmemory-error-while-loading-large-bitmaps-in-android-ui/"><meta property="og:site_name" content="Piotr Wittchen"><meta property="og:title" content="Avoiding OutOfMemory Error while loading large Bitmaps in Android UI"><meta property="og:description" content="Sometimes we may encounter an error connected with loading too large Bitmaps into Android UI. In such cases, we may receive OutOfMemoryError in stack trace. In Android, we are working with limited memory and we shouldn’t load images with full resolution into UI. These images should be scaled down in order to save memory and increase performance of the application. It’s very well described in official Android documentation in section Loading Large Bitmaps Efficiently. It’s worth reading. We can deal with memory problem in three easy steps:"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="notes"><meta property="article:published_time" content="2014-02-23T13:34:00+00:00"><meta property="article:modified_time" content="2014-02-23T13:34:00+00:00"><meta property="article:tag" content="Android"><meta property="article:tag" content="Java"><meta name=twitter:card content="summary"><meta name=twitter:title content="Avoiding OutOfMemory Error while loading large Bitmaps in Android UI"><meta name=twitter:description content="Sometimes we may encounter an error connected with loading too large Bitmaps into Android UI. In such cases, we may receive OutOfMemoryError in stack trace. In Android, we are working with limited memory and we shouldn&rsquo;t load images with full resolution into UI. These images should be scaled down in order to save memory and increase performance of the application. It&rsquo;s very well described in official Android documentation in section Loading Large Bitmaps Efficiently. It&rsquo;s worth reading. We can deal with memory problem in three easy steps:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Notes","item":"https://wittchen.io/notes/"},{"@type":"ListItem","position":2,"name":"Avoiding OutOfMemory Error while loading large Bitmaps in Android UI","item":"https://wittchen.io/notes/avoiding-outofmemory-error-while-loading-large-bitmaps-in-android-ui/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Avoiding OutOfMemory Error while loading large Bitmaps in Android UI","name":"Avoiding OutOfMemory Error while loading large Bitmaps in Android UI","description":"Sometimes we may encounter an error connected with loading too large Bitmaps into Android UI. In such cases, we may receive OutOfMemoryError in stack trace. In Android, we are working with limited memory and we shouldn\u0026rsquo;t load images with full resolution into UI. These images should be scaled down in order to save memory and increase performance of the application. It\u0026rsquo;s very well described in official Android documentation in section Loading Large Bitmaps Efficiently. It\u0026rsquo;s worth reading. We can deal with memory problem in three easy steps:\n","keywords":["android","java"],"articleBody":"Sometimes we may encounter an error connected with loading too large Bitmaps into Android UI. In such cases, we may receive OutOfMemoryError in stack trace. In Android, we are working with limited memory and we shouldn’t load images with full resolution into UI. These images should be scaled down in order to save memory and increase performance of the application. It’s very well described in official Android documentation in section Loading Large Bitmaps Efficiently. It’s worth reading. We can deal with memory problem in three easy steps:\nRead image dimensions and type Scale down image Load scaled down version of the image to memory Now, we are ready to display image in the UI. In Android documentation, available from the link placed above, you can find relevant code, which will help you to solve the problem. If you want to load image from file path instead of resources, you can use my code snippet available below.\npublic static Bitmap decodeSampledBitmap(String filePath, int reqWidth, int reqHeight) { final BitmapFactory.Options options = new BitmapFactory.Options(); options.inJustDecodeBounds = true; BitmapFactory.decodeFile(filePath,options); options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight); options.inJustDecodeBounds = false; return BitmapFactory.decodeFile(filePath,options); } Source of the calculateInSampleSize method is available in Android documentation.\nUpdate: There is a library, which solves this problem and provides caching. It’s Picasso from Square. I recommend to use this library especially, when you’re dealing with a lot of images, ListViews and Adapters.\n","wordCount":"231","inLanguage":"en","datePublished":"2014-02-23T13:34:00Z","dateModified":"2014-02-23T13:34:00Z","author":{"@type":"Person","name":"Piotr Wittchen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wittchen.io/notes/avoiding-outofmemory-error-while-loading-large-bitmaps-in-android-ui/"},"publisher":{"@type":"Organization","name":"Piotr Wittchen","logo":{"@type":"ImageObject","url":"https://wittchen.io/favicon.ico"}}}</script><script defer data-website-id=dfid_D4sN47CVgrrCRR7KCciN3 data-domain=wittchen.io src=https://datafa.st/js/script.js></script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wittchen.io/ accesskey=h title="Piotr Wittchen (Alt + H)">Piotr Wittchen</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><button id=menu-toggle class=menu-toggle aria-label="Toggle menu" aria-expanded=false>
<svg class="hamburger-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
<svg class="close-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button><ul id=menu><li><a href=https://wittchen.io/about/ title=about><span>about</span></a></li><li><a href=https://wittchen.io/notes/ title=notes><span>notes</span></a></li><li><a href=https://wittchen.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://wittchen.io/talks/ title=talks><span>talks</span></a></li><li><a href=https://wittchen.io/projects/ title=projects><span>projects</span></a></li><li><a href=https://wittchen.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wittchen.io/>Home</a>&nbsp;»&nbsp;<a href=https://wittchen.io/notes/>Notes</a></div><h1 class="post-title entry-hint-parent">Avoiding OutOfMemory Error while loading large Bitmaps in Android UI</h1><div class=post-meta><span title='2014-02-23 13:34:00 +0000 UTC'>February 23, 2014</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;231 words&nbsp;·&nbsp;Piotr Wittchen&nbsp;|&nbsp;<a href=https://github.com/pwittchen/wittchen.io/blob/master/content/notes/avoiding-outofmemory-error-while-loading-large-bitmaps-in-android-ui.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>Sometimes we may encounter an error connected with loading too large Bitmaps into Android UI. In such cases, we may receive <code>OutOfMemoryError</code> in stack trace. In Android, we are working with limited memory and we shouldn&rsquo;t load images with full resolution into UI. These images should be scaled down in order to save memory and increase performance of the application. It&rsquo;s very well described in official Android documentation in section <a href=http://developer.android.com/training/displaying-bitmaps/load-bitmap.html title="Loading Large Bitmaps Efficiently">Loading Large Bitmaps Efficiently</a>. It&rsquo;s worth reading. We can deal with memory problem in three easy steps:</p><ol><li>Read image dimensions and type</li><li>Scale down image</li><li>Load scaled down version of the image to memory</li></ol><p>Now, we are ready to display image in the UI. In Android documentation, available from the link placed above, you can find relevant code, which will help you to solve the problem. If you want to load image from file path instead of resources, you can use my code snippet available below.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>Bitmap</span><span class=w> </span><span class=nf>decodeSampledBitmap</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>filePath</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>reqWidth</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>reqHeight</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>final</span><span class=w> </span><span class=n>BitmapFactory</span><span class=p>.</span><span class=na>Options</span><span class=w> </span><span class=n>options</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BitmapFactory</span><span class=p>.</span><span class=na>Options</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>options</span><span class=p>.</span><span class=na>inJustDecodeBounds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>BitmapFactory</span><span class=p>.</span><span class=na>decodeFile</span><span class=p>(</span><span class=n>filePath</span><span class=p>,</span><span class=n>options</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>options</span><span class=p>.</span><span class=na>inSampleSize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>calculateInSampleSize</span><span class=p>(</span><span class=n>options</span><span class=p>,</span><span class=w> </span><span class=n>reqWidth</span><span class=p>,</span><span class=w> </span><span class=n>reqHeight</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>options</span><span class=p>.</span><span class=na>inJustDecodeBounds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>BitmapFactory</span><span class=p>.</span><span class=na>decodeFile</span><span class=p>(</span><span class=n>filePath</span><span class=p>,</span><span class=n>options</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>Source of the <code>calculateInSampleSize</code> method is available in <a href=http://developer.android.com/training/displaying-bitmaps/load-bitmap.html>Android documentation</a>.</p><p><strong>Update:</strong> There is a library, which solves this problem and provides caching. It&rsquo;s <a href=http://square.github.io/picasso/>Picasso</a> from Square. I recommend to use this library especially, when you&rsquo;re dealing with a lot of images, ListViews and Adapters.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wittchen.io/tags/android/>Android</a></li><li><a href=https://wittchen.io/tags/java/>Java</a></li></ul><nav class=paginav><a class=prev href=https://wittchen.io/notes/how-to-read-contacts-in-android-device-using-contentresolver/><span class=title>« Prev</span><br><span>How to read contacts in Android device using ContentResolver?</span>
</a><a class=next href=https://wittchen.io/notes/issue-workflow-in-agile-projects/><span class=title>Next »</span><br><span>Issue workflow in agile projects</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://wittchen.io/>Piotr Wittchen</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a> · theme modifications inspired by <a href=https://ui.shadcn.com/ rel=noopener target=_blank>shadcn-ui</a> · <a href=https://github.com/pwittchen/wittchen.io rel=noopener target=_blank>open-source</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>(function(){const e=document.querySelector(".header");if(!e)return;function t(){window.scrollY>10?e.classList.add("scrolled"):e.classList.remove("scrolled")}window.addEventListener("scroll",t,{passive:!0}),t()})(),function(){const t=document.getElementById("menu-toggle"),e=document.getElementById("menu");if(!t||!e)return;function s(){const n=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!n),e.classList.toggle("menu-open"),document.body.classList.toggle("menu-open"),n||window.scrollTo(0,0)}function n(){t.setAttribute("aria-expanded","false"),e.classList.remove("menu-open"),document.body.classList.remove("menu-open")}t.addEventListener("click",s),e.querySelectorAll("a").forEach(e=>{e.addEventListener("click",n)}),document.addEventListener("keydown",function(t){t.key==="Escape"&&e.classList.contains("menu-open")&&n()}),window.addEventListener("resize",function(){window.innerWidth>768&&e.classList.contains("menu-open")&&n()})}()</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>