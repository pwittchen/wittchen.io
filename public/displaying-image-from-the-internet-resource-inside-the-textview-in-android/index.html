<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Displaying image from the Internet inside the TextView · Piotr Wittchen</title><meta name="description" content="Displaying image from the Internet inside the TextView - Piotr Wittchen"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400"><link rel="search" type="application/opensearchdescription+xml" href="http://wittchen.io/atom.xml" title="Piotr Wittchen"><meta name="generator" content="Hexo 4.0.0"></head><body><div class="wrap"><header><a href="/" class="logo-link"><div>Piotr Wittchen</div></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">WRITING</a></li><li class="nav-list-item"><a href="/code" target="_self" class="nav-list-link">CODE</a></li><li class="nav-list-item"><a href="/projects" target="_self" class="nav-list-link">PROJECTS</a></li><li class="nav-list-item"><a href="/talks" target="_self" class="nav-list-link">TALKS</a></li><li class="nav-list-item"><a href="/contact" target="_self" class="nav-list-link">CONTACT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Displaying image from the Internet inside the TextView</h1><div class="post-info">Mar 19, 2013</div><div class="post-content"><p>Sometimes, we have to work with legacy code and we have to change application’s behavior without modifying layouts, structure of the application and core components. Such situations can force us to do some tricks during development or maintenance process. For example, at the beginning, our app had to download data from the web service or RSS channel. This data consisted of the text, so we could use <em>TextView</em> in order to display such information. After some time, back-end developers decided to put there some HTML code including references to images. We want to display images in our mobile application without modifying existing structure, so we can create data of type <em>Drawable</em> inside the <em>TextView</em>. We can do it by creating an additional method <em>getImageHTML()</em> and using <a href="http://developer.android.com/reference/android/text/Html.html#fromHtml(java.lang.String)" target="_blank" rel="noopener"><em>fromHtml</em></a> method from <a href="http://developer.android.com/reference/android/text/Html.html" target="_blank" rel="noopener"><em>Html</em> class</a>, which is default Android class. Below, you can see an example presenting approach described in this post.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FromHtmlImageActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">private</span> TextView sampleTextView;</span><br><span class="line">	<span class="keyword">private</span> Spanned spannedValue;</span><br><span class="line">	<span class="keyword">private</span> String stringWithHtml;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">		setContentView(R.layout.main);</span><br><span class="line">		stringWithHtml = <span class="string">"Sample string with an &lt;a href=\"http://www.exemplary-link.com\"&gt;exemplary link&lt;/a&gt;."</span>;</span><br><span class="line">		spannedValue = Html.fromHtml(stringWithHtml,getImageHTML(),<span class="keyword">null</span>);</span><br><span class="line">		sampleTextView = (TextView)findViewById(R.id.sample_textview);</span><br><span class="line">		sampleTextView.setText(spannedValue);</span><br><span class="line">    	&#125;</span><br><span class="line"> </span><br><span class="line">    	<span class="function"><span class="keyword">public</span> ImageGetter <span class="title">getImageHTML</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		ImageGetter imageGetter = <span class="keyword">new</span> ImageGetter() &#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> Drawable <span class="title">getDrawable</span><span class="params">(String source)</span> </span>&#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					Drawable drawable = Drawable.createFromStream(<span class="keyword">new</span> URL(source).openStream(), <span class="string">"src name"</span>);</span><br><span class="line">					drawable.setBounds(<span class="number">0</span>, <span class="number">0</span>, drawable.getIntrinsicWidth(),drawable.getIntrinsicHeight());</span><br><span class="line">					<span class="keyword">return</span> drawable;</span><br><span class="line">				&#125; <span class="keyword">catch</span>(IOException exception) &#123;</span><br><span class="line">					Log.v(<span class="string">"IOException"</span>,exception.getMessage());</span><br><span class="line">					<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">return</span> imageGetter;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/5-essential-tools-for-serious-software-development-in-a-team-projects/" class="prev">PREV</a><a href="/improper-data-type-in-android-textview/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'wittchenio';
var disqus_identifier = 'displaying-image-from-the-internet-resource-inside-the-textview-in-android/';
var disqus_title = 'Displaying image from the Internet inside the TextView';
var disqus_url = 'http://wittchen.io/displaying-image-from-the-internet-resource-inside-the-textview-in-android/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//undefined.disqus.com/count.js" async></script><div class="copyright"><p>© 2013 - 2019 <a href="http://wittchen.io">Piotr Wittchen</a></p><p><a href="https://github.com/pwittchen/wittchen.io" target="_blank" rel="noopener">source</a> / <a href="/feed.xml">rss</a> / <a href="/archives">writing</a> / <a href="/tags">tags</a> / <a href="https://github.com/pwittchen/wittchen.io#rest" target="_blank" rel="noopener">api</a> / <a href="/gh">github</a> / <a href="/so">stackoverflow</a> / <a href="/in">linkedin</a> / <a href="mailto:piotr@wittchen.io">email</a></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-2194664-7",'auto');ga('send','pageview');</script></body></html>