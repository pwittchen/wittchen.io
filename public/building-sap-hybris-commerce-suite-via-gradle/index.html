<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Building and running SAP Hybris Commerce Platform via Gradle · Piotr Wittchen</title><meta name="description" content="Building and running SAP Hybris Commerce Platform via Gradle - Piotr Wittchen"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400"><link rel="search" type="application/opensearchdescription+xml" href="http://wittchen.io/atom.xml" title="Piotr Wittchen"><meta name="generator" content="Hexo 4.0.0"></head><body><div class="wrap"><header><a href="/" class="logo-link"><div>Piotr Wittchen</div></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">WRITING</a></li><li class="nav-list-item"><a href="/code" target="_self" class="nav-list-link">CODE</a></li><li class="nav-list-item"><a href="/projects" target="_self" class="nav-list-link">PROJECTS</a></li><li class="nav-list-item"><a href="/talks" target="_self" class="nav-list-link">TALKS</a></li><li class="nav-list-item"><a href="/contact" target="_self" class="nav-list-link">CONTACT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Building and running SAP Hybris Commerce Platform via Gradle</h1><div class="post-info">Sep 1, 2017</div><div class="post-content"><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>I really like <a href="https://gradle.org/" target="_blank" rel="noopener">Gradle</a> build system for JVM apps. It has flexibility like <a href="http://ant.apache.org/" target="_blank" rel="noopener">Ant</a> and great dependency management capabilities like <a href="https://maven.apache.org/" target="_blank" rel="noopener">Maven</a>. It addition, it doesn’t use XML notation, but Groovy programming language, so builds configurations are simple, concise, easier to read and easier to create. In my opinion, Gradle is truly modern build system for JVM apps. Nevertheless, there are projects, which are pretty old and use older systems like Ant. For example, all Hybris projects are based on Ant. Moreover, they have their custom setup and configurations, internal extensions system, etc. I was wondering if it’s possible to migrate Hybris Platform build from Ant to Gradle. That’s why I created a simple Proof of Concept.</p>
<h2 id="Migrating-from-Ant-to-Gradle"><a href="#Migrating-from-Ant-to-Gradle" class="headerlink" title="Migrating from Ant to Gradle"></a>Migrating from Ant to Gradle</h2><p>If we want to use Gradle, we need to install it first.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gradle         <span class="comment"># if we're on Ubuntu Linux</span></span><br><span class="line">brew install gradle                 <span class="comment"># if we're on macOS</span></span><br></pre></td></tr></table></figure>

<p>For more details and instructions for other systems, check <a href="https://gradle.org/install/" target="_blank" rel="noopener">official Gradle installation guide</a>. Then, we need to go to our Hybris platform directory and navigate to <code>hybris/bin/platform</code> After that, we need to initialize gradle inside this directory by running <code>gradle</code> command. Next, we need to create gradle wrapper by running <code>gradle wrapper</code> command. Now we should have the following elements in our directory:</p>
<ul>
<li><code>.gradle</code> (directory)</li>
<li><code>graldew</code> (wrapper file for Unix)</li>
<li><code>gradlew.bat</code> (wrapper file for Windows)</li>
</ul>
<p>Afterwards, we can create <code>build.gradle</code> configuration file. It should have the following contents:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ant</span>.importBuild <span class="string">'build.xml'</span></span><br><span class="line">apply plugin: <span class="string">'java'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">  jcenter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> run() &#123;</span><br><span class="line">  <span class="keyword">doLast</span> &#123;</span><br><span class="line">     exec &#123;</span><br><span class="line">          executable <span class="string">"./hybrisserver.sh"</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> cleanGeneratedDirs(type: <span class="keyword">Delete</span>) &#123;</span><br><span class="line">  <span class="keyword">delete</span> <span class="string">"../../data"</span></span><br><span class="line">  <span class="keyword">delete</span> <span class="string">"../../log"</span></span><br><span class="line">  <span class="keyword">delete</span> <span class="string">"../../roles"</span></span><br><span class="line">  <span class="keyword">delete</span> <span class="string">"../../temp"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> cleanConfig(type: <span class="keyword">Delete</span>) &#123;</span><br><span class="line">  <span class="keyword">delete</span> <span class="string">"../../config"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">  <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'lib'</span>, <span class="keyword">include</span>: \[<span class="string">'*.jar'</span>\])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Now, we can execute the following command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew clean build</span><br></pre></td></tr></table></figure>

<p>and platform will be built. In order to initialize the platform, we can call:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew initialize</span><br></pre></td></tr></table></figure>

<p>If we want to start the Hybris server, we can simply call:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew run</span><br></pre></td></tr></table></figure>

<p>To clear directories generated during build and initialization, we can run:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew cleanGeneratedDirs</span><br></pre></td></tr></table></figure>

<p>I tried to make <code>clean</code> task dependent on this one, but I got a few errors and didn’t spend too much time on investigating them. As you probably noticed, this solution is just a wrapper around Ant build defined in <code>build.xml</code> file and it’s not pure Gradle build configuration. Nevertheless, these tips may be useful for the people who need to have custom build configurations and dependencies. There’s no doubt that creating and maintaining configurations via Gradle is much easier and more convenient than doing the same job via Ant.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>As we can see, it’s possible to migrate Hybris build from Ant to Gradle, but please remember that Hybris has a custom setup and it may not be the best decision in each case. We should always consider pros and cons of such solution and adjust it to our needs. In legacy systems, we often have to stick to existing setups because making “revolution” may be a huge overhead and doesn’t have to pay off. Moreover, all Hybris extensions also have build configurations based on Ant. On the other hand, I can highly recommend Gradle for greenfield JVM projects.</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p>There’s another nice, short article describing migrating Java projects from Ant to Gradle: <a href="https://objectpartners.com/2017/05/04/easily-convert-from-ant-to-gradle/" target="_blank" rel="noopener">Easily Convert from Ant to Gradle (objectpartners.com)</a>.</p>
</div></article></div></main><footer><div class="paginator"><a href="/integrating-nullaway-with-an-android-project/" class="prev">PREV</a><a href="/introducing-reactive-airplane-mode/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'wittchenio';
var disqus_identifier = 'building-sap-hybris-commerce-suite-via-gradle/';
var disqus_title = 'Building and running SAP Hybris Commerce Platform via Gradle';
var disqus_url = 'http://wittchen.io/building-sap-hybris-commerce-suite-via-gradle/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//undefined.disqus.com/count.js" async></script><div class="copyright"><p>© 2013 - 2019 <a href="http://wittchen.io">Piotr Wittchen</a></p><p><a href="https://github.com/pwittchen/wittchen.io" target="_blank" rel="noopener">source</a> / <a href="/feed.xml">rss</a> / <a href="/archives">archives</a> / <a href="/tags">tags</a> / <a href="https://github.com/pwittchen/wittchen.io#rest" target="_blank" rel="noopener">api</a> / <a href="/gh">github</a> / <a href="/so">stackoverflow</a> / <a href="/in">linkedin</a> / <a href="mailto:piotr@wittchen.io">email</a></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-2194664-7",'auto');ga('send','pageview');</script></body></html>