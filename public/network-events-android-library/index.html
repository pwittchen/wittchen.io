<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> NetworkEvents - Android library · Piotr Wittchen</title><meta name="description" content="NetworkEvents - Android library - Piotr Wittchen"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400"><link rel="search" type="application/opensearchdescription+xml" href="http://wittchen.io/atom.xml" title="Piotr Wittchen"><meta name="generator" content="Hexo 4.0.0"></head><body><div class="wrap"><header><a href="/" class="logo-link"><div>Piotr Wittchen</div></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">WRITING</a></li><li class="nav-list-item"><a href="/code" target="_self" class="nav-list-link">CODE</a></li><li class="nav-list-item"><a href="/projects" target="_self" class="nav-list-link">PROJECTS</a></li><li class="nav-list-item"><a href="/talks" target="_self" class="nav-list-link">TALKS</a></li><li class="nav-list-item"><a href="/contact" target="_self" class="nav-list-link">CONTACT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">NetworkEvents - Android library</h1><div class="post-info">Aug 19, 2014</div><div class="post-content"><p><strong>Please note: This post is outdated. Check newest API on the <a href="https://github.com/pwittchen/NetworkEvents" target="_blank" rel="noopener">GitHub</a>.</strong></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>NetworkEvents is an Android library, which I’ve created recently for one of the projects. It uses <a href="http://square.github.io/otto/" target="_blank" rel="noopener">Otto Event Bus</a> to support event driven programming. We can use appropriate annotations and perform any action, when connectivity status changes. E.g. when device will go offline, connects to the mobile network, connects to the WiFi network, connects to the WiFi network with Internet access or connects to WiFi network without Internet access. Android API does not allow to determine whether specific WiFi Access Point is connected to the Internet, but this library does. In addition, we can monitor change of the signal strength of available WiFi Access Points in the same manner as connectivity status.</p>
<h2 id="Where-can-I-get-it"><a href="#Where-can-I-get-it" class="headerlink" title="Where can I get it?"></a>Where can I get it?</h2><p>NetworkEvents library is open-source and available on GitHub at: <a href="https://github.com/pwittchen/NetworkEvents" target="_blank" rel="noopener">https://github.com/pwittchen/NetworkEvents</a>. You can clone this repository and see how it works. It contains <a href="https://github.com/pwittchen/NetworkEvents/tree/master/example" target="_blank" rel="noopener">sample project</a> using library module dependency. Network Events library is placed in separate module. Android Studio is recommended IDE.</p>
<h2 id="How-to-use-it"><a href="#How-to-use-it" class="headerlink" title="How to use it?"></a>How to use it?</h2><h3 id="1-Initialize-EventBus-and-NetworkEvents"><a href="#1-Initialize-EventBus-and-NetworkEvents" class="headerlink" title="1. Initialize EventBus and NetworkEvents"></a>1. Initialize EventBus and NetworkEvents</h3><p>You can do it in <code>onCreate()</code> method of the activity in case of using library in activity.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Bus bus = <span class="keyword">new</span> Bus();</span><br><span class="line">NetworkEvents networkEvents = <span class="keyword">new</span> NetworkEvents(<span class="keyword">this</span>, bus);</span><br></pre></td></tr></table></figure>

<h3 id="2-Register-Unregister-EventBus-and-NetworkEvents"><a href="#2-Register-Unregister-EventBus-and-NetworkEvents" class="headerlink" title="2. Register/Unregister EventBus and NetworkEvents"></a>2. Register/Unregister EventBus and NetworkEvents</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>.onResume();</span><br><span class="line">  bus.register(<span class="keyword">this</span>);</span><br><span class="line">  networkEvents.register();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">super</span>.onPause();</span><br><span class="line">  bus.unregister(<span class="keyword">this</span>);</span><br><span class="line">  networkEvents.unregister();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-Subscribe-events"><a href="#3-Subscribe-events" class="headerlink" title="3. Subscribe events"></a>3. Subscribe events</h3><p>We can subscribe two or just one event. It depends on our needs.<br>The following events are available:</p>
<ul>
<li><code>ConnectivityStatusChangedEvent</code></li>
<li><code>WifiAccessPointsSignalStrengthChangedEvent</code></li>
</ul>
<p>Subscribing events is simple. Look at the code below.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Subscribe</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connectivityStatusChanged</span><span class="params">(ConnectivityStatusChangedEvent event)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// you can perform here any action you want to</span></span><br><span class="line">  <span class="comment">// in this example we are displaying toast with Connectivity Status</span></span><br><span class="line">  <span class="comment">// and another toast with WiFi info</span></span><br><span class="line"></span><br><span class="line">  Toast.makeText(<span class="keyword">this</span>, event.getConnectivityStatus().toString(), Toast.LENGTH_SHORT).show();</span><br><span class="line">  Toast.makeText(<span class="keyword">this</span>, event.getWifiInfo().toString(), Toast.LENGTH_SHORT).show();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Subscribe</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">wifiAccessPointsRefreshed</span><span class="params">(WifiAccessPointsSignalStrengthChangedEvent event)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// you can perform here any action you want to</span></span><br><span class="line">  <span class="comment">// in this example we are retrieving list of available access points</span></span><br><span class="line">  <span class="comment">// and storing it on the List</span></span><br><span class="line"></span><br><span class="line">  WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);</span><br><span class="line">  List&lt;ScanResult&gt; accessPoints = wifiManager.getScanResults();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>That’s it! For more details, check NetworkEvents project on GitHub at: <a href="https://github.com/pwittchen/NetworkEvents" target="_blank" rel="noopener">https://github.com/pwittchen/NetworkEvents</a><br><code>README.md</code> file also contains some details.</p>
<h3 id="Remarks"><a href="#Remarks" class="headerlink" title="Remarks"></a>Remarks</h3><p>EventBus and NetworkEvents can be accessed via Singletons to avoid multiple instances of these classes.</p>
</div></article></div></main><footer><div class="paginator"><a href="/reading-writing-generic-java-objects-to-json-files-and-vice-versa/" class="prev">PREV</a><a href="/software-for-common-users-on-ubuntu/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'wittchenio';
var disqus_identifier = 'network-events-android-library/';
var disqus_title = 'NetworkEvents - Android library';
var disqus_url = 'http://wittchen.io/network-events-android-library/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//undefined.disqus.com/count.js" async></script><div class="copyright"><p>© 2013 - 2019 <a href="http://wittchen.io">Piotr Wittchen</a></p><p><a href="https://github.com/pwittchen/wittchen.io" target="_blank" rel="noopener">source</a> / <a href="/feed.xml">rss</a> / <a href="/archives">writing</a> / <a href="/tags">tags</a> / <a href="https://github.com/pwittchen/wittchen.io#rest" target="_blank" rel="noopener">api</a> / <a href="/gh">github</a> / <a href="/so">stackoverflow</a> / <a href="/in">linkedin</a> / <a href="mailto:piotr@wittchen.io">email</a></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-2194664-7",'auto');ga('send','pageview');</script></body></html>