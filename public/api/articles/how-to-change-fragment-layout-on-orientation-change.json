{"title":"How to change Fragment layout on orientation change?","slug":"how-to-change-fragment-layout-on-orientation-change","date":"2013-08-15T20:50:00.000Z","updated":"2019-07-03T22:51:02.810Z","comments":true,"path":"api/articles/how-to-change-fragment-layout-on-orientation-change.json","excerpt":null,"covers":null,"content":"<p>When we work with Activities in Android, defining different layouts for different screen orientations is easy. The only thing we need to do, is to create two <code>*.xml</code> files with the same name for layouts in two separate directories (<em>res/layout/</em> and <em>res/layout-land/</em>). In <a href=\"http://developer.android.com/guide/components/fragments.html\" target=\"_blank\" rel=\"noopener\">Fragments</a> it’s not that easy. In such case, we need to perform additional operations in order to achieve our goal. Fragment in Android is not re-inflated on configuration change, but we can recreate layout and repopulate view manually. We need to create two layouts for different orientations of the screen in the same way as for Activity:</p>\n<ul>\n<li><code>res/layout/my_fragment.xml</code></li>\n<li><code>res/layout-land/my_fragment.xml</code></li>\n</ul>\n<p>Then, we need to put code shown below to our fragment. Of course, it requires little adjustments depending on concrete project.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle bundle)</span> </span>&#123;</span><br><span class=\"line\">        View view = inflater.inflate(R.layout.my_fragment, container, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// Find your buttons in view, set up onclicks, set up callbacks to your parent fragment or activity here.</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// You can create ViewHolder or separate method for that.</span></span><br><span class=\"line\">        <span class=\"comment\">// example of accessing views: TextView textViewExample = (TextView) view.findViewById(R.id.text_view_example);</span></span><br><span class=\"line\">        <span class=\"comment\">// textViewExample.setText(\"example\");</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> view;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onConfigurationChanged</span><span class=\"params\">(Configuration newConfig)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onConfigurationChanged(newConfig);</span><br><span class=\"line\">        LayoutInflater inflater = LayoutInflater.from(getActivity());</span><br><span class=\"line\">        populateViewForOrientation(inflater, (ViewGroup) getView());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">populateViewForOrientation</span><span class=\"params\">(LayoutInflater inflater, ViewGroup viewGroup)</span> </span>&#123;</span><br><span class=\"line\">        viewGroup.removeAllViewsInLayout();</span><br><span class=\"line\">        View subview = inflater.inflate(R.layout.my_fragment, viewGroup);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Find your buttons in subview, set up onclicks, set up callbacks to your parent fragment or activity here.</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// You can create ViewHolder or separate method for that.</span></span><br><span class=\"line\">        <span class=\"comment\">// example of accessing views: TextView textViewExample = (TextView) view.findViewById(R.id.text_view_example);</span></span><br><span class=\"line\">        <span class=\"comment\">// textViewExample.setText(\"example\");</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>That’s it!</p>\n","more":"<p>When we work with Activities in Android, defining different layouts for different screen orientations is easy. The only thing we need to do, is to create two <code>*.xml</code> files with the same name for layouts in two separate directories (<em>res/layout/</em> and <em>res/layout-land/</em>). In <a href=\"http://developer.android.com/guide/components/fragments.html\" target=\"_blank\" rel=\"noopener\">Fragments</a> it’s not that easy. In such case, we need to perform additional operations in order to achieve our goal. Fragment in Android is not re-inflated on configuration change, but we can recreate layout and repopulate view manually. We need to create two layouts for different orientations of the screen in the same way as for Activity:</p>\n<ul>\n<li><code>res/layout/my_fragment.xml</code></li>\n<li><code>res/layout-land/my_fragment.xml</code></li>\n</ul>\n<p>Then, we need to put code shown below to our fragment. Of course, it requires little adjustments depending on concrete project.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyFragment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">onCreateView</span><span class=\"params\">(LayoutInflater inflater, ViewGroup container, Bundle bundle)</span> </span>&#123;</span><br><span class=\"line\">        View view = inflater.inflate(R.layout.my_fragment, container, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// Find your buttons in view, set up onclicks, set up callbacks to your parent fragment or activity here.</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// You can create ViewHolder or separate method for that.</span></span><br><span class=\"line\">        <span class=\"comment\">// example of accessing views: TextView textViewExample = (TextView) view.findViewById(R.id.text_view_example);</span></span><br><span class=\"line\">        <span class=\"comment\">// textViewExample.setText(\"example\");</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">return</span> view;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onConfigurationChanged</span><span class=\"params\">(Configuration newConfig)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onConfigurationChanged(newConfig);</span><br><span class=\"line\">        LayoutInflater inflater = LayoutInflater.from(getActivity());</span><br><span class=\"line\">        populateViewForOrientation(inflater, (ViewGroup) getView());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">populateViewForOrientation</span><span class=\"params\">(LayoutInflater inflater, ViewGroup viewGroup)</span> </span>&#123;</span><br><span class=\"line\">        viewGroup.removeAllViewsInLayout();</span><br><span class=\"line\">        View subview = inflater.inflate(R.layout.my_fragment, viewGroup);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Find your buttons in subview, set up onclicks, set up callbacks to your parent fragment or activity here.</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// You can create ViewHolder or separate method for that.</span></span><br><span class=\"line\">        <span class=\"comment\">// example of accessing views: TextView textViewExample = (TextView) view.findViewById(R.id.text_view_example);</span></span><br><span class=\"line\">        <span class=\"comment\">// textViewExample.setText(\"example\");</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>That’s it!</p>\n","categories":[],"tags":[{"name":"android","path":"api/tags/android.json"},{"name":"java","path":"api/tags/java.json"}]}