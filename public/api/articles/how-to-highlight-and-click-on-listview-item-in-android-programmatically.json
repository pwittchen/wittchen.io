{"title":"How to highlight and click on ListView item in Android programmatically?","slug":"how-to-highlight-and-click-on-listview-item-in-android-programmatically","date":"2014-03-06T20:43:00.000Z","updated":"2019-07-03T22:51:02.810Z","comments":true,"path":"api/articles/how-to-highlight-and-click-on-listview-item-in-android-programmatically.json","excerpt":null,"covers":null,"content":"<p>There are many approaches concerning selecting items on Android’s ListView. Unfortunately most of them don’t work. I was struggling with this problem for some time and decided to publish my solution, which is actually quite easy.</p>\n<h2 id=\"The-problem\"><a href=\"#The-problem\" class=\"headerlink\" title=\"The problem\"></a>The problem</h2><p>I want to highlight item on a ListView programmatically (in a source code - without touching item on the screen).<br>I also want to click on item of the ListView programmatically.</p>\n<h2 id=\"Solution\"><a href=\"#Solution\" class=\"headerlink\" title=\"Solution\"></a>Solution</h2><p>We have to create our own adapter. Let’s call it ContactsAdapter.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactsAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseAdapter</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ArrayList list;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> selectedItem = -<span class=\"number\">1</span>; <span class=\"comment\">// no item selected by default</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// put neccessary code here - it's not important in this description</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ContactsAdapter</span><span class=\"params\">(List&lt;Contact&gt; contacts)</span> </span>&#123;</span><br><span class=\"line\">        list = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">        list.addAll(contacts);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">getView</span><span class=\"params\">(<span class=\"keyword\">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> View result;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (convertView == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            result = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_contact, parent, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            result = convertView;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        highlightItem(position, result);</span><br><span class=\"line\"></span><br><span class=\"line\">        Contact contact = getItem(position);</span><br><span class=\"line\">        ((TextView) result.findViewById(android.R.id.text1)).setText(contact.name);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * methods from StringUtils calls:</span></span><br><span class=\"line\"><span class=\"comment\">     * getContext().getResources().getColor(int resourceId)</span></span><br><span class=\"line\"><span class=\"comment\">     * getContext().getResources().getDrawable(int resourceId)</span></span><br><span class=\"line\"><span class=\"comment\">     * You can use them in your own context </span></span><br><span class=\"line\"><span class=\"comment\">     * (e.g. generic application context or you can pass activity context)</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@TargetApi</span>(Build.VERSION_CODES.JELLY_BEAN)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">highlightItem</span><span class=\"params\">(<span class=\"keyword\">int</span> position, View result)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(position == selectedItem) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// you can define your own color of selected item here</span></span><br><span class=\"line\">            result.setBackgroundColor(StringUtils.getColorFromResources(R.color.light_blue));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// you can define your own default selector here</span></span><br><span class=\"line\">            result.setBackground(StringUtils.getDrawableFromResources(R.drawable.abs__list_selector_holo_light));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSelectedItem</span><span class=\"params\">(<span class=\"keyword\">int</span> selectedItem)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.selectedItem = selectedItem;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// put rest of your necessary code here...</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Important methods are:</p>\n<ul>\n<li><code>View getView(int position, View convertView, ViewGroup parent)</code> - returns View of the single list item on the given position</li>\n<li><code>void highlightItem(int position, View result)</code> - highlights item on a given position (sets proper background)</li>\n<li><code>public void setSelectedItem(int selectedItem)</code> - sets item to highlight</li>\n</ul>\n<p>Now, we have to set our adapter in a ListView in activity.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onResume</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    List&lt;Contact&gt; contacts = getContactsFromYourSource();</span><br><span class=\"line\">    ContactsAdapter contactsAdapter = <span class=\"keyword\">new</span> ContactsAdapter(contacts);</span><br><span class=\"line\">    contactListView.setAdapter(contactsAdapter);</span><br><span class=\"line\">    highlightListItem(<span class=\"number\">2</span>); <span class=\"comment\">// this simple function call does the trick</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">highlightListItem</span><span class=\"params\">(<span class=\"keyword\">int</span> position)</span> </span>&#123;</span><br><span class=\"line\">    ContactsAdapter contactsAdapter = (ContactsAdapter) contactListView.getAdapter();</span><br><span class=\"line\">    contactsAdapter.setSelectedItem(position);</span><br><span class=\"line\">    <span class=\"comment\">// in some cases, it may be necessary to re-set adapter (as in the line below)</span></span><br><span class=\"line\">    contactListView.setAdapter(contactsAdapter);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>In this example, <code>highlightListItem(int)</code> method will highlight chosen item on a <code>ListView</code> available in a variable <code>contactListView</code>.</p>\n<p><strong>Clicking programmatically</strong> is much more easier, than highlighting item. We can simply use the method below assuming, that we properly created contactListView attribute and assigned it to appropriate view.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">clickOnListItem</span><span class=\"params\">(<span class=\"keyword\">int</span> position)</span> </span>&#123;</span><br><span class=\"line\">    contactList.performItemClick(contactListView, position, contactListView.getItemIdAtPosition(position));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","more":"<p>There are many approaches concerning selecting items on Android’s ListView. Unfortunately most of them don’t work. I was struggling with this problem for some time and decided to publish my solution, which is actually quite easy.</p>\n<h2 id=\"The-problem\"><a href=\"#The-problem\" class=\"headerlink\" title=\"The problem\"></a>The problem</h2><p>I want to highlight item on a ListView programmatically (in a source code - without touching item on the screen).<br>I also want to click on item of the ListView programmatically.</p>\n<h2 id=\"Solution\"><a href=\"#Solution\" class=\"headerlink\" title=\"Solution\"></a>Solution</h2><p>We have to create our own adapter. Let’s call it ContactsAdapter.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactsAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseAdapter</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ArrayList list;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> selectedItem = -<span class=\"number\">1</span>; <span class=\"comment\">// no item selected by default</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// put neccessary code here - it's not important in this description</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ContactsAdapter</span><span class=\"params\">(List&lt;Contact&gt; contacts)</span> </span>&#123;</span><br><span class=\"line\">        list = <span class=\"keyword\">new</span> ArrayList();</span><br><span class=\"line\">        list.addAll(contacts);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> View <span class=\"title\">getView</span><span class=\"params\">(<span class=\"keyword\">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> View result;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (convertView == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            result = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_contact, parent, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            result = convertView;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        highlightItem(position, result);</span><br><span class=\"line\"></span><br><span class=\"line\">        Contact contact = getItem(position);</span><br><span class=\"line\">        ((TextView) result.findViewById(android.R.id.text1)).setText(contact.name);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * methods from StringUtils calls:</span></span><br><span class=\"line\"><span class=\"comment\">     * getContext().getResources().getColor(int resourceId)</span></span><br><span class=\"line\"><span class=\"comment\">     * getContext().getResources().getDrawable(int resourceId)</span></span><br><span class=\"line\"><span class=\"comment\">     * You can use them in your own context </span></span><br><span class=\"line\"><span class=\"comment\">     * (e.g. generic application context or you can pass activity context)</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@TargetApi</span>(Build.VERSION_CODES.JELLY_BEAN)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">highlightItem</span><span class=\"params\">(<span class=\"keyword\">int</span> position, View result)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(position == selectedItem) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// you can define your own color of selected item here</span></span><br><span class=\"line\">            result.setBackgroundColor(StringUtils.getColorFromResources(R.color.light_blue));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// you can define your own default selector here</span></span><br><span class=\"line\">            result.setBackground(StringUtils.getDrawableFromResources(R.drawable.abs__list_selector_holo_light));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSelectedItem</span><span class=\"params\">(<span class=\"keyword\">int</span> selectedItem)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.selectedItem = selectedItem;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// put rest of your necessary code here...</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Important methods are:</p>\n<ul>\n<li><code>View getView(int position, View convertView, ViewGroup parent)</code> - returns View of the single list item on the given position</li>\n<li><code>void highlightItem(int position, View result)</code> - highlights item on a given position (sets proper background)</li>\n<li><code>public void setSelectedItem(int selectedItem)</code> - sets item to highlight</li>\n</ul>\n<p>Now, we have to set our adapter in a ListView in activity.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onResume</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    List&lt;Contact&gt; contacts = getContactsFromYourSource();</span><br><span class=\"line\">    ContactsAdapter contactsAdapter = <span class=\"keyword\">new</span> ContactsAdapter(contacts);</span><br><span class=\"line\">    contactListView.setAdapter(contactsAdapter);</span><br><span class=\"line\">    highlightListItem(<span class=\"number\">2</span>); <span class=\"comment\">// this simple function call does the trick</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">highlightListItem</span><span class=\"params\">(<span class=\"keyword\">int</span> position)</span> </span>&#123;</span><br><span class=\"line\">    ContactsAdapter contactsAdapter = (ContactsAdapter) contactListView.getAdapter();</span><br><span class=\"line\">    contactsAdapter.setSelectedItem(position);</span><br><span class=\"line\">    <span class=\"comment\">// in some cases, it may be necessary to re-set adapter (as in the line below)</span></span><br><span class=\"line\">    contactListView.setAdapter(contactsAdapter);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>In this example, <code>highlightListItem(int)</code> method will highlight chosen item on a <code>ListView</code> available in a variable <code>contactListView</code>.</p>\n<p><strong>Clicking programmatically</strong> is much more easier, than highlighting item. We can simply use the method below assuming, that we properly created contactListView attribute and assigned it to appropriate view.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">clickOnListItem</span><span class=\"params\">(<span class=\"keyword\">int</span> position)</span> </span>&#123;</span><br><span class=\"line\">    contactList.performItemClick(contactListView, position, contactListView.getItemIdAtPosition(position));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":[],"tags":[{"name":"java","path":"api/tags/java.json"},{"name":"android","path":"api/tags/android.json"}]}