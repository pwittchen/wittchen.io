{"title":"Dynamic wallpaper for i3","slug":"dynamic-wallpaper-for-i3","date":"2020-03-29T18:29:36.000Z","updated":"2020-03-29T18:33:53.443Z","comments":true,"path":"api/articles/dynamic-wallpaper-for-i3.json","excerpt":null,"covers":null,"content":"<p>Some time ago, I was using macOS. The thing I liked about this OS since Mojave version was the dynamic wallpaper feature. Wallpaper representing picture of the Mojave desert in California was dynamically changing during the day. In the morning, we could see the dawn and sunrise, later picture during the midday, in the evening, desert during the dusk and finally picture at night. I liked the fact that wallpaper were adjusting to the daytime. I wanted to have the same thing on my Linux. Luckily, on Arch and i3, it’s pretty easy to achieve.</p>\n<p>I could create very simple bash script:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> setbg &#123;</span><br><span class=\"line\">  cp <span class=\"variable\">$1</span> ~/.config/wall.jpg</span><br><span class=\"line\">  DISPLAY=:0.0 feh --<span class=\"built_in\">bg</span>-scale ~/.config/wall.jpg</span><br><span class=\"line\">  notify-send <span class=\"string\">\"wallpaper changed\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">hour=$(date +%H)</span><br><span class=\"line\">daytime=$(sunwait poll)</span><br><span class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"variable\">$daytime</span> == <span class=\"string\">\"DAY\"</span> ]] &amp;&amp; [ <span class=\"variable\">$hour</span> -lt 12 ] ; <span class=\"keyword\">then</span></span><br><span class=\"line\">  setbg <span class=\"variable\">$1</span> <span class=\"comment\"># morning</span></span><br><span class=\"line\"><span class=\"keyword\">elif</span> [ <span class=\"variable\">$hour</span> -gt 11 ] &amp;&amp; [ <span class=\"variable\">$hour</span> -lt 15 ] ; <span class=\"keyword\">then</span></span><br><span class=\"line\">  setbg <span class=\"variable\">$2</span> <span class=\"comment\"># midday</span></span><br><span class=\"line\"><span class=\"keyword\">elif</span> [ <span class=\"variable\">$hour</span> -gt 14 ] &amp;&amp; [[ <span class=\"variable\">$daytime</span> == <span class=\"string\">\"DAY\"</span> ]] ; <span class=\"keyword\">then</span></span><br><span class=\"line\">  setbg <span class=\"variable\">$3</span> <span class=\"comment\"># dusk</span></span><br><span class=\"line\"><span class=\"keyword\">elif</span> [[ <span class=\"variable\">$daytime</span> == <span class=\"string\">\"NIGHT\"</span> ]] ; <span class=\"keyword\">then</span></span><br><span class=\"line\">  setbg <span class=\"variable\">$4</span> <span class=\"comment\"># night</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n\n<p>In this example, I simply take the current hour and check if there’s day or night inside <code>daytime</code> variable with <code>sunwait</code> program. It’s pretty neat program and also allows to check time of the sunset and sunrise basing on our timezone and location. I’m using <code>feh</code> for setting my desktop background image with <code>DISPLAY=:0.0</code> keyword, which is required, when we want to execute our program in the cron job. Code snippet above is parametrized part of my larger <a href=\"https://github.com/pwittchen/dotfiles/blob/master/.scripts/set_bg.sh\" target=\"_blank\" rel=\"noopener\">set_bg.sh</a> script, which you can find in my <a href=\"https://github.com/pwittchen/dotfiles\" target=\"_blank\" rel=\"noopener\">dotfiles</a>, but you can put direct paths to your wallpapers in it. You can also check my wrapper for this script in <a href=\"https://github.com/pwittchen/dotfiles/blob/master/.scripts/set_bg_daytime.sh\" target=\"_blank\" rel=\"noopener\">set_bg_daytime.sh</a> file. In this case, we just need wallpapers for morning, midday, dusk and night. Of course, we can improve this script and introduce more parts of the day, but I didn’t want to make it too complicated.</p>\n<p>Once we are ready, we can put our script into <code>~/.config/i3/config</code> file, to set appropriate wallpaper after login:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exec --no-startup-id /path/to/our/script.sh</span><br></pre></td></tr></table></figure>\n\n<p>and create a cron job, which will update our wallpaper every hour:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1 * * * * /path/to/our/script.sh</span><br></pre></td></tr></table></figure>\n\n<p>That’s all we need. Now, we can have macOS-like dynamic wallpapers on Linux and i3.</p>\n<p>If you want to use macOS wallpapers from Mojave or Catalina OS version for this script, you can check <a href=\"https://github.com/pwittchen/wallpapers/tree/master/dynamic\" target=\"_blank\" rel=\"noopener\">dynamic</a> directory of my <a href=\"https://github.com/pwittchen/wallpapers\" target=\"_blank\" rel=\"noopener\">wallpapers</a> repository. You can also use any wallpapers you want for this script.</p>\n","more":"<p>Some time ago, I was using macOS. The thing I liked about this OS since Mojave version was the dynamic wallpaper feature. Wallpaper representing picture of the Mojave desert in California was dynamically changing during the day. In the morning, we could see the dawn and sunrise, later picture during the midday, in the evening, desert during the dusk and finally picture at night. I liked the fact that wallpaper were adjusting to the daytime. I wanted to have the same thing on my Linux. Luckily, on Arch and i3, it’s pretty easy to achieve.</p>\n<p>I could create very simple bash script:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> setbg &#123;</span><br><span class=\"line\">  cp <span class=\"variable\">$1</span> ~/.config/wall.jpg</span><br><span class=\"line\">  DISPLAY=:0.0 feh --<span class=\"built_in\">bg</span>-scale ~/.config/wall.jpg</span><br><span class=\"line\">  notify-send <span class=\"string\">\"wallpaper changed\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">hour=$(date +%H)</span><br><span class=\"line\">daytime=$(sunwait poll)</span><br><span class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"variable\">$daytime</span> == <span class=\"string\">\"DAY\"</span> ]] &amp;&amp; [ <span class=\"variable\">$hour</span> -lt 12 ] ; <span class=\"keyword\">then</span></span><br><span class=\"line\">  setbg <span class=\"variable\">$1</span> <span class=\"comment\"># morning</span></span><br><span class=\"line\"><span class=\"keyword\">elif</span> [ <span class=\"variable\">$hour</span> -gt 11 ] &amp;&amp; [ <span class=\"variable\">$hour</span> -lt 15 ] ; <span class=\"keyword\">then</span></span><br><span class=\"line\">  setbg <span class=\"variable\">$2</span> <span class=\"comment\"># midday</span></span><br><span class=\"line\"><span class=\"keyword\">elif</span> [ <span class=\"variable\">$hour</span> -gt 14 ] &amp;&amp; [[ <span class=\"variable\">$daytime</span> == <span class=\"string\">\"DAY\"</span> ]] ; <span class=\"keyword\">then</span></span><br><span class=\"line\">  setbg <span class=\"variable\">$3</span> <span class=\"comment\"># dusk</span></span><br><span class=\"line\"><span class=\"keyword\">elif</span> [[ <span class=\"variable\">$daytime</span> == <span class=\"string\">\"NIGHT\"</span> ]] ; <span class=\"keyword\">then</span></span><br><span class=\"line\">  setbg <span class=\"variable\">$4</span> <span class=\"comment\"># night</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n\n<p>In this example, I simply take the current hour and check if there’s day or night inside <code>daytime</code> variable with <code>sunwait</code> program. It’s pretty neat program and also allows to check time of the sunset and sunrise basing on our timezone and location. I’m using <code>feh</code> for setting my desktop background image with <code>DISPLAY=:0.0</code> keyword, which is required, when we want to execute our program in the cron job. Code snippet above is parametrized part of my larger <a href=\"https://github.com/pwittchen/dotfiles/blob/master/.scripts/set_bg.sh\" target=\"_blank\" rel=\"noopener\">set_bg.sh</a> script, which you can find in my <a href=\"https://github.com/pwittchen/dotfiles\" target=\"_blank\" rel=\"noopener\">dotfiles</a>, but you can put direct paths to your wallpapers in it. You can also check my wrapper for this script in <a href=\"https://github.com/pwittchen/dotfiles/blob/master/.scripts/set_bg_daytime.sh\" target=\"_blank\" rel=\"noopener\">set_bg_daytime.sh</a> file. In this case, we just need wallpapers for morning, midday, dusk and night. Of course, we can improve this script and introduce more parts of the day, but I didn’t want to make it too complicated.</p>\n<p>Once we are ready, we can put our script into <code>~/.config/i3/config</code> file, to set appropriate wallpaper after login:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exec --no-startup-id /path/to/our/script.sh</span><br></pre></td></tr></table></figure>\n\n<p>and create a cron job, which will update our wallpaper every hour:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1 * * * * /path/to/our/script.sh</span><br></pre></td></tr></table></figure>\n\n<p>That’s all we need. Now, we can have macOS-like dynamic wallpapers on Linux and i3.</p>\n<p>If you want to use macOS wallpapers from Mojave or Catalina OS version for this script, you can check <a href=\"https://github.com/pwittchen/wallpapers/tree/master/dynamic\" target=\"_blank\" rel=\"noopener\">dynamic</a> directory of my <a href=\"https://github.com/pwittchen/wallpapers\" target=\"_blank\" rel=\"noopener\">wallpapers</a> repository. You can also use any wallpapers you want for this script.</p>\n","categories":[],"tags":[{"name":"linux","path":"api/tags/linux.json"},{"name":"bash","path":"api/tags/bash.json"},{"name":"i3","path":"api/tags/i3.json"}]}