{"title":"Mockito on Android","slug":"mockito-on-android","date":"2015-03-15T14:44:00.000Z","updated":"2019-07-03T22:51:02.813Z","comments":true,"path":"api/articles/mockito-on-android.json","excerpt":null,"covers":null,"content":"<h2 id=\"Overview\"><a href=\"#Overview\" class=\"headerlink\" title=\"Overview\"></a>Overview</h2><p>When we write unit tests for an Android application, sometimes there’s a necessity to mock some classes or interfaces. Instead of writing implementations dedicated for unit tests by hand, we can use Mockito library. We can read article about <a href=\"https://corner.squareup.com/2012/10/mockito-android.html\" target=\"_blank\" rel=\"noopener\">Mockito on Android</a> on <a href=\"https://corner.squareup.com/\" target=\"_blank\" rel=\"noopener\">Square’s blog</a>. Mockito can make our tests cleaner and better. It can be used both in <em>classic</em> Java projects and Android projects. It’s one of the most popular mocking framework in Java and if you’re a Java developer who writes unit tests and tries to apply TDD approach, you should be familiar with it.</p>\n<h2 id=\"Sample-configuration\"><a href=\"#Sample-configuration\" class=\"headerlink\" title=\"Sample configuration\"></a>Sample configuration</h2><p>When we want to use Mockito on Android, we have to remember to add dependency to <code>dexmaker 1.0</code> and <code>dexmaker-mockito 1.0</code>. Sample test configuration in <code>build.gradle</code> file can look as follows (I’ve added more comments to clarify optional doubts):</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// our project dependencies go here...</span></span><br><span class=\"line\"></span><br><span class=\"line\">    androidTestCompile <span class=\"string\">'com.android.support.test:testing-support-lib:0.1'</span> <span class=\"comment\">// Android testing support library</span></span><br><span class=\"line\">    androidTestCompile(<span class=\"string\">'com.google.truth:truth:0.25'</span>) &#123; <span class=\"comment\">// Google's library for assertions (not required by Mockito)</span></span><br><span class=\"line\">        <span class=\"keyword\">exclude</span> <span class=\"keyword\">group</span>: <span class=\"string\">'junit'</span> <span class=\"comment\">// Android has JUnit built in</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    androidTestCompile <span class=\"string\">'com.google.dexmaker:dexmaker:1.0'</span> <span class=\"comment\">// required by Mockito</span></span><br><span class=\"line\">    androidTestCompile <span class=\"string\">'com.google.dexmaker:dexmaker-mockito:1.0'</span> <span class=\"comment\">// required by Mockito</span></span><br><span class=\"line\">    androidTestCompile <span class=\"string\">'org.mockito:mockito-core:1.9.5'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>We should also add information about <code>tesInstrumentationRunner</code> to <code>build.gradle</code> file when we are using it. When we have problems with running our tests, we should configure <code>packagingOptions</code> properly.</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    defaultConfig &#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        testInstrumentationRunner <span class=\"string\">\"android.support.test.runner.AndroidJUnitRunner\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    packagingOptions &#123;</span><br><span class=\"line\">        <span class=\"keyword\">exclude</span> <span class=\"string\">'LICENSE.txt'</span></span><br><span class=\"line\">        <span class=\"keyword\">exclude</span> <span class=\"string\">'META-INF/LICENSE.txt'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Remember\"><a href=\"#Remember\" class=\"headerlink\" title=\"Remember\"></a>Remember</h2><p>Quotation from <a href=\"http://mockito.org/\" target=\"_blank\" rel=\"noopener\">Mockito website</a>:</p>\n<ul>\n<li>Do not mock types you don’t own</li>\n<li>Don’t mock value objects</li>\n<li>Don’t mock everything</li>\n<li>Show love with your tests!</li>\n</ul>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://mockito.org/\" target=\"_blank\" rel=\"noopener\">Mockito website</a> (includes instructions, examples and documentation)</li>\n<li><a href=\"http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html\" target=\"_blank\" rel=\"noopener\">Main reference documentation</a> (with more examples)</li>\n<li><a href=\"https://github.com/mockito/mockito\" target=\"_blank\" rel=\"noopener\">Mockito on GitHub</a></li>\n<li><a href=\"https://code.google.com/p/mockito/\" target=\"_blank\" rel=\"noopener\">Mockito on Google Code</a> (please note: Google Code is closing soon!)</li>\n<li><a href=\"https://corner.squareup.com/2012/10/mockito-android.html\" target=\"_blank\" rel=\"noopener\">Mockito on Android</a> (Square’s blog)</li>\n</ul>\n","more":"<h2 id=\"Overview\"><a href=\"#Overview\" class=\"headerlink\" title=\"Overview\"></a>Overview</h2><p>When we write unit tests for an Android application, sometimes there’s a necessity to mock some classes or interfaces. Instead of writing implementations dedicated for unit tests by hand, we can use Mockito library. We can read article about <a href=\"https://corner.squareup.com/2012/10/mockito-android.html\" target=\"_blank\" rel=\"noopener\">Mockito on Android</a> on <a href=\"https://corner.squareup.com/\" target=\"_blank\" rel=\"noopener\">Square’s blog</a>. Mockito can make our tests cleaner and better. It can be used both in <em>classic</em> Java projects and Android projects. It’s one of the most popular mocking framework in Java and if you’re a Java developer who writes unit tests and tries to apply TDD approach, you should be familiar with it.</p>\n<h2 id=\"Sample-configuration\"><a href=\"#Sample-configuration\" class=\"headerlink\" title=\"Sample configuration\"></a>Sample configuration</h2><p>When we want to use Mockito on Android, we have to remember to add dependency to <code>dexmaker 1.0</code> and <code>dexmaker-mockito 1.0</code>. Sample test configuration in <code>build.gradle</code> file can look as follows (I’ve added more comments to clarify optional doubts):</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// our project dependencies go here...</span></span><br><span class=\"line\"></span><br><span class=\"line\">    androidTestCompile <span class=\"string\">'com.android.support.test:testing-support-lib:0.1'</span> <span class=\"comment\">// Android testing support library</span></span><br><span class=\"line\">    androidTestCompile(<span class=\"string\">'com.google.truth:truth:0.25'</span>) &#123; <span class=\"comment\">// Google's library for assertions (not required by Mockito)</span></span><br><span class=\"line\">        <span class=\"keyword\">exclude</span> <span class=\"keyword\">group</span>: <span class=\"string\">'junit'</span> <span class=\"comment\">// Android has JUnit built in</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    androidTestCompile <span class=\"string\">'com.google.dexmaker:dexmaker:1.0'</span> <span class=\"comment\">// required by Mockito</span></span><br><span class=\"line\">    androidTestCompile <span class=\"string\">'com.google.dexmaker:dexmaker-mockito:1.0'</span> <span class=\"comment\">// required by Mockito</span></span><br><span class=\"line\">    androidTestCompile <span class=\"string\">'org.mockito:mockito-core:1.9.5'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>We should also add information about <code>tesInstrumentationRunner</code> to <code>build.gradle</code> file when we are using it. When we have problems with running our tests, we should configure <code>packagingOptions</code> properly.</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    defaultConfig &#123;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        testInstrumentationRunner <span class=\"string\">\"android.support.test.runner.AndroidJUnitRunner\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    packagingOptions &#123;</span><br><span class=\"line\">        <span class=\"keyword\">exclude</span> <span class=\"string\">'LICENSE.txt'</span></span><br><span class=\"line\">        <span class=\"keyword\">exclude</span> <span class=\"string\">'META-INF/LICENSE.txt'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Remember\"><a href=\"#Remember\" class=\"headerlink\" title=\"Remember\"></a>Remember</h2><p>Quotation from <a href=\"http://mockito.org/\" target=\"_blank\" rel=\"noopener\">Mockito website</a>:</p>\n<ul>\n<li>Do not mock types you don’t own</li>\n<li>Don’t mock value objects</li>\n<li>Don’t mock everything</li>\n<li>Show love with your tests!</li>\n</ul>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><ul>\n<li><a href=\"http://mockito.org/\" target=\"_blank\" rel=\"noopener\">Mockito website</a> (includes instructions, examples and documentation)</li>\n<li><a href=\"http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html\" target=\"_blank\" rel=\"noopener\">Main reference documentation</a> (with more examples)</li>\n<li><a href=\"https://github.com/mockito/mockito\" target=\"_blank\" rel=\"noopener\">Mockito on GitHub</a></li>\n<li><a href=\"https://code.google.com/p/mockito/\" target=\"_blank\" rel=\"noopener\">Mockito on Google Code</a> (please note: Google Code is closing soon!)</li>\n<li><a href=\"https://corner.squareup.com/2012/10/mockito-android.html\" target=\"_blank\" rel=\"noopener\">Mockito on Android</a> (Square’s blog)</li>\n</ul>\n","categories":[],"tags":[{"name":"android","path":"api/tags/android.json"},{"name":"testing","path":"api/tags/testing.json"},{"name":"mockito","path":"api/tags/mockito.json"}]}