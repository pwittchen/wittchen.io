{"title":"Introducing ReactiveBeacons","slug":"introducing-reactive-beacons","date":"2015-09-30T17:49:00.000Z","updated":"2019-07-03T22:51:02.813Z","comments":true,"path":"api/articles/introducing-reactive-beacons.json","excerpt":null,"covers":null,"content":"<p>Recently, I’ve created yet another reactive library for Android. It’s called <a href=\"https://github.com/pwittchen/ReactiveBeacons\" target=\"_blank\" rel=\"noopener\">ReactiveBeacons</a> and it’s responsible for observing BLE (Bluetooth Low Energy) beacons. Beacons are small devices, which became quite popular in the last years. They can be utilized in creating Contextual Awareness, Contextual Computing and <a href=\"https://en.wikipedia.org/wiki/Internet_of_Things\" target=\"_blank\" rel=\"noopener\">Internet of Things</a>. Beacons have lithium battery, are constantly turned on and emit signals via Bluetooth all the time. ReactiveBeacons library allows to transform these signals into Observable stream compatible with RxJava. Whenever new beacon is detected or <a href=\"https://en.wikipedia.org/wiki/Received_signal_strength_indication\" target=\"_blank\" rel=\"noopener\">RSSI</a> (Received signal strength indication) changes, new immutable beacon data is emitted. </p>\n<p>Usage of the library inside the Activity is simple: </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Subscription subscription;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onResume</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">super</span>.onResume();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// optionally, we can request Bluetooth Access</span></span><br><span class=\"line\">  reactiveBeacons.requestBluetoothAccessIfDisabled(<span class=\"keyword\">this</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  subscription = reactiveBeacons.observe()</span><br><span class=\"line\">    .subscribeOn(Schedulers.io())</span><br><span class=\"line\">    .observeOn(AndroidSchedulers.mainThread())</span><br><span class=\"line\">    .subscribe(<span class=\"keyword\">new</span> Action1&lt;Beacon&gt;() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">call</span><span class=\"params\">(Beacon beacon)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// do something with beacon</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>We also have to remember to unregister subscription correctly in order to stop BLE scan, which can drain the battery.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onPause</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">super</span>.onPause();</span><br><span class=\"line\">  subscription.unsubscribe();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>If you want to use this library in your project, add the following dependency to your <code>build.gradle</code> file.</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">compile</span> <span class=\"string\">'com.github.pwittchen:reactivebeacons:0.0.1'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Don’t forget to add dependency to <a href=\"https://github.com/ReactiveX/RxAndroid\" target=\"_blank\" rel=\"noopener\">RxAndroid</a> if you want to use Android-specific features of RxJava. </p>\n<p>Source code of the library can be found at: <a href=\"https://github.com/pwittchen/ReactiveBeacons\" target=\"_blank\" rel=\"noopener\">https://github.com/pwittchen/ReactiveBeacons</a>. </p>\n<p>Any new issues or pull requests are welcome! </p>\n<p>Happy coding!</p>\n","more":"<p>Recently, I’ve created yet another reactive library for Android. It’s called <a href=\"https://github.com/pwittchen/ReactiveBeacons\" target=\"_blank\" rel=\"noopener\">ReactiveBeacons</a> and it’s responsible for observing BLE (Bluetooth Low Energy) beacons. Beacons are small devices, which became quite popular in the last years. They can be utilized in creating Contextual Awareness, Contextual Computing and <a href=\"https://en.wikipedia.org/wiki/Internet_of_Things\" target=\"_blank\" rel=\"noopener\">Internet of Things</a>. Beacons have lithium battery, are constantly turned on and emit signals via Bluetooth all the time. ReactiveBeacons library allows to transform these signals into Observable stream compatible with RxJava. Whenever new beacon is detected or <a href=\"https://en.wikipedia.org/wiki/Received_signal_strength_indication\" target=\"_blank\" rel=\"noopener\">RSSI</a> (Received signal strength indication) changes, new immutable beacon data is emitted. </p>\n<p>Usage of the library inside the Activity is simple: </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> Subscription subscription;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onResume</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">super</span>.onResume();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// optionally, we can request Bluetooth Access</span></span><br><span class=\"line\">  reactiveBeacons.requestBluetoothAccessIfDisabled(<span class=\"keyword\">this</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  subscription = reactiveBeacons.observe()</span><br><span class=\"line\">    .subscribeOn(Schedulers.io())</span><br><span class=\"line\">    .observeOn(AndroidSchedulers.mainThread())</span><br><span class=\"line\">    .subscribe(<span class=\"keyword\">new</span> Action1&lt;Beacon&gt;() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">call</span><span class=\"params\">(Beacon beacon)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// do something with beacon</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>We also have to remember to unregister subscription correctly in order to stop BLE scan, which can drain the battery.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onPause</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">super</span>.onPause();</span><br><span class=\"line\">  subscription.unsubscribe();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>If you want to use this library in your project, add the following dependency to your <code>build.gradle</code> file.</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">dependencies</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">compile</span> <span class=\"string\">'com.github.pwittchen:reactivebeacons:0.0.1'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>Don’t forget to add dependency to <a href=\"https://github.com/ReactiveX/RxAndroid\" target=\"_blank\" rel=\"noopener\">RxAndroid</a> if you want to use Android-specific features of RxJava. </p>\n<p>Source code of the library can be found at: <a href=\"https://github.com/pwittchen/ReactiveBeacons\" target=\"_blank\" rel=\"noopener\">https://github.com/pwittchen/ReactiveBeacons</a>. </p>\n<p>Any new issues or pull requests are welcome! </p>\n<p>Happy coding!</p>\n","categories":[],"tags":[{"name":"android","path":"api/tags/android.json"},{"name":"open-source","path":"api/tags/open-source.json"},{"name":"beacons","path":"api/tags/beacons.json"},{"name":"bluetooth","path":"api/tags/bluetooth.json"},{"name":"ble","path":"api/tags/ble.json"}]}