<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Installing release and debug version of app on a single device · Piotr Wittchen</title><meta name="description" content="Installing release and debug version of app on a single device - Piotr Wittchen"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400"><link rel="search" type="application/opensearchdescription+xml" href="http://wittchen.io/atom.xml" title="Piotr Wittchen"><link rel="alternate" href="/feed.xml" title="Piotr Wittchen" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><div>Piotr Wittchen</div></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">WRITING</a></li><li class="nav-list-item"><a href="/code" target="_self" class="nav-list-link">CODE</a></li><li class="nav-list-item"><a href="/projects" target="_self" class="nav-list-link">PROJECTS</a></li><li class="nav-list-item"><a href="/talks" target="_self" class="nav-list-link">TALKS</a></li><li class="nav-list-item"><a href="/contact" target="_self" class="nav-list-link">CONTACT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Installing release and debug version of app on a single device</h1><div class="post-info">Dec 25, 2014</div><div class="post-content"><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>During software development process developers and QAs may want to have installed release and debug version of the app on a single device, what can be very helpful when they want to develop and use application at the same time. Another advantage is the fact that debug and release version of the app may need different configuration. It this post I will show you an example in which we are changing application name and launcher icon, but we can also change different values during compilation in the same way (e.g. address of the webservice). Some time ago, I’ve created <a href="http://blog.wittchen.biz.pl/different-back-end-urls-for-debug-and-release-version-of-the-android-app/" target="_blank" rel="noopener">similar template</a>, but it was using older version of Build Tools, Android SDK and Android Studio. I’ve created new template, with the newest version of Android Studio (1.0.2) and newest version of Build Tools (1.0.0), so in that case, build.gradle file is smaller and simpler, but does its work correctly.</p>
<h2 id="Exemplary-repository"><a href="#Exemplary-repository" class="headerlink" title="Exemplary repository"></a>Exemplary repository</h2><p>You can find exemplary project template at: <a href="https://github.com/FutureProcessing/android-debug-release-template" target="_blank" rel="noopener">https://github.com/FutureProcessing/android-debug-release-template</a>. All important information are included in <a href="https://github.com/FutureProcessing/android-debug-release-template/blob/master/README.md" target="_blank" rel="noopener">README.md</a> file and <a href="https://github.com/FutureProcessing/android-debug-release-template/blob/master/app/build.gradle" target="_blank" rel="noopener">build.gradle</a> file with project configuration. <strong>Important files</strong>:</p>
<ul>
<li><a href="https://github.com/FutureProcessing/android-debug-release-template/blob/master/README.md" target="_blank" rel="noopener">README.md</a></li>
<li><a href="https://github.com/FutureProcessing/android-debug-release-template/blob/master/build.gradle" target="_blank" rel="noopener">build.gradle</a></li>
<li><a href="https://github.com/FutureProcessing/android-debug-release-template/blob/master/app/build.gradle" target="_blank" rel="noopener">app/build.gradle</a></li>
</ul>
<p>Source of essential <strong><a href="https://github.com/FutureProcessing/android-debug-release-template/blob/master/app/build.gradle" target="_blank" rel="noopener">build.gradle</a></strong> file presenting main idea is as follows:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat</span><br><span class="line"></span><br><span class="line">apply plugin: <span class="string">'com.android.application'</span></span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion <span class="number">21</span></span><br><span class="line">    buildToolsVersion <span class="string">"21.1.1"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> appNameRelease = <span class="string">"My app"</span></span><br><span class="line">    <span class="keyword">def</span> appNameDebug = <span class="string">"My app debug"</span></span><br><span class="line">    <span class="keyword">def</span> launcherIconRelease = <span class="string">"@drawable/ic_launcher"</span></span><br><span class="line">    <span class="keyword">def</span> launcherIconDebug = <span class="string">"@drawable/ic_launcher_debug"</span></span><br><span class="line"></span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">        releaseConfig &#123;</span><br><span class="line">            storeFile <span class="keyword">file</span>(<span class="string">"../key/android-debug-release-template.jks"</span>)</span><br><span class="line">            storePassword <span class="string">"SamplePassword1234"</span></span><br><span class="line">            keyAlias <span class="string">"android-debug-release-template"</span></span><br><span class="line">            keyPassword <span class="string">"SamplePassword1234"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId <span class="string">"fp.com.debugreleasetemplate"</span></span><br><span class="line">        minSdkVersion <span class="number">14</span></span><br><span class="line">        targetSdkVersion <span class="number">21</span></span><br><span class="line">        versionCode <span class="number">1</span></span><br><span class="line">        versionName gitSha() + <span class="string">'-'</span> + buildTime()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    compileOptions &#123;</span><br><span class="line">        <span class="keyword">sourceCompatibility</span> JavaVersion.VERSION_1_7</span><br><span class="line">        <span class="keyword">targetCompatibility</span> JavaVersion.VERSION_1_7</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        debug &#123;</span><br><span class="line">            applicationIdSuffix <span class="string">'.debug'</span></span><br><span class="line">            versionNameSuffix <span class="string">'-DEBUG'</span></span><br><span class="line">            resValue <span class="string">"string"</span>, <span class="string">"app_name"</span>, appNameDebug</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        release &#123;</span><br><span class="line">            resValue <span class="string">"string"</span>, <span class="string">"app_name"</span>, appNameRelease</span><br><span class="line">            minifyEnabled <span class="keyword">false</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></span><br><span class="line">            signingConfig signingConfigs.releaseConfig</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    android.applicationVariants.all &#123; variant -&gt;</span><br><span class="line">        variant.outputs.<span class="keyword">each</span> &#123; output -&gt;</span><br><span class="line">            output.processManifest.<span class="keyword">doLast</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (variant.buildType.isDebuggable()) &#123;</span><br><span class="line">                    <span class="keyword">def</span> manifestOutFile = output.processManifest.manifestOutputFile</span><br><span class="line">                    <span class="keyword">def</span> newFileContents = manifestOutFile.<span class="keyword">getText</span>(<span class="string">'UTF-8'</span>).replace(launcherIconRelease, launcherIconDebug)</span><br><span class="line">                    manifestOutFile.<span class="keyword">write</span>(newFileContents, <span class="string">'UTF-8'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])</span><br><span class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:appcompat-v7:21.0.2'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> buildTime() &#123;</span><br><span class="line">    <span class="keyword">def</span> df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyMMddHHmmss"</span>)</span><br><span class="line">    df.setTimeZone(TimeZone.getTimeZone(<span class="string">"Europe/Warsaw"</span>))</span><br><span class="line">    <span class="keyword">return</span> df.format(<span class="keyword">new</span> Date())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> gitSha() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'git rev-parse --short HEAD'</span>.execute().text.trim()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">task</span> wrapper(type: Wrapper) &#123;</span><br><span class="line">    gradleVersion = <span class="string">'2.2.1'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div></main><footer><div class="paginator"><a href="/detecting-swipe-gesture-in-mobile-application/" class="prev">PREV</a><a href="/basics-of-git/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'wittchenio';
var disqus_identifier = 'installing-release-and-debug-version-of-app-on-a-single-device/';
var disqus_title = 'Installing release and debug version of app on a single device';
var disqus_url = 'http://wittchen.io/installing-release-and-debug-version-of-app-on-a-single-device/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//undefined.disqus.com/count.js" async></script><div class="copyright"><p>© 2013 - 2019 <a href="http://wittchen.io">Piotr Wittchen</a></p><p><a href="https://github.com/pwittchen/wittchen.io">source</a> / <a href="https://stats.uptimerobot.com/ZwxAGU5rxy">uptime</a> / <a href="/feed.xml">rss</a> / <a href="/archives">writing</a> / <a href="/tags">tags</a> / <a href="https://github.com/pwittchen/wittchen.io#rest">api</a> / <a href="/gh">github</a> / <a href="/so">stackoverflow</a> / <a href="/in">linkedin</a> / <a href="mailto:piotr@wittchen.io">email</a></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-2194664-7",'auto');ga('send','pageview');</script></body></html>