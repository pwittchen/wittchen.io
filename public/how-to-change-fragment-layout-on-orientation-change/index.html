<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> How to change Fragment layout on orientation change? · Piotr Wittchen</title><meta name="description" content="How to change Fragment layout on orientation change? - Piotr Wittchen"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400"><link rel="search" type="application/opensearchdescription+xml" href="http://wittchen.io/atom.xml" title="Piotr Wittchen"><link rel="alternate" href="/feed.xml" title="Piotr Wittchen" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><div>Piotr Wittchen</div></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">WRITING</a></li><li class="nav-list-item"><a href="/code" target="_self" class="nav-list-link">CODE</a></li><li class="nav-list-item"><a href="/projects" target="_self" class="nav-list-link">PROJECTS</a></li><li class="nav-list-item"><a href="/talks" target="_self" class="nav-list-link">TALKS</a></li><li class="nav-list-item"><a href="/contact" target="_self" class="nav-list-link">CONTACT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">How to change Fragment layout on orientation change?</h1><div class="post-info">Aug 15, 2013</div><div class="post-content"><p>When we work with Activities in Android, defining different layouts for different screen orientations is easy. The only thing we need to do, is to create two <code>*.xml</code> files with the same name for layouts in two separate directories (<em>res/layout/</em> and <em>res/layout-land/</em>). In <a href="http://developer.android.com/guide/components/fragments.html" target="_blank" rel="noopener">Fragments</a> it’s not that easy. In such case, we need to perform additional operations in order to achieve our goal. Fragment in Android is not re-inflated on configuration change, but we can recreate layout and repopulate view manually. We need to create two layouts for different orientations of the screen in the same way as for Activity:</p>
<ul>
<li><code>res/layout/my_fragment.xml</code></li>
<li><code>res/layout-land/my_fragment.xml</code></li>
</ul>
<p>Then, we need to put code shown below to our fragment. Of course, it requires little adjustments depending on concrete project.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container, Bundle bundle)</span> </span>&#123;</span><br><span class="line">        View view = inflater.inflate(R.layout.my_fragment, container, <span class="keyword">false</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Find your buttons in view, set up onclicks, set up callbacks to your parent fragment or activity here.</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// You can create ViewHolder or separate method for that.</span></span><br><span class="line">        <span class="comment">// example of accessing views: TextView textViewExample = (TextView) view.findViewById(R.id.text_view_example);</span></span><br><span class="line">        <span class="comment">// textViewExample.setText("example");</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onConfigurationChanged</span><span class="params">(Configuration newConfig)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onConfigurationChanged(newConfig);</span><br><span class="line">        LayoutInflater inflater = LayoutInflater.from(getActivity());</span><br><span class="line">        populateViewForOrientation(inflater, (ViewGroup) getView());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">populateViewForOrientation</span><span class="params">(LayoutInflater inflater, ViewGroup viewGroup)</span> </span>&#123;</span><br><span class="line">        viewGroup.removeAllViewsInLayout();</span><br><span class="line">        View subview = inflater.inflate(R.layout.my_fragment, viewGroup);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Find your buttons in subview, set up onclicks, set up callbacks to your parent fragment or activity here.</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// You can create ViewHolder or separate method for that.</span></span><br><span class="line">        <span class="comment">// example of accessing views: TextView textViewExample = (TextView) view.findViewById(R.id.text_view_example);</span></span><br><span class="line">        <span class="comment">// textViewExample.setText("example");</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>That’s it!</p>
</div></article></div></main><footer><div class="paginator"><a href="/asynchronous-loading-and-caching-bitmaps-with-volley/" class="prev">PREV</a><a href="/first-google-glass-hackathon-in-poland/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'wittchenio';
var disqus_identifier = 'how-to-change-fragment-layout-on-orientation-change/';
var disqus_title = 'How to change Fragment layout on orientation change?';
var disqus_url = 'http://wittchen.io/how-to-change-fragment-layout-on-orientation-change/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//undefined.disqus.com/count.js" async></script><div class="copyright"><p>© 2013 - 2019 <a href="http://wittchen.io">Piotr Wittchen</a></p><p><a href="https://github.com/pwittchen/wittchen.io">source</a> / <a href="https://stats.uptimerobot.com/ZwxAGU5rxy">uptime</a> / <a href="/feed.xml">rss</a> / <a href="/archives">writing</a> / <a href="/tags">tags</a> / <a href="https://github.com/pwittchen/wittchen.io#rest">api</a> / <a href="/gh">github</a> / <a href="/so">stackoverflow</a> / <a href="/in">linkedin</a> / <a href="mailto:piotr@wittchen.io">email</a></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-2194664-7",'auto');ga('send','pageview');</script></body></html>